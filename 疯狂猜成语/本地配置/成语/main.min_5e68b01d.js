var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,s){function r(t){try{l(n.next(t))}catch(e){s(e)}}function o(t){try{l(n["throw"](t))}catch(e){s(e)}}function l(t){t.done?a(t.value):new i(function(e){e(t.value)}).then(r,o)}l((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,s&&(r=s[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(s,i[1])).done)return r;switch(s=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,s=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=e.call(t,l)}catch(n){i=[6,n],s=0}finally{a=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var a,s,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},BaseScene=function(t){function e(){var e=t.call(this)||this;return e.isRunning=!1,e.isLoop=!1,e}return __extends(e,t),e.prototype.enter=function(){this.isRunning||(Game.instance().addBottom(this),this.addEvent(),TickerUtil.addLoop(this.loop,this),this.isRunning=!0)},e.prototype.loop=function(){},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.exit=function(){this.isRunning&&(TickerUtil.removeLoop(this.loop),this.parent&&this.parent.removeChild(this),this.removeEvent(),this.isRunning=!1)},e}(egret.DisplayObjectContainer);__reflect(BaseScene.prototype,"BaseScene");var BaseEuiView=function(t){function e(){var e=t.call(this)||this;return e.isEnableBg=!0,e._isOpened=!1,e.openType=0,e.isNeedBg=!0,e.isCreated=!1,e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.init,e),e}return __extends(e,t),e.prototype.init=function(){this.isCreated=!0,this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.x=SpriteUtil.stageCenterX,this.y=SpriteUtil.stageCenterY,this.openType=1},Object.defineProperty(e.prototype,"isOpened",{get:function(){return this._isOpened},enumerable:!0,configurable:!0}),e.prototype.open=function(t){void 0===t&&(t=null),this._isOpened||(this._isOpened=!0,this.isNeedBg&&(this.blackBg||(this.blackBg=SpriteUtil.createRect(),this.blackBg.alpha=.85,this.blackBg.touchEnabled=!0,this.isEnableBg&&this.blackBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.blackOnClose,this))),Game.instance().addMiddle(this.blackBg),Game.instance().addMiddle(this),1==this.openType?GameUtil.scaleIn(this):2==this.openType&&GameUtil.flowIn(this))},e.prototype.blackOnClose=function(){this.isEnableBg&&this.close()},e.prototype.close=function(){this._isOpened=!1,this.parent&&this.parent.removeChild(this),this.blackBg&&this.blackBg.parent&&this.blackBg.parent.removeChild(this.blackBg)},e.prototype.destroy=function(){this.blackBg&&this.blackBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.blackOnClose,this),this.removeChildren()},e.prototype.addToStage=function(){},e.prototype.removeFromStage=function(){},e.prototype.onClick=function(t){},e.prototype.$onAddToStage=function(e,i){t.prototype.$onAddToStage.call(this,e,i),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addToStage()},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.removeFromStage()},e}(eui.Component);__reflect(BaseEuiView.prototype,"BaseEuiView");var BaseView=function(t){function e(){var e=t.call(this)||this;return e.isOpen=!1,e.openType=0,e.isNeedBg=!0,e}return __extends(e,t),e.prototype.open=function(t){void 0===t&&(t=null),this.isOpen||(this.isOpen=!0,this.isNeedBg&&(this.blackBg||(this.blackBg=SpriteUtil.createRect(),this.blackBg.alpha=.85,this.blackBg.touchEnabled=!0,this.blackBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)),Game.instance().addMiddle(this.blackBg)),Game.instance().addMiddle(this),1==this.openType?GameUtil.scaleIn(this):2==this.openType&&GameUtil.flowIn(this))},e.prototype.close=function(){this.isOpen=!1,this.parent&&this.parent.removeChild(this),this.blackBg&&this.blackBg.parent&&this.blackBg.parent.removeChild(this.blackBg)},e.prototype.destroy=function(){this.blackBg&&(this.blackBg.parent&&this.blackBg.parent.removeChild(this.blackBg),this.blackBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)),this.removeChildren()},e}(egret.Sprite);__reflect(BaseView.prototype,"BaseView");var PKTicketView=function(t){function e(){var e=t.call(this)||this;return e._type=0,e.skinName="resource/game_skins/PKTicketView.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){var e=this;t.target==this.videoBtn?(GameSound.instance().playSound("btn"),AppCenter.showVideoAd("rewardvideohqmp").then(function(){HttpServer.getPkTicketsInfo().then(function(t){var i=PKModel.instance().myPkInfo;i.pass_info=t.pass_info;var n=~~((new Date).getTime()/1e3);i.pass_cd=t.pass_cd+n,e._callBack&&e._callBack(),e.close()})}),0==this._type?AppCenter.uploadActivityLog("1020051","click","page"):1==this._type?(AppCenter.uploadActivityLog("1020071","click","page"),PKModel.instance().sendBroadcastInfo("video",{status:1})):2==this._type&&(AppCenter.uploadActivityLog("1020093","click","page"),PKModel.instance().sendBroadcastInfo("video",{status:1}))):t.target==this.cancelTxt&&(GameSound.instance().playSound("btn"),this.close(),0==this._type?AppCenter.uploadActivityLog("1020051","close","page"):1==this._type?AppCenter.uploadActivityLog("1020071","close","page"):2==this._type&&AppCenter.uploadActivityLog("1020093","close","page"))},e.prototype.open=function(e,i){void 0===e&&(e=null),void 0===i&&(i=0),t.prototype.open.call(this),this._callBack=e,this._type=i,0==this._type?AppCenter.uploadActivityLog("1020051","show","page"):1==this._type?AppCenter.uploadActivityLog("1020071","show","page"):2==this._type&&AppCenter.uploadActivityLog("1020093","show","page")},e.prototype.close=function(){t.prototype.close.call(this);var e=PKModel.instance().pkViews,i=e.indexOf(this);i>=0&&e.splice(i,1),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.destroy(),this._callBack=null},e}(BaseEuiView);__reflect(PKTicketView.prototype,"PKTicketView");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function a(t){e.call(n,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}var r=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(n,generateEUI2)},r)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var o=t.split("/");o.pop();var l=o.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(n,generateJSON.paths[t])},this):RES.getResByUrl(l,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){e.call(n,generateJSON.paths[t])},r)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var EventCenter=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.instance=function(){return null==this._instance&&(this._instance=new e),this._instance},e._instance=null,e}(egret.EventDispatcher);__reflect(EventCenter.prototype,"EventCenter");var GameEvent=function(t){function e(e,i){void 0===i&&(i=null);var n=t.call(this,e)||this;return n.data=null,n.data=i,n}return __extends(e,t),e.RELOAD_GAME_NOW="RELOAD_GAME_NOW",e.GOTO_SCENE_EVENT="GOTO_SCENE_EVENT",e.GOTO_START_EVENT="GOTO_START_EVENT",e.GOTO_NEXT_EVENT="GOTO_NEXT_EVENT",e.SHOW_SOUND_SET_EVENT="SHOW_SOUND_SET_EVENT",e.LEVEL_UP_HOME_EVENT="LEVEL_UP_HOME_EVENT",e.UPDATE_MENU_INFO="UPDATE_MENU_INFO",e.UPDATE_PK_INFO="UPDATE_PK_INFO",e.UPDATE_GAME_INFO="UPDATE_GAME_INFO",e.SHOW_TREE_GET_DIALOG_EVENT="SHOW_TREE_GET_DIALOG_EVENT",e.TIP_GAME_INFO_EVENT="TIP_GAME_INFO_EVENT",e.SHOW_CAN_GET_POINT_EVENT="SHOW_CAN_GET_POINT_EVENT",e.UPDATE_HEAD_INFO_EVENT="UPDATE_HEAD_INFO_EVENT",e.UPDATE_BUBBLE_INFO_EVENT="UPDATE_BUBBLE_INFO_EVENT",e.UPDATE_MISSION_LIST_EVENT="UPDATE_MISSION_LIST_EVENT",e.PLAY_COIN_BREATH_EFFECT_EVENT="PLAY_COIN_BREATH_EFFECT_EVENT",e.SHOW_BIG_AD_VIEW_EVENT="SHOW_BIG_AD_VIEW_EVENT",e.UPDATE_SIGN_VIDEO_EVENT="UPDATE_SIGN_VIDEO_EVENT",e.HIDE_STATICS_GAME_EVENT="HIDE_STATICS_GAME_EVENT",e.EXCHANGE_HOME_ITEM_EVENT="EXCHANGE_HOME_ITEM_EVENT",e.READ_MAIL_DETAIL_EVENT="READ_MAIL_DETAIL_EVENT",e.SELECT_MAIL_ITEM_EVENT="SELECT_MAIL_ITEM_EVENT",e.UPDATE_MAIL_STATUS_EVENT="UPDATE_MAIL_STATUS_EVENT",e.SHOW_INVITE_PROMOTION_COUNTDOWN_EVENT="SHOW_INVITE_PROMOTION_COUNTDOWN_EVENT",e.SHOW_HUNDRED="SHOW_HUNDRED",e.CHECK_NEW_USER_REDPACK_EVENT="CHECK_NEW_USER_REDPACK_EVENT",e.RESET_PUZZLE_ITEM="RESET_PUZZLE_ITEM",e.FLY_PUZZLE="FLY_PUZZLE",e.ADD_PUZZLE="ADD_PUZZLE",e.GUIDE_EVENT="GUIDE_EVENT",e.FRIEND_APPLY_CHANGE="FRIEND_APPLY_CHANGE",e}(egret.Event);__reflect(GameEvent.prototype,"GameEvent");var GuessEvent=function(t){function e(e,i){void 0===i&&(i=null);var n=t.call(this,e)||this;return n.data=null,n.data=i,n}return __extends(e,t),e.SHOW_GUESS_BIG_AD_EVENT="SHOW_GUESS_BIG_AD_EVENT",e.GUESS_HIDE_STATICS_EVENT="GUESS_HIDE_STATICS_EVENT",e}(egret.Event);__reflect(GuessEvent.prototype,"GuessEvent");var JudgeEvent=function(t){function e(e,i){void 0===i&&(i=null);var n=t.call(this,e)||this;return n.data=null,n.data=i,n}return __extends(e,t),e.BACK_TO_JUDGE_GAME="BACK_TO_JUDGE_GAME",e.CONTINUE_JUDGE_GAME="CONTINUE_JUDGE_GAME",e}(egret.Event);__reflect(JudgeEvent.prototype,"JudgeEvent");var PKEvent=function(t){function e(e,i){void 0===i&&(i=null);var n=t.call(this,e)||this;return n.data=i,n}return __extends(e,t),e.GOTO_PK_SCENE_EVENT="GOTO_PK_SCENE_EVENT",e.PK_FRIEND_WAITING_EVENT="PK_FRIEND_WAITING_EVENT",e.START_MATCH_EVENT="START_MATCH_EVENT",e.IN_MATCHING_EVENT="IN_MATCHING_EVENT",e.MATCH_SUCCESS_EVENT="MATCH_SUCCESS_EVENT",e.SERVER_CLOSE_CLIENT_EVENT="SERVER_CLOSE_CLIENT_EVENT",e.PK_START_EVENT="PK_START_EVENT",e.GET_ROOM_USERS_EVENT="GET_ROOM_USERS_EVENT",e.GET_QUESTION_TOPIC_EVENT="GET_QUESTION_TOPIC_EVENT",e.USE_ITEM_EVENT="USE_ITEM_EVENT",e.USE_EMOJI_EVENT="USE_EMOJI_EVENT",e.COMPLETE_ONE_EVENT="COMPLETE_ONE_EVENT",e.PK_RESULT_EVENT="PK_RESULT_EVENT",e.PK_READY_EVENT="PK_READY_EVENT",e.PK_LEAVE_EVENT="PK_LEAVE_EVENT",e.PK_BROADCAST_EVENT="PK_BROADCAST_EVENT",e}(egret.Event);__reflect(PKEvent.prototype,"PKEvent");var DragonBonesLoader=function(){function t(t){this.resUrl=t}return t.prototype.loadSkeLoader=function(t,e){this.callBack=e,this.loadSke(""+this.resUrl+t+"_ske.json"),this.loadSheet(""+this.resUrl+t+"_tex.json"),this.loadTexture(""+this.resUrl+t+"_tex.png")},t.prototype.loadSke=function(t){var e=new egret.URLLoader,i=new egret.URLRequest(t);e.dataFormat=egret.URLLoaderDataFormat.VARIABLES,e.addEventListener(egret.Event.COMPLETE,this.skeComplete,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.ioError,this),e.load(i)},t.prototype.loadSheet=function(t){var e=new egret.URLLoader,i=new egret.URLRequest(t);e.dataFormat=egret.URLLoaderDataFormat.VARIABLES,e.addEventListener(egret.Event.COMPLETE,this.sheetComplete,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.ioError,this),e.load(i)},t.prototype.loadTexture=function(t){var e=new egret.URLLoader,i=new egret.URLRequest(t);e.dataFormat=egret.URLLoaderDataFormat.TEXTURE,e.addEventListener(egret.Event.COMPLETE,this.textureComplete,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.ioError,this),e.load(i)},t.prototype.skeComplete=function(t){t.target.removeEventListener(egret.Event.COMPLETE,this.skeComplete,this);try{this.skeData=JSON.parse(t.target.data),this.createDragonBones()}catch(e){console.log(e)}},t.prototype.sheetComplete=function(t){t.target.removeEventListener(egret.Event.COMPLETE,this.sheetComplete,this);try{this.jsonData=JSON.parse(t.target.data),this.createDragonBones()}catch(e){console.log(e)}},t.prototype.textureComplete=function(t){t.target.removeEventListener(egret.Event.COMPLETE,this.textureComplete,this);try{this.pngTexture=t.target.data,this.createDragonBones()}catch(e){console.log(e)}},t.prototype.ioError=function(t){t.target.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.ioError,this),console.log(t)},t.prototype.createDragonBones=function(){if(this.skeData&&this.jsonData&&this.pngTexture){var t=new dragonBones.EgretFactory;t.parseDragonBonesData(this.skeData),t.parseTextureAtlasData(this.jsonData,this.pngTexture);var e=t.buildArmatureDisplay("Armature");e.animation.play("newAnimation",-1),this.callBack&&this.callBack(e),e.x=SpriteUtil.stageCenterX,e.y=SpriteUtil.stageCenterY,Game.instance().addTop(e),this.destroy()}},t.prototype.destroy=function(){this.callBack=null,this.skeData=null,this.jsonData=null,this.pngTexture=null},t}();__reflect(DragonBonesLoader.prototype,"DragonBonesLoader");var Game=function(){function t(){this._scenes={},this.curTime=0,this.times=0}return t.instance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.setStage=function(t){this._gameStage=t,SpriteUtil.stageWidth=t.stageWidth,SpriteUtil.stageHeight=t.stageHeight,SpriteUtil.stageCenterX=SpriteUtil.stageWidth/2,SpriteUtil.stageCenterY=SpriteUtil.stageHeight/2,GameData.urlPath=GameUtil.getURLPath(),t.addEventListener(egret.Event.RESIZE,function(){SpriteUtil.stageWidth=t.stageWidth,SpriteUtil.stageHeight=t.stageHeight,SpriteUtil.stageCenterX=SpriteUtil.stageWidth/2,SpriteUtil.stageCenterY=SpriteUtil.stageHeight/2},this),this._bottom=new egret.DisplayObjectContainer,t.addChild(this._bottom),this._middle=new egret.DisplayObjectContainer,t.addChild(this._middle),this._top=new egret.DisplayObjectContainer,t.addChild(this._top),this.addEvent()},t.prototype.addEvent=function(){EventCenter.instance().addEventListener(GameEvent.GOTO_SCENE_EVENT,this.gotoScene,this)},Object.defineProperty(t.prototype,"gameStage",{get:function(){return this._gameStage},enumerable:!0,configurable:!0}),t.prototype.addBottom=function(t){this._bottom.contains(t)||this._bottom.addChild(t)},t.prototype.addMiddle=function(t){this._middle.contains(t)||this._middle.addChild(t)},t.prototype.addTop=function(t){this._top.contains(t)||this._top.addChild(t)},Object.defineProperty(t.prototype,"currentScene",{get:function(){return this._currentScene},enumerable:!0,configurable:!0}),t.prototype.gotoScene=function(t){var e=t.data,i=this.getScene(e.type);i&&(i.isRunning||(this._currentScene&&this._currentScene.exit(),this._currentScene=i,i.enter(e)))},t.prototype.getScene=function(t){if(this._scenes[t])return this._scenes[t];var e;switch(t){case ConstUtil.SCENE_HOME:e=new MenuScene;break;case ConstUtil.SCENE_CHAIN_IDIOM:e=new IdiomScene;break;case ConstUtil.SCENE_CHAIN_OVER:e=new OverScene;break;case ConstUtil.SCENE_GUESS_MENU:e=new GuessIdiomMenu;break;case ConstUtil.SCENE_GUESS_IDIOM:e=new GuessIdiomScene;break;case ConstUtil.SCENE_GUESS_OVER:e=new GuessIdiomOver;break;case ConstUtil.SCENE_JUDGE_IDIOM:e=new JudgeIdiomScene;break;case ConstUtil.SCENE_DISPEL_PK:e=new DispelPKScene}return this._scenes[t]||(this._scenes[t]=e),e},t.prototype.gotoLastScene=function(){var t=GameView.instance().cardView;if(t&&t.isOpen)return void t.close();if(GameView.instance().closeAll(),this._currentScene instanceof MenuScene){this.times++;var e=(new Date).getTime()/1e3;2==this.times?(this.times=0,e-this.curTime<=2&&AppCenter.exitGamePage()):(AppCenter.showToast("再按一次退出"),this.times=1),this.curTime=e}else this._currentScene instanceof GuessIdiomOver||this._currentScene instanceof GuessIdiomScene?(this.times=0,EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_GUESS_MENU}))):this._currentScene instanceof JudgeIdiomScene?(this._currentScene.showJudgeDialog(1)||EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME})),this.times=0):this._currentScene instanceof DispelPKScene?(this._currentScene.showExitConfirm()||EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME})),this.times=0):(this.times=0,EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME})))},t._instance=null,t}();__reflect(Game.prototype,"Game");var GameSound=function(){function t(){this.musicData={music1:"resource/audio/bgm1.mp3",music2:"resource/audio/bgm2.mp3",pkmenu:"resource/audio/pkmenu.mp3",pkplaying:"resource/audio/pkplaying.mp3"},this.soundData={btn:"resource/audio/btn.mp3",gold:"resource/audio/gold.mp3",gold4:"resource/audio/gold4.mp3",goldbag:"resource/audio/goldbag.mp3",openbox:"resource/audio/openbox.mp3",passlevel:"resource/audio/passlevel.mp3",tianzierr:"resource/audio/tianzierr.mp3",tree:"resource/audio/tree.mp3",update:"resource/audio/update.mp3",coinshow:"resource/audio/coinshow.mp3",zhuanpan:"resource/audio/zhuanpan.mp3",timeflow:"resource/audio/timeflow.mp3",ctianzi:"resource/audio/kantucaitianzi.mp3",time321:"resource/audio/time321.mp3",amazing:"resource/audio/amazing.mp3",cool:"resource/audio/cool.mp3",excellent:"resource/audio/excellent.mp3",good:"resource/audio/good.mp3",nice:"resource/audio/nice.mp3",unbelievable:"resource/audio/unbelievable.mp3",perfect:"resource/audio/perfect.mp3",combo:"resource/audio/combo.mp3",remove:"resource/audio/remove.mp3",select:"resource/audio/select.mp3",win:"resource/audio/win.mp3",lose:"resource/audio/lose.mp3",notice:"resource/audio/invitenotice.mp3",match:"resource/audio/matchmusic.mp3"},this._isCanPlay=!0,this._isPlayMusic=!0,this._isPlaySound=!0,this._lastKey="",this.bgMusic={}}return t.instance=function(){return null==this._instance&&(this._instance=new t),this._instance},Object.defineProperty(t.prototype,"isCanPlay",{set:function(t){if(this._isCanPlay=t,t)this.playMusic();else{var e=AppUtil.isAndroidOrIos();2==e||3==e?AppCenter.stopIosMusic():this.bgMusicChannel&&(this.bgMusicChannel.stop(),this.bgMusicChannel=null)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlayMusic",{get:function(){return this._isPlayMusic},set:function(t){if(this._isPlayMusic=t,t)this.playMusic();else{var e=AppUtil.isAndroidOrIos();2==e||3==e?AppCenter.stopIosMusic():this.bgMusicChannel&&(this.bgMusicChannel.stop(),this.bgMusicChannel=null)}var i=t?"1":"0";AppCenter.nativeCache(ConstUtil.CACHE_MUSIC,"1",i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlaySound",{get:function(){return this._isPlaySound},set:function(t){this._isPlaySound=t;var e=t?"1":"0";AppCenter.nativeCache(ConstUtil.CACHE_SOUND,"1",e)},enumerable:!0,configurable:!0}),t.prototype.playMusic=function(t){if(void 0===t&&(t=this._lastKey),this._isCanPlay&&this._isPlayMusic){this._lastKey=t;var e=AppUtil.isAndroidOrIos();if(2==e||3==e)AppCenter.playIosMusic(this.musicData[t]);else{if(t||(t="music"+(Math.random()>.5?1:2)),!this.bgMusic[t])return void this.loadMusic(t);this.bgMusicChannel&&this.bgMusicChannel.stop(),this.bgMusicChannel=this.bgMusic[t].play(),this.bgMusicChannel.volume=.8}}},t.prototype.playSound=function(t){if(void 0===t&&(t=""),this._isCanPlay&&t&&this.soundData[t]&&this._isPlaySound){var e=AppUtil.isAndroidOrIos();return 2==e||3==e?void AppCenter.playIosSound(this.soundData[t]):void this.loadSound(t)}},t.prototype.loadSound=function(t){if(void 0===t&&(t=""),!AppUtil.isLeShiPhone()){var e=new egret.Sound;e.addEventListener(egret.Event.COMPLETE,function(t){e.play(0,1)},this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){console.log("loaded error!")},this),e.load(this.soundData[t])}},t.prototype.loadMusic=function(t){var e=this;if(!AppUtil.isLeShiPhone()){var i=new egret.Sound;i.addEventListener(egret.Event.COMPLETE,function(n){e.bgMusic[t]=i,e.playMusic(t)},this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){console.log("loaded error!")},this),i.load(this.musicData[t])}},t._instance=null,t}();__reflect(GameSound.prototype,"GameSound");var GameView=function(){function t(){}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},Object.defineProperty(t.prototype,"getCardView",{get:function(){return this._getCardsView||(this._getCardsView=new GetCardView),this._getCardsView},enumerable:!0,configurable:!0}),t.prototype.showMissionView=function(){this.closeAll(this._missionView),this._missionView||(this._missionView=new MissionView),this._missionView.open()},t.prototype.showCommonView=function(t){this.closeAll(this._commonView),this._commonView||(this._commonView=new CommonView),this._commonView.open(t)},t.prototype.showPictureView=function(t){this.closeAll(this._pictureView),this._pictureView||(this._pictureView=new PictureView),this._pictureView.open(t)},t.prototype.showLifeExplainView=function(t){void 0===t&&(t=0),this.closeAll(this._lifeExplainView),this._lifeExplainView||(this._lifeExplainView=new LifeExplainView),this._lifeExplainView.open(t)},t.prototype.showGuessRewardView=function(){this.closeAll(this._guessRewardView),this._guessRewardView||(this._guessRewardView=new GuessRewardView),this._guessRewardView.open()},t.prototype.showRankView=function(){this.closeAll(this._rankView),this._rankView||(this._rankView=new RankView),this._rankView.open()},t.prototype.showMailView=function(){this.closeAll(this._mailView),this._mailView||(this._mailView=new MailView),this._mailView.open()},t.prototype.showUpperLimitView=function(){this.closeAll(this._upLimitView),this._upLimitView||(this._upLimitView=new UpperLimit),this._upLimitView.open()},t.prototype.showJudgeStartView=function(){this.closeAll(this._judgeStartView),this._judgeStartView||(this._judgeStartView=new JudgeStartView),this._judgeStartView.open()},Object.defineProperty(t.prototype,"cardView",{get:function(){return this._cardView},enumerable:!0,configurable:!0}),t.prototype.showCardView=function(){this._cardView||(this._cardView=new CardView),this._cardView.open()},t.prototype.closeAll=function(t){void 0===t&&(t=null),this._missionView&&this._missionView!=t&&this._missionView.isOpened&&this._missionView.close(),this._commonView&&this._commonView!=t&&this._commonView.isOpened&&this._commonView.close(),this._pictureView&&this._pictureView!=t&&this._pictureView.isOpened&&this._pictureView.close(),this._lifeExplainView&&this._lifeExplainView!=t&&this._lifeExplainView.isOpened&&this._lifeExplainView.close(),this._guessRewardView&&this._guessRewardView!=t&&this._guessRewardView.isOpened&&this._guessRewardView.close(),this._upLimitView&&this._upLimitView!=t&&this._upLimitView.isOpened&&this._upLimitView.close(),this._rankView&&this._rankView!=t&&this._rankView.isOpened&&this._rankView.close(),this._mailView&&this._mailView!=t&&this._mailView.isOpened&&this._mailView.close(),this._judgeStartView&&this._judgeStartView!=t&&this._judgeStartView.isOpened&&this._judgeStartView.close()},t.prototype.isHaveOpened=function(){return this._missionView&&this._missionView.isOpened?!0:this._commonView&&this._commonView.isOpened?!0:this._pictureView&&this._pictureView.isOpened?!0:this._lifeExplainView&&this._lifeExplainView.isOpened?!0:this._guessRewardView&&this._guessRewardView.isOpened?!0:this._upLimitView&&this._upLimitView.isOpened?!0:this._rankView&&this._rankView.isOpened?!0:this._judgeStartView&&this._judgeStartView.isOpened?!0:!1},t}();__reflect(GameView.prototype,"GameView");var GuideTip=function(t){function e(){var e=t.call(this)||this;return e.guideIndex=0,e._isGuiding=!1,e.init(),e}return __extends(e,t),e.instance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.init=function(){var t=new egret.Bitmap;t.pixelHitTest=!0,this.addChild(t),t.touchEnabled=!0,this.maskBitmap=t,this.renderTexture=new egret.RenderTexture,this.container=new egret.Sprite;var e=new egret.Sprite;e.graphics.beginFill(0,.7),e.graphics.drawRect(0,0,SpriteUtil.stageWidth,SpriteUtil.stageHeight),e.graphics.endFill(),this.container=e,this.lightDragon=SpriteUtil.createDragonBones("guangquan3_ske_json","guangquan3_tex"),this.lightDragon.touchEnabled=!1,this.handDragon=SpriteUtil.createDragonBones("shou3_ske_json","shou3_tex"),this.handDragon.touchEnabled=!1,this.addChild(this.handDragon),this.descTxt=SpriteUtil.createText("",34,16777215,"left"),this.descTxt.lineSpacing=15,this.addChild(this.descTxt)},Object.defineProperty(e.prototype,"isGuiding",{get:function(){return this._isGuiding},enumerable:!0,configurable:!0}),e.prototype.playGuide=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=""),void 0===n&&(n=!1);var a=this.scoopShape||new egret.Shape;a.graphics.clear(),a.graphics.beginFill(0,1),a.graphics.drawRoundRect(t.x,t.y,t.width,t.height,40),a.graphics.endFill(),this.scoopShape=a,a.blendMode=egret.BlendMode.ERASE,this.container.removeChildren(),this.container.addChild(a),this.renderTexture.drawToTexture(this.container),this.maskBitmap.texture=this.renderTexture,Game.instance().addTop(this),0!=e?(this.lightDragon.x=t.x+t.width/2,this.lightDragon.y=t.y+t.height/2,this.lightDragon.animation.timeScale=.5,this.lightDragon.animation.play("newAnimation"),this.addChild(this.lightDragon)):(this.lightDragon.parent&&this.lightDragon.parent.removeChild(this.lightDragon),this.lightDragon.animation.stop()),this.addChild(this.handDragon),this.descTxt.text=i,this.handDragon.x=t.x+t.width/2+100,this.handDragon.y=t.y+t.height+20,this.handDragon.animation.play("newAnimation"),i&&(this.descTxt.x=SpriteUtil.stageCenterX-this.descTxt.width/2,this.descTxt.y=this.handDragon.y+this.handDragon.height),n?this.hasEventListener(egret.TouchEvent.TOUCH_TAP)||this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this):this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.guideIndex=e,this._isGuiding=!0},e.prototype.touchHandler=function(t){EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GUIDE_EVENT)),console.log("cccc")},e.prototype.close=function(){this.guideIndex=0,this._isGuiding=!1,this.parent&&this.parent.removeChild(this),this.lightDragon.parent&&this.lightDragon.parent.removeChild(this.lightDragon),this.lightDragon.animation.stop(),this.handDragon.parent&&this.handDragon.parent.removeChild(this.handDragon),this.handDragon.animation.stop(),this.descTxt.text="",this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e}(egret.DisplayObjectContainer);__reflect(GuideTip.prototype,"GuideTip");var MovieClipLoader=function(){function t(){this.times=0,this.pngjson={data:null,texture:null};var t=new egret.URLLoader;t.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this);var e=new egret.ImageLoader;e.addEventListener(egret.Event.COMPLETE,this.onLoadTextureComplete,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onImageIOError,this),this._urlLoader=t,this._imageLoader=e}return t.prototype.loaderMc=function(t,e){this._key=t,this._callback=e;var i=this._urlLoader,n=GameData.urlPath+"resource/hotAssets/"+this._key+".json";i.load(new egret.URLRequest(n))},t.prototype.onLoadComplete=function(t){this.times=0;var e=t.target,i=JSON.parse(e.data);this.pngjson.data=i,this._imageLoader.load(GameData.urlPath+"resource/hotAssets/"+this._key+".png")},t.prototype.onIOError=function(t){if(this.times++,this.times>3)return void this.destroy();var e=this._urlLoader,i=GameData.urlPath+"resource/hotAssets/"+this._key+".json";e.load(new egret.URLRequest(i))},t.prototype.onImageIOError=function(t){return this.times++,this.times>3?void this.destroy():void this._imageLoader.load(GameData.urlPath+"resource/hotAssets/"+this._key+".png")},t.prototype.onLoadTextureComplete=function(t){var e=t.target,i=e.data,n=new egret.Texture;n.bitmapData=i,this.pngjson.texture=n;var a=new egret.MovieClipDataFactory(this.pngjson.data,this.pngjson.texture),s=new egret.MovieClip(a.generateMovieClipData("mc"));this._callback&&this._callback(s),this.destroy()},t.prototype.destroy=function(){this._urlLoader.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this._urlLoader.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),this._imageLoader.removeEventListener(egret.Event.COMPLETE,this.onLoadTextureComplete,this),this._imageLoader.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onImageIOError,this),this._callback=null,this._key="",this._urlLoader=null,this._imageLoader=null,this.pngjson.data=null,this.pngjson.texture=null,this.pngjson=null},t}();__reflect(MovieClipLoader.prototype,"MovieClipLoader");var AchieveItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/AchieveItem.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.coinTxt.fontFamily="xnumberBold",this.progressTxt.fontFamily="xnumberBold",this.btnLabel.fontFamily="xnumberBold",this.cacheAsBitmap=!0},e.prototype.touchHandler=function(t){var e=this;if(this._data){GameSound.instance().playSound("btn");var i=this._data.status;this._data.id;return this.upActivity("click"),0==i?void(1==this._data.pid?GameModel.instance().getNextLevelInfo().then(function(t){if(t.status){var e=t.health_paid;if(e>0){if("huawei"==GameData.baseData.appcqid&&GameData.isVerifyMode())return EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_CHAIN_IDIOM})),void GameView.instance().closeAll();EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_CHAIN_IDIOM})),GameView.instance().closeAll()}else EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_CHAIN_IDIOM})),GameView.instance().closeAll();GameData.statisticsData.gameid=(new Date).toLocaleDateString()+"-"+Math.random().toLocaleString(),GameData.statisticsData.retrycount=0,GameData.statisticsData.clicks=0,GameData.statisticsData.clicktips=0,GameData.statisticsData.continuous=0,GameData.statisticsData.gametype=1,GameData.statisticsData.gameround=GameModel.instance().levelData.level.id,GameData.statisticsData.gamestauts=0,GameData.statisticsData.diomicosttime="",GameData.statisticsData.laststat="__laststat__",GameData.statisticsData.thisstat="__thisstat__",GameData.statisticsData.lng="__lng__",GameData.statisticsData.lat="__lat__",GameData.statisticsData.appinfo="__appinfo__",GameData.statisticsData.basestation="__basestation__",HttpServer.statisticsGame()}else{if(GameData.isVerifyMode())return void AppCenter.showToast("体力值不足");GameView.instance().showCommonView({type:0})}})["catch"](function(){}):3==this._data.pid?GuessModel.instance().getGuessInitInfo().then(function(){var t=GuessModel.instance().userData.level.level_id;0>=t?GuessModel.instance().getGuessNextLevelData(parseInt(t)+1).then(function(t){t.status&&(EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_GUESS_IDIOM})),GameView.instance().closeAll())
}):(EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_GUESS_MENU})),GameView.instance().closeAll())})["catch"](function(){}):4==this._data.pid||5==this._data.pid||6==this._data.pid||7==this._data.pid?GameView.instance().showJudgeStartView():8==this._data.pid?AppCenter.openPage("h5",GameData.H5_URL_HOST+"lottery.html",!1,!1,!1):9==this._data.pid&&(GameView.instance().closeAll(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME})))):2==i?void AppCenter.inviteFriend("121"):void(1==i&&HttpServer.getMissionReward(this._data.id).then(function(t){HttpServer.updateMissionTipsData();var i=1,n=t.taskId;(7==n||8==n||10==n)&&(i=2),i=1,e._data.status=2,e._data.finish_time=(new Date).getTime()/1e3,e.setData(e._data);var a=new AchievePopup;a.open(-1,e._data),GameModel.instance().updateCoinNum(t.bonus),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MISSION_LIST_EVENT))}))}},e.prototype.setData=function(t){if(this._data=t,t){this.titleImg.source="achieve_json.achieve_"+this._data.id,this.titleTxt.text=this._data.title,this.coinTxt.text=this._data.coin;var e=this._data.num,i=this._data.finish;void 0==i?this.progressGrp.visible=!1:(this.progressGrp.visible=!0,this.progressTxt.textFlow=[{text:""+i,style:{textColor:16747576}},{text:"/"+e}],this.progressBar.width=96*i/e);var n=new Date(1e3*this._data.finish_time),a=n.getMonth()+1,s=n.getDate();this.getTimeTxt.text=n.getFullYear()+"-"+(a>9?a:"0"+a)+"-"+(s>9?s:"0"+s)+" 获得",this.currentState=this._data.status+"",this.upActivity()}},e.prototype.upActivity=function(t){if(void 0===t&&(t="show"),this._data){var e=this._data.id,i=this._data.status;28==e?AppCenter.uploadActivityLog("1030041",t,"enrty",e,i):29==e?AppCenter.uploadActivityLog("1030042",t,"enrty",e,i):30==e?AppCenter.uploadActivityLog("1030043",t,"enrty",e,i):31==e?AppCenter.uploadActivityLog("1030044",t,"enrty",e,i):32==e?AppCenter.uploadActivityLog("1030045",t,"enrty",e,i):33==e?AppCenter.uploadActivityLog("1030046",t,"enrty",e,i):34==e?AppCenter.uploadActivityLog("1030047",t,"enrty",e,i):35==e?AppCenter.uploadActivityLog("1030048",t,"enrty",e,i):36==e?AppCenter.uploadActivityLog("1030049",t,"enrty",e,i):37==e?AppCenter.uploadActivityLog("1030050",t,"enrty",e,i):38==e?AppCenter.uploadActivityLog("1030051",t,"enrty",e,i):39==e?AppCenter.uploadActivityLog("1030052",t,"enrty",e,i):40==e?AppCenter.uploadActivityLog("1030053",t,"enrty",e,i):41==e?AppCenter.uploadActivityLog("1030054",t,"enrty",e,i):42==e?AppCenter.uploadActivityLog("1030055",t,"enrty",e,i):43==e?AppCenter.uploadActivityLog("1030056",t,"enrty",e,i):44==e?AppCenter.uploadActivityLog("1030057",t,"enrty",e,i):45==e?AppCenter.uploadActivityLog("1030058",t,"enrty",e,i):46==e?AppCenter.uploadActivityLog("1030059",t,"enrty",e,i):47==e?AppCenter.uploadActivityLog("1030063",t,"enrty",e,i):48==e?AppCenter.uploadActivityLog("1030064",t,"enrty",e,i):49==e?AppCenter.uploadActivityLog("1030065",t,"enrty",e,i):50==e?AppCenter.uploadActivityLog("1030066",t,"entry",e,i):54==e?AppCenter.uploadActivityLog("1030107",t,"entry",e,i):55==e?AppCenter.uploadActivityLog("1030108",t,"entry",e,i):56==e?AppCenter.uploadActivityLog("1030109",t,"entry",e,i):57==e?AppCenter.uploadActivityLog("1030110",t,"entry",e,i):58==e?AppCenter.uploadActivityLog("1030111",t,"entry",e,i):59==e?AppCenter.uploadActivityLog("1030112",t,"entry",e,i):60==e?AppCenter.uploadActivityLog("1030113",t,"entry",e,i):61==e?AppCenter.uploadActivityLog("1030114",t,"entry",e,i):62==e&&AppCenter.uploadActivityLog("1030115",t,"entry",e,i)}},e}(eui.Component);__reflect(AchieveItem.prototype,"AchieveItem",["eui.UIComponent","egret.DisplayObject"]);var ActivityComp=function(t){function e(){var e=t.call(this)||this;return e.Height=510,e.Width=750,e.foldIcons=[],e.swapPos=[null,null],e.vertialHgt=150,e.isClick=!1,e.mCurTime=0,e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=this;GameData.isVerifyMode()||(this.createBtn1(),this.createBtn2(),this.createBtn3(),this.createBtn4(),this.createBtn5(),this.createPKBtn(),AppCenter.getPollingData().then(function(e){var i=e.million_answers&&e.million_answers.onoff;i?(t.createBtn0(),t.createRankBtn(),t.updateMillionActivity(!0),AppCenter.uploadActivityLog("1080039","show","page")):(t.createCloudBtn(e),t.createRankBtn())}),this.touchEnabled=!0,this.createExpandBtn(),this.updateExpandState())},e.prototype.showMissionTip=function(t){this.btn5&&(this.btn5.getChildAt(2).visible=t)},e.prototype.updateMillionActivity=function(t){var e=this;void 0===t&&(t=!1);this.btn0;if(this.btn0&&this.btn0.parent){var i=new Date,n=~~(i.getTime()/1e3);n-this.mCurTime<=30||(this.mCurTime=n,GameModel.instance().getMillionActivity().then(function(t){console.log("getMillionActivity ",t);for(var a=t.gps,s=a.concat(t.gpstmw),r=s.length,o=1e6,l=t.t,h=Number.MAX_VALUE,c=Number.MAX_VALUE,d=Number.MAX_VALUE,p=Number.MAX_VALUE,u=0;r>u;u++){var g=s[u],v=parseInt(g.st);if(v>=t.t){l=v,o=g.bs;break}}for(var u=0;r>u;u++){var g=s[u],m=parseInt(g.st)-t.t,_=Math.abs(m),f=parseInt(g.et),E=0==f?m:parseInt(g.et)-t.t,T=Math.abs(E);h>_&&(h=_,c=m),d>T&&(d=T,p=E)}var y=e.btn0.getChildAt(0),C=e.btn0.getChildAt(1),w=e.btn0.getChildAt(2),S=e.btn0.getChildAt(3),A=S.getChildAt(1),I=S.getChildAt(2);if(egret.Tween.removeTweens(A),egret.Tween.removeTweens(I),egret.Tween.removeTweens(C),C.rotation=0,l<=t.t)e.btn0.getChildAt(5).visible=!0,w.visible=!1,S.visible=!1;else{e.btn0.getChildAt(5).visible=!1,w.visible=!1,S.visible=!0;var b=TimeUtil.getTimeByTime(l);I.text=""+(b.date==i.getDate()?"今天":"明天")+b.hour+":"+b.minute,A.text=e.getNumValue(o),A.y=60,I.y=60,e.playRollMillon([A,I]),C.visible=!0,y.visible=!0,GameUtil.playBreathAnim(C,{rotation:-20},{rotation:20},300)}var x=c/60,G=p/60;console.log("updateMillionActivity ",n,x,G);var U=30>=x&&G>-10;e.swapIconForMillionActivity(U),AppCenter.getPollingData().then(function(t){var e=t.hongbao_enter&&t.hongbao_enter.onoff,i=t.hongbao_enter&&t.hongbao_enter.pic,n=t.hongbao_page;n?AppCenter.nativeCache(ConstUtil.CACHE_MILLION_CLOUD_INFO,"1",JSON.stringify(n)):AppCenter.nativeCache(ConstUtil.CACHE_MILLION_CLOUD_INFO,"1",""),e&&i&&(w.texture&&(w.visible=!0,C.visible=!1,y.visible=!1,egret.Tween.removeTweens(C)),GameUtil.getBase64ImageByUrl(i,1e4).then(function(t){w.visible=!0,C.visible=!1,y.visible=!1,egret.Tween.removeTweens(C),w.texture=t,w.width=144,w.height=144,w.anchorOffsetX=w.width/2}))})}))}},e.prototype.playRollMillon=function(t,e){var i=this;void 0===e&&(e=0);var n=t[e];n.y=60,egret.Tween.get(n).to({y:12},400).wait(1e3).to({y:-40},400).call(function(){var n=0==e?1:0;i.playRollMillon(t,n)})},e.prototype.getNumValue=function(t){return t>=1e8?"瓜分"+~~(t/1e8)+"亿":"瓜分"+~~(t/1e4)+"万"},e.prototype.showActivity=function(){this.btn4&&this.btn4.parent&&AppCenter.uploadActivityLog("1080015","show","entry"),this.btn2&&this.btn2.parent&&AppCenter.uploadActivityLog("1010051","show","page"),this.btn1&&this.btn1.parent&&AppCenter.uploadActivityLog("1010055","show","page"),this.btn0&&this.btn0.parent&&AppCenter.uploadActivityLog("1080039","show","page"),this.btn6&&this.btn6.parent&&AppCenter.uploadActivityLog("1020048","show","page")},e.prototype.touchHandler=function(t){var e=this;if(t.target==this.foldBtn)return this.expandBtn.visible=!0,void this.updateExpandState();var i=t.target.name;if(!(i.search("activitybtn_")<0)){var n=i.split("_")[1];if(0==n)GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1080039","click","page"),GameModel.instance().getAccountInfo().then(function(t){if(0==t.mIntCurPlatform)AppCenter.showToast("游客不能参与哦~");else{var e=GameData.baseData.isDebug==ConstUtil.TEST_ENV?"https://h5.crazyccy.com/million__test/":"https://h5.crazyccy.com/million/";AppCenter.openPage("h5",e,!1,!1,!1,!0)}});else if(1==n)GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1010055","click","page"),GameModel.instance().getAccountInfo().then(function(t){0==t.mIntCurPlatform?AppCenter.openPage("bindPhone",""):AppCenter.openPage("h5",GameData.H5_URL_HOST+"invitefenhong.html?f=107&qid=ccyyaoqing1",!1,!1,!1)});else if(2==n)GameSound.instance().playSound("btn"),GameView.instance().showJudgeStartView(),AppCenter.uploadActivityLog("1010051","click","page");else if(3==n){if(this.isClick)return;this.isClick=!0,this.btn3.getChildAt(2).visible=!1,GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1010038","click","page"),GuessModel.instance().getGuessInitInfo().then(function(){var t=GuessModel.instance().userData.level.level_id;0>=t?GuessModel.instance().getGuessNextLevelData(parseInt(t)+1).then(function(t){t.status&&EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_GUESS_IDIOM}))}):EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_GUESS_MENU})),e.isClick=!1})["catch"](function(){e.isClick=!1})}else 4==n?(GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1080015","click","page"),AppCenter.openPage("h5",GameData.H5_URL_HOST+"lottery.html",!1,!1,!1)):5==n?(GameSound.instance().playSound("btn"),GameView.instance().showMissionView(),AppCenter.uploadActivityLog("1010013","click","page")):6==n?(GameSound.instance().playSound("btn"),AppCenter.nativeCache(ConstUtil.CACHE_HIGH_REWARD_PK,"1","1"),egret.setTimeout(function(){var t=e.btn6.getChildAt(2);t.source="dispelPk_json.dpk_newactivity"},this,1e3),AppCenter.uploadActivityLog("1020048","click","page"),PKModel.instance().gotoPKGame()):7==n&&(GameSound.instance().playSound("btn"),this.expandBtn.visible=!1,this.updateExpandState())}},e.prototype.createCloudBtn=function(t){if(t&&t.game_index_enter&&t.game_index_enter.onoff){AppCenter.uploadActivityLog("1010050","show","page");var e=t.game_index_enter,i=new egret.Sprite;GameUtil.getBase64ImageByUrl(e.pic).then(function(t){var n=new egret.Bitmap;n.texture=t,n.width=102,n.height=102,i.addChildAt(n,0);var a=SpriteUtil.createText(e.title,26,16777215,"center",!0,4,11558400);a.width=n.width+20,a.x=-10,a.y=86,i.addChild(a)}),i.touchEnabled=!0,i.touchChildren=!1,this.addChild(i),i.cacheAsBitmap=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSound.instance().playSound("btn"),AppCenter.openPage("h5",e.url,!0,!1,!1),AppCenter.uploadActivityLog("1010050","click","page")},this),i.x=SpriteUtil.stageWidth-120,i.y=this.Height-360-20-36,this.cloudBtn=i,this.foldIcons.push(this.cloudBtn),this.updateExpandState()}},e.prototype.createBtn0=function(){var t=new egret.DisplayObjectContainer;t.x=SpriteUtil.stageWidth-130,t.y=this.Height-360-20-45,t.touchChildren=!1,t.touchEnabled=!0,t.name="activitybtn_0",this.btn0=t,this.addChild(t);var e=SpriteUtil.createImage("menuover_json#mredbtn",!1);e.x=10,e.y=20;var i=SpriteUtil.createImage("menuover_json#mredbag");i.anchorOffsetY=.75*i.height,i.x=e.width/2+10,i.y=80;var n=new egret.Bitmap;n.x=e.width/2+10,n.y=-30;var a=SpriteUtil.createImage("menuover_json#millintop");a.x=i.x,a.y=e.height+5;var s=new egret.Sprite,r=SpriteUtil.createImage("menuover_json#mredtpbg",!1),o=SpriteUtil.createText("瓜分400万",26,16777215,"center",!0);o.width=r.width,o.y=12;var l=SpriteUtil.createText("20:00",26,16777215,"center",!0);l.width=r.width,l.y=12,s.x=a.x-r.width/2,s.y=a.y-r.height/2,s.visible=!1;var h=SpriteUtil.createRect(r.width,r.height,0,0,0);h.x=s.x,h.y=s.y,s.addChild(r),s.addChild(o),s.addChild(l),s.mask=h,t.addChild(e),t.addChild(i),t.addChild(n),t.addChild(s),t.addChild(h),t.addChild(a),this.addChild(t),this.foldIcons.push(this.btn0),this.swapPos[0]={x:this.btn0.x,y:this.btn0.y},this.updateExpandState()},e.prototype.createRankBtn=function(){var t=new egret.Sprite,e=SpriteUtil.createImage("menuover_json.newrank",!1);t.addChild(e);var i=SpriteUtil.createText("排行榜",26,16777215,"center",!0,4,11558400);i.width=166,i.textAlign="center",i.x=-31,i.y=86,t.addChild(i),t.touchEnabled=!0,t.touchChildren=!1,t.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1010061","show","page"),GameView.instance().showRankView()},this),e.visible=!GameData.isVerifyMode(),t.x=SpriteUtil.stageWidth-120,this.addChild(t),t.name="rankBtn",this.rankBtn=t,this.foldIcons.push(t),this.layoutRightIcons(),this.updateExpandState()},e.prototype.layoutRightIcons=function(){for(var t=this.expandSprite.getChildAt(0),e=0,i=50,n=0;n<this.foldIcons.length;n++)e+=this.foldIcons[n].height+i;t.height=e-10,t.y=264-t.height;var a=this.expandSprite.getChildAt(1);a.y=t.y+.5*(t.height-a.height);for(var s=t.y+.5*(t.height-264)+8,r=this.foldIcons.length,n=0;r>n;n++){var o=this.foldIcons[r-1-n];o.parent&&(o.y=s,s+=o.height+i,o==this.rankBtn&&(s-=20))}},e.prototype.createBtn1=function(){var t=new egret.Sprite,e=SpriteUtil.createMovieClip("ssjiasu");e.anchorOffsetX=0,e.anchorOffsetY=0,e.x=24,t.addChild(e);var i=SpriteUtil.createText("邀请收益",26,16777215,"center",!0,4,11558400);i.width=166,i.x=-10,i.y=86,t.addChild(i),t.touchEnabled=!0,t.touchChildren=!1,t.name="activitybtn_1",t.x=SpriteUtil.stageWidth-130-12,t.y=this.Height-240-45,this.addChild(t),this.btn1=t,this.foldIcons.push(this.btn1)},e.prototype.createBtn2=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i;return __generator(this,function(n){return t=new egret.Sprite,e=SpriteUtil.createMovieClip("panguan","mc",!1),e.x=10,e.play(-1),t.addChild(e),i=SpriteUtil.createText("成语判官",26,16777215,"center",!0,4,11558400),i.width=e.width+20,i.y=86,t.addChild(i),t.touchEnabled=!0,t.touchChildren=!1,this.addChild(t),t.name="activitybtn_2",t.touchChildren=!1,t.touchEnabled=!0,t.cacheAsBitmap=!0,t.x=166,t.y=this.Height-120,this.btn2=t,[2]})})},e.prototype.createBtn3=function(){var t=new egret.Sprite;t.x=20,t.y=this.Height-120-5,t.name="activitybtn_3";var e=SpriteUtil.createMovieClip("kantucai","mc",!1);e.play(-1),e.x=16,e.y=10,t.addChild(e);var i=SpriteUtil.createText("看图猜",26,16777215,"left",!0,4,11558400);i.x=25,i.y=90,t.addChild(i),t.touchEnabled=!0,t.touchChildren=!1;var n=SpriteUtil.createImage("menuover_json#redpoint");n.x=i.width+20,n.y=5-n.y/2,t.addChild(n),this.addChild(t),AppCenter.uploadActivityLog("1010038","show","page"),this.btn3=t,AppCenter.nativeCache(ConstUtil.CACHE_GUESS_BUTTON_POINT,"2").then(function(t){var e=t&&t.value?parseInt(t.value):0;isNaN(e)&&(e=0),0==e?(n.visible=!0,e=1,AppCenter.nativeCache(ConstUtil.CACHE_GUESS_BUTTON_POINT,"1",""+e)):n.visible=!1})},e.prototype.createBtn4=function(){var t=new egret.Sprite,e=SpriteUtil.createMovieClip("cjrk","mc",!1);e.play(-1),t.addChild(e);var i=SpriteUtil.createText("免费抽手机",26,16777215,"center",!0,4,11558400);i.width=e.width+40,i.x=-20,i.y=86,t.addChild(i),t.touchEnabled=!0,t.touchChildren=!1,t.name="activitybtn_4",t.x=SpriteUtil.stageWidth-120-10,t.y=this.Height-120,this.addChild(t),this.btn4=t,this.swapPos[1]={x:this.btn4.x,y:this.btn4.y}},e.prototype.createBtn5=function(){var t=new egret.Sprite,e=SpriteUtil.createImage("menuover_json#taskbtn",!1);e.x=10,e.y=6,t.addChild(e);var i=SpriteUtil.createText("任务成就",26,16777215,"left",!0,4,11558400);i.x=4,i.y=90,t.addChild(i),t.touchEnabled=!0,t.touchChildren=!1;var n=SpriteUtil.createImage("menuover_json#redpoint");n.x=i.width,n.y=n.height/2,t.addChild(n),this.addChild(t),t.name="activitybtn_5",t.touchChildren=!1,t.touchEnabled=!0,t.x=SpriteUtil.stageWidth-240-45,t.y=this.Height-120-3,this.btn5=t},e.prototype.createPKBtn=function(){var t=new egret.Sprite;t.name="activitybtn_6";var e=SpriteUtil.createDragonBones("qiaogu_ske_json","qiaogu_tex");e.animation.play("newAnimation",-1),e.x=e.width/2,e.y=e.height/2+12,t.addChild(e);var i=SpriteUtil.createText("消成语",26,16777215,"left",!0,4,11558400);i.x=54,i.y=97,t.addChild(i);var n=new eui.Image;AppCenter.nativeCache(ConstUtil.CACHE_HIGH_REWARD_PK,"2").then(function(t){t&&t.value||(t={value:0}),t.value?n.source="dispelPk_json.dpk_newactivity":n.source="dispelPk_json.dpk_muchreward"}),n.x=116,n.y=-20,t.addChild(n),t.touchEnabled=!0,t.touchChildren=!1,this.addChild(t),this.btn6=t,t.x=SpriteUtil.stageWidth/2-t.width/2,t.y=this.Height-120-10},e.prototype.createExpandBtn=function(){var t=new egret.Sprite;t.name="activitybtn_7";var e=SpriteUtil.createImage("menuover_json#more_btn",!1);e.x=10,e.y=6,t.addChild(e);var i=SpriteUtil.createImage("menuover_json#left_icon",!1);i.x=25,i.y=40,t.addChild(i),GameUtil.playBreathAnim(i,{x:18},{x:25},300),t.x=SpriteUtil.stageWidth-t.width-10,t.y=this.Height-270,t.touchEnabled=!0,t.touchChildren=!1,this.addChild(t),this.expandBtn=t;var n=SpriteUtil.createImage("menuover_json#icon_bg_1",!1);n.scale9Grid=new egret.Rectangle(20,20,40,40),n.width=153,n.height=264,n.touchEnabled=!1,this.expandSprite=new egret.Sprite,this.expandSprite.addChild(n);var a=SpriteUtil.createImage("menuover_json#right_btn",!1);a.x=-24,a.y=50,a.touchEnabled=!0,this.expandSprite.addChild(a),this.foldBtn=a,this.expandSprite.x=SpriteUtil.stageWidth-n.width,this.expandSprite.y=t.y-155,this.addChildAt(this.expandSprite,0)},e.prototype.swapIconForMillionActivity=function(t){this.btn0&&(t&&this.btn0.y<this.btn4.y||!t&&this.btn0.y>this.btn4.y)&&(this.btn0.visible=this.btn4.visible=!0,t?(this.btn0.x=this.swapPos[1].x-15,this.btn0.y=this.swapPos[1].y-15,this.btn4.x=this.swapPos[0].x+10,this.btn4.y=this.swapPos[0].y+10,this.foldIcons=[this.btn1,this.btn4,this.rankBtn]):(this.btn0.x=this.swapPos[0].x,this.btn0.y=this.swapPos[0].y,this.btn4.x=this.swapPos[1].x,this.btn4.y=this.swapPos[1].y,this.foldIcons=[this.btn0,this.btn1,this.rankBtn]),this.updateExpandState(),this.layoutRightIcons())},e.prototype.updateExpandState=function(){var t=this;this.expandSprite.visible=!this.expandBtn.visible,this.foldIcons.forEach(function(e){e&&(e.visible=!t.expandBtn.visible)})},e}(egret.Sprite);__reflect(ActivityComp.prototype,"ActivityComp");var BezierCoin=function(t){function e(){var e=t.call(this)||this;e._isActivate=!1;var i=SpriteUtil.createMovieClip("coineff");return e.addChild(i),e.mc=i,e}return __extends(e,t),e.prototype.reset=function(t,e){this.startPt=t,this.endPt=e;var i=(this.startPt.x+this.endPt.x)/2,n=(this.startPt.y+this.endPt.y)/2;this.midPt1={x:i-80,y:this.startPt.y-300},this.midPt2={x:i-120,y:n+20>SpriteUtil.stageCenterY?400:n+20},this.x=this.startPt.x,this.y=this.startPt.y,this.mc.play(-1),this._isActivate=!0},Object.defineProperty(e.prototype,"isActivate",{get:function(){return this._isActivate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"factor",{get:function(){return 0},set:function(t){this.x=Math.pow(1-t,3)*this.startPt.x+3*t*(1-t)*this.midPt1.x+3*t*t*(1-t)*this.midPt2.x+this.endPt.x*Math.pow(t,3),this.y=Math.pow(1-t,3)*this.startPt.y+3*t*(1-t)*this.midPt1.y+3*t*t*(1-t)*this.midPt2.y+this.endPt.y*Math.pow(t,3)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.parent&&this.parent.removeChild(this),this.mc&&this.mc.stop(),this._isActivate=!1},e}(egret.Sprite);__reflect(BezierCoin.prototype,"BezierCoin");var BigWordItem=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=SpriteUtil.createImage("judgegame_json#bigwordbg");this.addChild(t),this.wordBg=t;var e=SpriteUtil.createText("毴",100,0,"center");e.bold=!0,e.width=t.width,e.height=t.height,e.verticalAlign="middle",e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.y=7,this.addChild(e),this.wordTxt=e,this.touchEnabled=!0,this.touchChildren=!1,this.cacheAsBitmap=!0},e.prototype.setWord=function(t){void 0===t&&(t=""),this.wordTxt.text=""+t,this.wordBg.alpha=1,this.wordBg.texture=RES.getRes("judgegame_json#bigwordbg")},e.prototype.showErrorEff=function(){this.wordBg.texture=RES.getRes("judgegame_json#bigwordwarnbg"),egret.Tween.removeTweens(this.wordBg),GameUtil.playBreathAnim(this.wordBg,{alpha:1},{alpha:0},100,3)},e}(egret.Sprite);__reflect(BigWordItem.prototype,"BigWordItem");var BubbleItem=function(t){function e(){var e=t.call(this)||this;return e.isCreated=!1,e._isDead=!0,e.skinName="resource/game_skins/BubbleItem.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.lifeTxt.fontFamily="xnumberBold",this.lifeTxt.fontFamily="xnumberBold",this.isCreated=!0,this.setData(this._data),this.touchEnabled=!0,this.touchChildren=!1,this.cacheAsBitmap=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},Object.defineProperty(e.prototype,"isDead",{get:function(){return this._isDead},enumerable:!0,configurable:!0}),e.prototype.touchHandler=function(t){this._data&&(GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1010034","click","page","",this._data.type),GameModel.instance().getBubbleReward(this._data),this.reset())},e.prototype.setData=function(t){if(this._data=t,this._isDead=!1,this.isCreated&&this._data){1==this._data.type?(this.bubbleImg.source=RES.getRes("menuover_json.bubblecoin"),this.lifeTxt.text="",this.coinTxt.text=""+this._data.amount):(this.bubbleImg.source=RES.getRes("menuover_json.bubblelife"),this.coinTxt.text="",this.lifeTxt.text="x"+this._data.amount),AppCenter.uploadActivityLog("1010034","show","page","",t.type),egret.Tween.removeTweens(this);var e=this.y,i=Math.random()>.5?e+20:e-20;GameUtil.playBreathAnim(this,{y:e},{y:i},1e3)}},e.prototype.reset=function(){this.parent&&this.parent.removeChild(this),this._data=null,this._isDead=!0},e}(eui.Component);__reflect(BubbleItem.prototype,"BubbleItem",["eui.UIComponent","egret.DisplayObject"]);var CardImageItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/CardImageItem.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.touchChildren=!1,this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.getImageUrl=function(){var t=""+ConstUtil.PATH_CARDS+this.data.type+"_"+this.data.idx+".png";return t},e.prototype.touchHandler=function(){if(GameSound.instance().playSound("btn"),this.data.status){var t=new ShowImageView,e=this.data;t.open(this.getImageUrl(),e.name)}else AppCenter.showToast("挑战通过即有机会获得~")},e.prototype.dataChanged=function(){var t=this,e=this.data;if(this.nameTxt.textColor=0==e.status?11644844:13313568,this.nameTxt.text=e.name,0==e.status)return void(this.avatarImg.source="viewpage_json.notget");var i=""+ConstUtil.PATH_CARDS+e.type+"_"+e.idx+".png";GameUtil.getDynamicImage(i).then(function(e){t.avatarImg.source=e})},e}(eui.ItemRenderer);__reflect(CardImageItem.prototype,"CardImageItem",["eui.UIComponent","egret.DisplayObject"]);var CardTypeItem=function(t){function e(){var e=t.call(this)||this;return e.isCreated=!1,e.skinName="resource/game_skins/CardTypeItem.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.isCreated=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.cacheAsBitmap=!0,this.xScroller.horizontalScrollBar.autoVisibility=!1,this.xScroller.horizontalScrollBar.visible=!1,this.imgList.layout=new eui.HorizontalLayout,this.imgList.itemRenderer=CardImageItem},e.prototype.touchHandler=function(t){var e=this;t.target==this.getBtn&&(GameSound.instance().playSound("btn"),this.data.finish&&0==this.data.is_received?(AppCenter.uploadActivityLog("1020037","click","page"),HttpServer.getFinishCardRewardInfo(this.data.card_type).then(function(t){e.data.is_received=1,GameModel.instance().updateCoinNum(t.gold),GameUtil.showTips("恭喜获得"+t.gold),e.refresh()})):this.data.finish?AppCenter.showToast("本套卡片的奖励已经领取~"):AppCenter.showToast("尚未集齐本套卡片~"))},e.prototype.dataChanged=function(){this.refresh()},e.prototype.refresh=function(){if(this.data){var t=this.data.cards;this.titleTxt.textFlow=[{text:this.data.group_name+"("},{text:""+this.data.current,style:{textColor:4111117}},{text:"/"+this.data.total+")"}],this.descTxt.textFlow=[{text:"集齐可以兑换"},{text:""+this.data.reward_gold,style:{textColor:16749336}},{text:"金币"}];var e=this.data.finish&&0==this.data.is_received;this.data.is_received?(this.btnLabel.text="已兑换",this.coinImg.visible=!1):(this.btnLabel.text="兑换"+this.data.reward_gold,this.coinImg.visible=!0),this.getBtn.filters=e?null:GameUtil.getGrayFilter();for(var i=[],n=0;n<t.length;n++){var a=t[n];a.type=this.data.card_type,i.push(a)}this.imgList.dataProvider=new eui.ArrayCollection(i),this.imgList.validateNow(),this.xScroller.viewport.scrollH=0}},e}(eui.ItemRenderer);__reflect(CardTypeItem.prototype,"CardTypeItem",["eui.UIComponent","egret.DisplayObject"]);var GuessGroupItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/GuessGroupItem.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.touchEnabled=!0;for(var e=[],i=0;12>i;i++){var n=this["levelGrp"+i];n.getChildAt(1).fontFamily="xnumberBold",e.push(n)}this.levelGrpArr=e,this.mainGrp.touchEnabled=!0,this.mainGrp.cacheAsBitmap=!0},e.prototype.dataChanged=function(){this.refresh()},e.prototype.refresh=function(){var t=this.data.index,e=GuessModel.instance().userData.level,i=12*t;this.zIndex=~~(e.total/12)-t;for(var n=this.levelGrpArr.length,a=GuessIdiomMenu.createHeadLocate(),s=0,r=0,o=0,l=0;n>l;l++){var h=this.levelGrpArr[l],c=h.getChildAt(0),d=h.getChildAt(1),p=i+l+1;d.text=""+p,d.strokeColor=11686659,h.name="selectlevel_"+p,h.visible=!0,p>e.total?h.visible=!1:p<=e.level_id?c.source=RES.getRes("guessgame_json.levelpass"):p==e.level_id+1?(c.source=RES.getRes("guessgame_json.levelunlock"),s=h.x+34,r=h.y-h.height/2-24,o=e.video_level.indexOf(p)>=0?2:1):p<=e.total?(c.source=RES.getRes("guessgame_json.levellock"),d.strokeColor=7297057):h.visible=!1}o>0?(a.x=s,a.y=r,this.addChild(a),a.getChildAt(1).visible=1==o,a.getChildAt(2).visible=2==o,2==o&&AppCenter.uploadActivityLog("1020046","show","page")):a.parent==this&&this.removeChild(a)},e}(eui.ItemRenderer);__reflect(GuessGroupItem.prototype,"GuessGroupItem",["eui.UIComponent","egret.DisplayObject"]);var GuessOverItem=function(t){function e(){var e=t.call(this)||this;return e.isFirstShowAdd=!1,e.isShowVideo=!1,e.isCreated=!1,e.skinName="resource/game_skins/GuessOverItem.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.isCreated=!0,this.cacheAsBitmap=!0,this.titleTxt.fontFamily="xnumberBold",this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.exScroller.verticalScrollBar.visible=!1,this.exScroller.verticalScrollBar.autoVisibility=!1,this.refresh()},e.prototype.touchHandler=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n,a;return __generator(this,function(s){switch(s.label){case 0:return t.target!=this.backBtn?[3,1]:(GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1020031","close","page"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_GUESS_MENU})),[3,6]);case 1:return t.target!=this.nextBtn?[3,5]:(GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1020031","click","page"),e=parseInt(GuessModel.instance().levelData.level.id),this.isShowVideo?(AppCenter.uploadActivityLog("1020047","click","page"),[4,AppCenter.showVideoAd("rewardvideoktjs")]):[3,3]);case 2:s.sent(),i=GuessModel.instance().userData.level.video_level,n=i.indexOf(e+1),n>=0&&i.splice(n,1),s.label=3;case 3:return[4,GuessModel.instance().getGuessNextLevelData(e+1)];case 4:return a=s.sent(),a.status?(GameData.guessStaticsData.gamestauts=0,HttpServer.statisticsGuessGame(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_GUESS_IDIOM})),[3,6]):[2];case 5:t.target==this.addNewBtn&&(GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1010100","click","","","hardBook_add","from_gameCheckPoint"),HttpServer.addNewIdiomBook(GuessModel.instance().completeData.idiom.idiom).then(function(){AppCenter.nativeCache(ConstUtil.CACHE_FIRST_ADD_NEW_BOOK,"2").then(function(t){var e=t&&t.value?parseInt(t.value):0;if(isNaN(e)&&(e=0),0==e){var i=new FirstAddNewView;i.open(),AppCenter.nativeCache(ConstUtil.CACHE_ERROR_GUIDE,"1","1")}})})),s.label=6;case 6:return[2]}})})},e.prototype.refresh=function(){if(this.isCreated){var t=GuessModel.instance().completeData,e=t.idiom;this.titleTxt.text="恭喜通过第 "+t.level.level_id+" 关",this.idiomTxt.text=e.idiom,this.explainTxt.text=e.idiom_explain;var i=GuessModel.instance().userData.level,n=i.level_id,a=i.video_level,s=a.indexOf(1+n);s>=0?(this.videoIcon.visible=!0,this.nextTxt.text="解锁下一关",this.nextTxt.x=310,this.isShowVideo=!0,AppCenter.uploadActivityLog("1020047","show","page")):(this.videoIcon.visible=!1,this.nextTxt.text="下一关",this.nextTxt.x=320,this.isShowVideo=!1)}},e}(eui.Component);__reflect(GuessOverItem.prototype,"GuessOverItem",["eui.UIComponent","egret.DisplayObject"]);var GuessWordItem=function(t){function e(){var e=t.call(this)||this;return e.word="",e._sindex=-1,e._index=-1,e._status=0,e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=SpriteUtil.createImage("idiomcene_json#rect1");this.addChild(t),this.wordImg=t,this.selectMc=SpriteUtil.createMovieClip("selectedeff"),this.addChild(this.selectMc);var e=SpriteUtil.createText("毴",54,0,"left");e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,this.addChild(e),this.wordTxt=e,this.touchChildren=!1,this.touchEnabled=!0,this.cacheAsBitmap=!0},Object.defineProperty(e.prototype,"index",{get:function(){return this._index},set:function(t){this._index=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sindex",{get:function(){return this._sindex},set:function(t){this._sindex=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},set:function(t){this._status=t,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.word="",this._sindex=-1,this._status=e.G_NORMAL,this.refresh()},e.prototype.setWord=function(t){void 0===t&&(t=""),this.word=t,this.refresh()},e.prototype.mistake=function(){this.wordTxt.textColor=16711680},e.prototype.complete=function(){GameUtil.playBreathAnim(this,{scaleX:1,scaleY:1},{scaleX:1.2,scaleY:1.2},200,1),this.refresh()},e.prototype.refresh=function(){var t=this;this.wordTxt.text=this.word,this.wordTxt.textColor=2236962,this.visible=!0,this.selectMc.stop(),this.selectMc.visible=!1,this.scaleX=1,this.scaleY=1,this.rotation=0,this._status==e.G_STATIC?(this.wordImg.texture=RES.getRes("idiomcene_json#rect5"),this.visible=!0):this._status==e.G_SELECTED?(this.selectMc.gotoAndPlay(1,-1),this.selectMc.visible=!0):this._status==e.G_HIDDEN?this.visible=!1:this._status==e.G_DELETE&&egret.Tween.get(this).to({scaleX:.01,scaleY:.01,rotation:360},800).call(function(){egret.Tween.removeTweens(t),t.scaleX=1,t.scaleY=1,t.rotation=0,t.visible=!1})},e.G_STATIC=0,e.G_NORMAL=1,e.G_SELECTED=2,e.G_DELETE=3,e.G_HIDDEN=4,e}(egret.Sprite);__reflect(GuessWordItem.prototype,"GuessWordItem");var HeadItem=function(t){function e(){var e=t.call(this)||this;return e.isHideSound=!0,e.isHideLife=!0,e.isCreated=!1,e.curTime=0,e.x=10,e.y=GameData.ipxHgt,e.skinName="resource/game_skins/HeadItem.exml",e}return __extends(e,t),e.instance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.isCreated||(this.soundBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.cashBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)),this.isCreated=!0,this.cacheAsBitmap=!0,this.coinGrp.visible=!GameData.isVerifyMode(),this.headImg.mask=this.headMask,this.headImg.touchEnabled=!0,this.headImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.lifeGrp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.expTxt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),EventCenter.instance().addEventListener(GameEvent.PLAY_COIN_BREATH_EFFECT_EVENT,this.playCoinBreathEff,this),this.refresh(),this.coinTxt.fontFamily="xnumberBold",this.timeTxt.fontFamily="xnumberMedium",this.numTxt.fontFamily="xnumberBold",this.expTxt.fontFamily="xnumberBold",this.soundBtn.x=SpriteUtil.stageWidth-this.soundBtn.width-24,AppCenter.nativeCache(ConstUtil.CACHE_REDPOINT,"2").then(function(t){t.value?(e.redPoint.visible=!1,e.redPoint.parent&&e.redPoint.parent.removeChild(e.redPoint)):(e.lifeGrp.addChild(e.redPoint),AppCenter.nativeCache(ConstUtil.CACHE_REDPOINT,"1","true"))
})},e.prototype.touchHandler=function(t){GameSound.instance().playSound("btn");var e=t.target;if(e==this.headImg||e==this.cashBtn){if(GameData.isVerifyMode())return;AppCenter.uploadActivityLog("1010007","click","page"),AppCenter.openPage("userCenter","https://resources.zhihuizhangyu.com/fkccy__test/apph5/wallet.html")}else if(e==this.soundBtn){AppCenter.uploadActivityLog("1010008","click","page");var i=new GameEvent(GameEvent.SHOW_SOUND_SET_EVENT,{show:!0});EventCenter.instance().dispatchEvent(i)}else if(e==this.lifeGrp){if(GameData.isVerifyMode())return;GameView.instance().showLifeExplainView(),this.redPoint.parent&&this.redPoint.parent.removeChild(this.redPoint),AppCenter.nativeCache(ConstUtil.CACHE_REDPOINT,"1","true")}else if(e==this.expTxt){if(GameData.isVerifyMode())return;GameView.instance().showLifeExplainView(1)}},e.prototype.playCoinBreathEff=function(){this.coinGrp&&GameUtil.playBreathAnim(this.coinGrp.getChildAt(1),{scaleX:1,scaleY:1},{scaleX:1.2,scaleY:1.2},50,1)},e.prototype.getGlobalLifePt=function(){return this.gpt||(this.gpt=this.lifeImg.parent.localToGlobal(this.lifeImg.x,this.lifeImg.y)),this.gpt},e.prototype.loop=function(){var t=this;if(!(this.curTime<=0)){var e=~~((new Date).getTime()/1e3),i=this.curTime-e,n=GameModel.instance().userData.health;0>=i&&this.curTime>0?(this.curTime=0,GameModel.instance().getAddLifeInfo(3).then(function(){t.refresh()})):(n.cd=i,this.timeTxt.text=TimeUtil.getMSTimeStr(i))}},e.prototype.refresh=function(){var t=this,e=GameModel.instance().userData,i=e.health;this.numTxt.text=i.point+"/"+i.max,i.point<i.max?(this.curTime=~~((new Date).getTime()/1e3)+i.cd+2,this.timeTxt.text=TimeUtil.getMSTimeStr(i.cd)):(this.timeTxt.text="",this.curTime=0),this.soundBtn.visible=this.isHideSound,this.coinTxt.text=GameModel.instance().totalCoin+"",this.expTxt.text="阅历值: "+e.character.exp;var n=GameModel.instance().accountInfo;if(n){var a=n.mAccountMap,s=a&&GameUtil.getFigureUrl(a);GameUtil.getHeadIconByUrl(s).then(function(e){t.headImg.texture=e})}else GameModel.instance().getAccountInfo().then(function(e){var i=e.mAccountMap,n=i&&GameUtil.getFigureUrl(i);GameUtil.getHeadIconByUrl(n).then(function(e){t.headImg.texture=e})})},e.prototype.hideSound=function(t){void 0===t&&(t=!1),this.isHideSound=t,this.isCreated&&(this.soundBtn.visible=t)},e.prototype.hideLife=function(t){void 0===t&&(t=!1),this.isHideLife=t,this.isCreated&&(this.lifeGrp.visible=t)},e}(eui.Component);__reflect(HeadItem.prototype,"HeadItem",["eui.UIComponent","egret.DisplayObject"]);var InvitePKTip=function(t){function e(){var e=t.call(this)||this;return e.intervalId=0,e.downcount=10,e.skinName="resource/game_skins/tip/InvitePKTip.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.x=SpriteUtil.stageCenterX-this.width/2,this.y=-this.height,egret.Tween.get(this).to({y:GameData.ipxHgt+12},350),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){var e=t.target;if(e==this.agreeBtn){var i=PKModel.instance().myPkInfo.pass_info;i.pass>0?(PKModel.instance().isFriendFlag=this._data.isFriend,PKModel.instance().sendReceiveInvite(this._data.userId)):AppCenter.showToast("入场券不足"),this.close(),AppCenter.uploadActivityLog("1020090","click","page"),GameSound.instance().playSound("btn")}else e==this.ignoreBtn&&(PKModel.instance().sendRejectInvite(this._data.userId),this.close(),AppCenter.uploadActivityLog("1020090","click","page"),GameSound.instance().playSound("btn"))},e.prototype.open=function(t){Game.instance().addMiddle(this),this._data=t,GameSound.instance().playSound("notice"),AppCenter.uploadActivityLog("1020090","show","page"),this.downcount=10,this.downcountLbl.text=this.downcount+"s",this.intervalId=egret.setInterval(this.onSecond,this,1e3)},e.prototype.onSecond=function(){this.downcount--,this.downcount<=0?(PKModel.instance().sendRejectInvite(this._data.userId),this.close()):this.downcountLbl.text=this.downcount+"s"},e.prototype.close=function(){this.parent&&(this.parent.removeChild(this),AppCenter.uploadActivityLog("1020090","close","page")),egret.clearInterval(this.intervalId),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this._data=null},e}(eui.Component);__reflect(InvitePKTip.prototype,"InvitePKTip",["eui.UIComponent","egret.DisplayObject"]);var InvitePromotionCountdown=function(t){function e(e){var i=t.call(this)||this;return i._startTime=0,i._countdown=-1,i.skinName="resource/game_skins/InvitePromotionCountdownSkin.exml",i._countdown=e,i._startTime=(new Date).getTime(),i}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.refresh()},e.prototype.touchHandler=function(t){GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1010085","click","page"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.SHOW_INVITE_PROMOTION_COUNTDOWN_EVENT,{visible:!1,isDone:!1}))},e.prototype.loop=function(){-1!=this._countdown&&this.refresh()},e.prototype.refresh=function(){var t=(new Date).getTime(),e=this._countdown-(t-this._startTime);0>e&&(e=0,this.visible=!1),this.countdownLabel.text=TimeUtil.getHMSTimeStr(Math.round(e/1e3))},e}(eui.Component);__reflect(InvitePromotionCountdown.prototype,"InvitePromotionCountdown",["eui.UIComponent","egret.DisplayObject"]);var MailItemRenderer=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/MailItemRenderer.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){if(t.target==this.touchGrp){GameSound.instance().playSound("btn");var e=new GameEvent(GameEvent.READ_MAIL_DETAIL_EVENT,this.data);EventCenter.instance().dispatchEvent(e)}else if(t.target==this.checkboxImg||t.target==this.onCheckboxImg){GameSound.instance().playSound("btn"),this.data.selected=1==this.data.selected?!1:!0,this.refresh();var i=new GameEvent(GameEvent.SELECT_MAIL_ITEM_EVENT,this.data);EventCenter.instance().dispatchEvent(i)}},e.prototype.dataChanged=function(){this.refresh()},e.prototype.getTimeStr=function(t){var e="",i=t.split(" "),n=i[0].split("-"),a=i[1].split(":"),s=new Date;return e=s.getFullYear()==parseInt(n[0])&&s.getMonth()+1==parseInt(n[1])&&s.getDate()==parseInt(n[2])?a[0]+":"+a[1]:n[1]+"-"+n[2]},e.prototype.refresh=function(){var t=this.data;this.redpointImg.visible=!t.sta,this.titleLabel.text=t.title,this.timeLabel.text=this.getTimeStr(t.crt),this.checkboxImg.visible=!t.selected,this.onCheckboxImg.visible=!this.checkboxImg.visible},e}(eui.ItemRenderer);__reflect(MailItemRenderer.prototype,"MailItemRenderer",["eui.UIComponent","egret.DisplayObject"]);var MissionItem=function(t){function e(){var e=t.call(this)||this;return e.videoTimes=0,e.curVideoTime=0,e.isCreated=!1,e.skinName="resource/game_skins/MissionItem.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.isCreated||this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.coinTxt.fontFamily="xnumberBold",this.progressTxt.fontFamily="xnumberBold",this.btnLabel.fontFamily="xnumberBold",this.cacheAsBitmap=!0,this.isCreated=!0,this.timer=new egret.Timer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerHandler,this),this.setData(this._data)},e.prototype.timerHandler=function(){this._data&&this._data.time&&(this._data.time--,this._data.time>0?this.btnLabel.text=""+TimeUtil.getMSTimeStr(this._data.time):this.btnLabel.text="看视频")},e.prototype.touchHandler=function(t){var e=this;if(this._data){GameSound.instance().playSound("btn");var i=this._data.status,n=this._data.id;if(0==i)return GameModel.instance().getAccountInfo().then(function(t){14==n?0==t.mIntCurPlatform?AppCenter.openPage("bindPhone",""):AppCenter.openPage("h5",GameData.H5_URL_HOST+"invite.html?f=1&qid=ccyyaoqing1"):2==n?0==t.mIntCurPlatform?AppCenter.openPage("bindPhone",""):AppCenter.openPage("h5",GameData.H5_URL_HOST+"invitationcode.html"):(3==n||4==n)&&AppCenter.openPage("bindPhone","")}),void(23==n?(AppCenter.openPermissionSetting(),GameView.instance().closeAll()):6==n?AppCenter.openSignNotfSetting().then(function(t){console.log("AppCenter.openSignNotfSetting : ",t," of ",typeof t),t&&"true"==t.result&&(e._data.status=1,e.setData(e._data),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MISSION_LIST_EVENT)))}):51!=n&&52!=n&&53!=n||"battle"==this.currentState||(GameView.instance().closeAll(),AppCenter.uploadActivityLog("1020048","click","page"),PKModel.instance().gotoPKGame()));if(11==n){var a=this._data.time;if(a>0||2==i)return;return AppCenter.showVideoAd("rewardvideotask").then(function(){HttpServer.getMissionReward(n).then(function(t){GameModel.instance().updateCoinNum(t.bonus),e._data.finish=t.finish,e._data.num=t.total,e._data.time=t.time,e._data.finish>=e._data.num&&(e._data.status=2),e.setData(e._data),AppCenter.showAdDialog(1,t.bonus,GameModel.instance().totalCoin,"bigtask"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MISSION_LIST_EVENT))}),HttpServer.updateMissionTipsData()}),void this.upActivity("click")}if(1==i)return this.upActivity("click"),1==n?(AppCenter.showVisitorDialog(),void GameView.instance().closeAll()):22==n?(AppCenter.showVisitorDialog(),void GameView.instance().closeAll()):void HttpServer.getMissionReward(this._data.id).then(function(t){HttpServer.updateMissionTipsData();var i=1,n=t.taskId;return(7==n||8==n||10==n)&&(i=2),i=1,e._data.status=14==n?0:2,e.setData(e._data),GameModel.instance().updateCoinNum(t.bonus),"battle"==e.currentState?(AppCenter.showToast("获得"+t.bonus+"金币 "+e.itemToastStr),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_PK_INFO)),void EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MISSION_LIST_EVENT))):(EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MISSION_LIST_EVENT)),void AppCenter.showAdDialog(i,t.bonus,GameModel.instance().totalCoin,"bigtask").then(function(){}))})}},e.prototype.setData=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n,a,s,r,o,l,h,c,d,p;return __generator(this,function(u){if(this._data=t,!this.isCreated||!t)return[2];if(this.titleTxt.text=this._data.title,this.coinTxt.text=this._data.coin,e=this._data.num,i=this._data.finish,this.timer.reset(),this.timer.start(),void 0==i||2>e?(this.progressGrp.visible=!1,this.btnLabel.y=60,this.getBtn.y=42):(this.progressGrp.visible=!0,this.btnLabel.y=82,this.getBtn.y=64,n="battle"==this.currentState?11272082:16747576,this.progressTxt.textFlow=[{text:""+i,style:{textColor:n}},{text:"/"+e}],this.progressBar.width=96*i/e),a=this._data.status,s=this._data.type,this.btnLabel.textColor=16777215,0==a?(this.btnLabel.text="进行中",this.getBtn.source="viewpage_json.btndoing",27==this._data.id?(this.btnLabel.text="进行中...",this.getBtn.source="viewpage_json.btnget"):6==this._data.id&&(this.btnLabel.text="去完成")):1==a?(this.btnLabel.text="领取奖励",this.getBtn.source="viewpage_json.btnget"):(this.btnLabel.text="已领取",this.getBtn.source="viewpage_json.btndisabled"),11==this._data.id&&(r=this._data.time,r>0?(this.timer.start(),this.btnLabel.text=""+TimeUtil.getMSTimeStr(r)):2==a?this.btnLabel.text="已领取":this.btnLabel.text="看视频"),"battle"==this.currentState&&(0==a?(this.btnLabel.text="未完成",this.getBtn.source="dispelPk_json.dpk_mnotget"):1==a?(this.btnLabel.text="领取",this.btnLabel.textColor=345370,this.getBtn.source="dispelPk_json.dpk_mget"):(this.btnLabel.text="已领取",this.getBtn.source="viewpage_json.btndisabled")),this.itemGrp1.visible=this.itemGrp2.visible=this.itemGrp3.visible=!1,51==this._data.id||52==this._data.id||53==this._data.id){for(o=[],this.itemToastStr="",this._data.ticket_num&&o.push({id:0,num:this._data.ticket_num}),this._data.prop_type&&this._data.prop_type.forEach(function(t){o.push({id:t,num:1})}),l=o.length,h=1;l>=h;h++)c=o[h-1],this["itemGrp"+h].visible=!0,this["itemImg"+h].source="viewpage_json.pk_item_"+c.id,d=this["itemTxt"+h],d.text=this.getItemName(c.id),p=this["itemNumTxt"+h],p.text="x"+c.num,p.x=d.x+d.width,this.itemToastStr+=" "+d.text+p.text;"battle"!=this.currentState&&0==a&&(this.btnLabel.text="去完成")}return this.upActivity(),[2]})})},e.prototype.getItemName=function(t){switch(t){case 0:return"入场券";case 1:return"放大镜";case 2:return"墨水";case 3:return"重排";case 4:return"保护卡"}},e.prototype.upActivity=function(t){if(void 0===t&&(t="show"),this._data){var e=this._data.id,i=this._data.status;1==e?(i=1==this._data.status?0:1,AppCenter.uploadActivityLog("1030001",t,"enrty",e,i)):2==e?AppCenter.uploadActivityLog("1030003",t,"enrty",e,i):3==e?AppCenter.uploadActivityLog("1030005",t,"enrty",e,i):4==e?AppCenter.uploadActivityLog("1030004",t,"enrty",e,i):5==e?AppCenter.uploadActivityLog("1030006",t,"enrty",e,i):6==e?AppCenter.uploadActivityLog("1030002",t,"enrty",e,i):7==e?(i=1==this._data.status?0:1,AppCenter.uploadActivityLog("1030010",t,"enrty",e,i)):8==e?AppCenter.uploadActivityLog("1030011",t,"enrty",e,i):9==e?AppCenter.uploadActivityLog("1030012",t,"enrty",e,i):10==e?AppCenter.uploadActivityLog("1030013",t,"enrty",e,i):11==e?AppCenter.uploadActivityLog("1030008",t,"enrty",e,i):12==e?AppCenter.uploadActivityLog("1030014",t,"enrty",e,i):13==e?AppCenter.uploadActivityLog("1030033",t,"enrty",e,i):14==e?AppCenter.uploadActivityLog("1030007",t,"enrty",e,i):15==e?AppCenter.uploadActivityLog("1030015",t,"enrty",e,i):16==e?AppCenter.uploadActivityLog("1030016",t,"enrty",e,i):17==e?AppCenter.uploadActivityLog("1030017",t,"enrty",e,i):18==e?AppCenter.uploadActivityLog("1030018",t,"enrty",e,i):19==e?AppCenter.uploadActivityLog("1030019",t,"enrty",e,i):20==e?AppCenter.uploadActivityLog("1030020",t,"enrty",e,i):21==e?AppCenter.uploadActivityLog("1030021",t,"enrty",e,i):22==e?(i=0,AppCenter.uploadActivityLog("1030035",t,"entry",e,i)):23==e?AppCenter.uploadActivityLog("1030036",t,"entry",e,i):27==e?AppCenter.uploadActivityLog("1030037",t,"entry",e,i):24==e?AppCenter.uploadActivityLog("1030038",t,"entry",e,i):25==e?AppCenter.uploadActivityLog("1030039",t,"entry",e,i):26==e?AppCenter.uploadActivityLog("1030040",t,"entry",e,i):51==e?"battle"==this.currentState?"click"==t&&AppCenter.uploadActivityLog("1020055",t,"entry",e,i):AppCenter.uploadActivityLog("1030104",t,"entry",e,i):52==e?"battle"==this.currentState?"click"==t&&AppCenter.uploadActivityLog("1020056",t,"entry",e,i):AppCenter.uploadActivityLog("1030105",t,"entry",e,i):53==e&&("battle"==this.currentState?"click"==t&&AppCenter.uploadActivityLog("1020057",t,"entry",e,i):AppCenter.uploadActivityLog("1030106",t,"entry",e,i))}},e}(eui.Component);__reflect(MissionItem.prototype,"MissionItem",["eui.UIComponent","egret.DisplayObject"]);var NewUserRedpack=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/NewUserRedpackSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1010087","click","page"),AppCenter.showFirstRewardWaringDialog()},e}(eui.Component);__reflect(NewUserRedpack.prototype,"NewUserRedpack",["eui.UIComponent","egret.DisplayObject"]);var OverItem=function(t){function e(){var e=t.call(this)||this;return e.model=GameModel.instance(),e.isCreated=!1,e.skinName="resource/game_skins/OverItem.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.isCreated||(this.homeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.nextBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.container=new eui.Group,this.scroller.viewport=this.container,this.scroller.verticalScrollBar.autoVisibility=!1,this.scroller.verticalScrollBar.visible=!1,this.container.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.createList()),this.isCreated=!0,this.levelTxt.fontFamily="xnumberBold",this.titleTxt.fontFamily="xnumberBold",this.lvlTxt1.fontFamily="xnumberBold",this.lvlTxt2.fontFamily="xnumberBold",this.refresh(this._data),GameData.isVerifyMode()&&(this.imgGrp1.visible=!1,this.imgGrp2.visible=!1,this.levelTxt.visible=!1)},e.prototype.touchHandler=function(t){if(GameSound.instance().playSound("btn"),t.target==this.homeBtn)AppCenter.uploadActivityLog("1020014","close","page"),AppCenter.hidePassGameView(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME,action:1}));else if(t.target==this.nextBtn){var e=GameModel.instance().userData,i=e.health;if(0==i.point&&10==this._data.level_id)return GameData.isVerifyMode()?void AppCenter.showToast("体力不足"):void GameView.instance().showCommonView({type:3});AppCenter.uploadActivityLog("1020014","click","page"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_NEXT_EVENT))}else{var n=t.target.name;if(n.search("group_")<0)return;var a=t.target.idiom_name;HttpServer.getIdiomExplainData(a).then(function(t){var e=new ExplainView;e.open(t.idiom,"from_gameCheckPoint")})}},e.prototype.getGlobalLifePt=function(){return this.gpt||(this.gpt=this.lifeImg.parent.localToGlobal(this.lifeImg.x,this.lifeImg.y)),this.gpt},e.prototype.refresh=function(t){if(this._data=t,this.container&&this.container.removeChildren(),this.isCreated&&t){var e=t.reward,i=t.reward2,n=t.idioms;this.titleTxt.text="恭喜通过第 "+t.level_id+" 关",e.distance?(this.lvlTxt1.text="第"+e.level+"关",this.levelTxt.text="还差"+e.distance+"关解锁新"+ConstUtil.getNameByTypeId(e.reward_type),this.showNextImg(e.reward_type,e.reward_level,this.lvlImg1)):(this.levelTxt.text="",this.lvlTxt1.text=""),i.distance?(this.lvlTxt2.text="第"+i.level+"关",this.showNextImg(i.reward_type,i.reward_level,this.lvlImg2)):this.lvlTxt2.text="",e.distance||i.distance?this.proGrp.visible=!0:this.proGrp.visible=!1;for(var a=(this.itemList.length,n.length),s=0;a>s;s++){var r=this.itemList[s];r.idiom_name=n[s].idiom,r.getChildAt(1).text=""+n[s].idiom,this.container.addChild(r)}}},e.prototype.showNextImg=function(t,e,i){var n=ConstUtil.getUrlByTypeId(t,e),a=!1;t==ConstUtil.TYPE_ID_RED_GIFT?(i.source="redeff_json.redbag",i.width=i.texture.textureWidth,i.height=i.texture.textureHeight,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.scaleY=50/i.height,i.scaleX=i.scaleY,a=!0):t==ConstUtil.TYPE_ID_BEAST_GIFT&&(i.source="redeff_json.redbag",i.width=i.texture.textureWidth,i.height=i.texture.textureHeight,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.scaleY=50/i.height,i.scaleX=i.scaleY,a=!0),a||GameUtil.getDynamicImage(n).then(function(t){i.source=t,i.width=t.width,i.height=t.height,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2;var e=90/i.width,n=50/i.height,a=n>e?e:n;i.scaleX=a,i.scaleY=a})},e.prototype.createList=function(){for(var t=[],e=0;18>e;e++){var i=this.createItem(e);i.x=e%3*172+2,i.y=62*~~(e/3)+5,t.push(i)}this.itemList=t},e.prototype.createItem=function(t){var e=new eui.Group,i=new eui.Image("menuover_json.explainitembg");e.addChild(i);var n=new eui.Label("纸上谈兵");return n.size=28,n.textColor=12820348,n.x=46,n.y=17,e.touchEnabled=!0,e.touchChildren=!1,e.name="group_"+t,e.addChild(n),e},e}(eui.Component);__reflect(OverItem.prototype,"OverItem",["eui.UIComponent","egret.DisplayObject"]);var PictureItem=function(t){function e(){var e=t.call(this)||this;return e.isCreated=!1,e.skinName="resource/game_skins/PictureItem.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.isCreated=!0,this.maskShape.visible=!1,this.cacheAsBitmap=!0,this.touchEnabled=!0,this.touchChildren=!1,this.titleLabel.fontFamily="xnumberMedium",this.setData(this._data)},e.prototype.isHaveOwned=function(){var t=this._data;return t.level<=t.gamelvl},Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),e.prototype.setData=function(t){var e=this;if(this._data=t,this.isCreated&&t)if(this.avatarImg.visible=!1,GameUtil.getDynamicImage(t.path).then(function(i){e.avatarImg.visible=!0,e.avatarImg.source=i,e.avatarImg.anchorOffsetX=e.avatarImg.width/2,e.avatarImg.anchorOffsetY=e.avatarImg.height/2;var n=160/e.avatarImg.width,a=160/e.avatarImg.height,s=n>a?a:n;if(e.avatarImg.scaleX=s,e.avatarImg.scaleY=s,!t.locklvl&&t.exp>=0){GameModel.instance().userData.character.exp;t.level<=t.gamelvl?(e.maskShape.mask=null,e.maskShape.visible=!1):(e.maskShape.visible=!0,e.maskShape.mask=e.avatarImg)}else t.level>t.gamelvl?(e.maskShape.visible=!0,e.maskShape.mask=e.avatarImg):(e.maskShape.mask=null,e.maskShape.visible=!1)}),!t.locklvl&&t.exp>=0){GameModel.instance().userData.character.exp;this.titleLabel.text=t.level<=t.gamelvl?""+t.label:t.exp+"阅历值解锁"}else this.titleLabel.text=t.level<=t.gamelvl?"LV."+t.level:t.locklvl+"关解锁"},e}(eui.Component);__reflect(PictureItem.prototype,"PictureItem",["eui.UIComponent","egret.DisplayObject"]);var RankItemRenderer=function(t){function e(){var e=t.call(this)||this;return e.isCreated=!1,e._ranklvl=0,e._mode=0,e.skinName="resource/game_skins/RankItemRenderer.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.isCreated=!0,this.headImg.mask=this.maskRect,this.ranklvl=this._ranklvl,this.cacheAsBitmap=!0,this.touchEnabled=!1,this.touchChildren=!1,this.rankTxt.fontFamily="xnumberBold",this.levelTxt.fontFamily="xnumberBold",this.coinTxt.fontFamily="xnumberBold",this._mode&&(this.nameTxt.textColor=7618844,this.rankTxt.textColor=14722640,this.levelTxt.textColor=16347195,this.coinTxt.textColor=266380880)},Object.defineProperty(e.prototype,"ranklvl",{set:function(t){this._ranklvl=t,this.isCreated&&(this.rankTxt.size=40,3>=t?(this.rankImg.source=RES.getRes("viewpage_json.rank_"+t),this.rankImg.visible=!0,this.rankTxt.visible=!1):(this.rankTxt.text=""+t,this.rankImg.visible=!1,this.rankTxt.visible=!0),1==this._mode&&0==t&&(this.rankImg.visible=!1,this.rankTxt.visible=!0,this.rankTxt.text="未上榜",this.rankTxt.size=28))},enumerable:!0,configurable:!0}),e.prototype.setOwnMode=function(t){void 0===t&&(t=0),this._mode=t},e.prototype.dataChanged=function(){this.refresh()},e.prototype.refresh=function(){var t=this,e=this.data;this.currentState=e.status,this.ranklvl=e.rank,this.nameTxt.text=e.nickname,this.levelTxt.text="第"+e.level_id+"关",this.coinTxt.text=e.gold,GameUtil.getHeadIconByUrl(e.figureurl).then(function(e){t.headImg.texture=e}),1==this._mode&&(0==e.gold?(this.coinTxt.text="",this.coinImg.visible=!1):(this.coinTxt.text=e.gold,this.coinImg.visible=!0))},e}(eui.ItemRenderer);__reflect(RankItemRenderer.prototype,"RankItemRenderer",["eui.UIComponent","egret.DisplayObject"]);var RobotITipItem=function(t){function e(){var e=t.call(this)||this;return e.isCreated=!1,e.jumpAction=0,e.skinName="resource/game_skins/RobotITipItem.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.isCreated=!0,this.goStartBtn.name="justfortreedialog",this._data&&this.refresh(this._data),this.goStartBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){GameSound.instance().playSound("btn"),1==this.jumpAction?EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_START_EVENT)):2==this.jumpAction?GuessModel.instance().startGuessGame():3==this.jumpAction?GameView.instance().showJudgeStartView():4==this.jumpAction?AppCenter.openPage("h5",GameData.H5_URL_HOST+"lottery.html",!1,!1,!1):5==this.jumpAction?AppCenter.openPage("h5",GameData.H5_URL_HOST+"fenhong.html",!1,!1,!1):6==this.jumpAction?GameView.instance().showMissionView():7==this.jumpAction?EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.SHOW_TREE_GET_DIALOG_EVENT)):8==this.jumpAction&&GameModel.instance().getAccountInfo().then(function(t){0==t.mIntCurPlatform?AppCenter.openPage("bindPhone",""):AppCenter.inviteFriend()}),this.jumpAction>0&&AppCenter.uploadActivityLog("1010054","click","page","",this.jumpAction+""),this.close()},e.prototype.refresh=function(t){this._data=t,this.isCreated&&(this.jumpAction=t.jump,this.tipTxt.text=t.msg,AppCenter.uploadActivityLog("1010054","show","page","",this.jumpAction+""))},e.prototype.close=function(){this.jumpAction=0,this.parent&&this.parent.removeChild(this)},e}(eui.Component);__reflect(RobotITipItem.prototype,"RobotITipItem",["eui.UIComponent","egret.DisplayObject"]);var SignItem=function(t){function e(){var e=t.call(this)||this;return e.isCreated=!1,e.skinName="resource/game_skins/SignItem.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.isCreated||this.signImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.isCreated=!0,this.cointTxt.fontFamily="xnumberBold",this.mc=SpriteUtil.createMovieClip("qdsp"),this.mc.x=this.signImg.x,this.mc.y=this.signImg.y,this.addChild(this.mc),this.mc.touchEnabled=!0,this.mc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.setData(this._data)},e.prototype.touchHandler=function(t){var e=this;this._data&&!this._data.isDb&&(AppCenter.uploadActivityLog("1030024","click","entry","signin"),AppCenter.showVideoAd("rewardvideoch").then(function(){HttpServer.getSignDoubleNow(0).then(function(t){GameModel.instance().updateCoinNum(t.bonus);var i=GameModel.instance().totalCoin;EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MENU_INFO)),AppCenter.showAdDialog(3,t.bonus,i,"bigcheckin"),e._data.isDb=!0,e.setData(e._data),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_SIGN_VIDEO_EVENT))})}))},e.prototype.setData=function(t){if(t&&(this._data=t,this.isCreated)){this.cointTxt.text="+"+this._data.coin,this.boxGrp.visible=7==t.index,this.timeTxt.text=t.index+"天",this.timeTxt.textColor=9982720,this.cointTxt.alpha=1;var e=this._data.is_sign;this.signImg.visible=!0,this.mc.visible=!1,this.mc.stop(),0==e?(this.signImg.source="menuover_json.coin",this.signImg.width=50,this.signImg.height=51):1==e?(this.signImg.source="menuover_json.coin",this.signImg.width=50,this.signImg.height=51):2==e&&(t.isDb?(this.signImg.source="viewpage_json.right",this.cointTxt.alpha=.5):(this.signImg.visible=!1,this.mc.visible=!0,this.mc.play(-1)),this.timeTxt.text="已签",this.timeTxt.textColor=13605958),7==t.index&&(2==e&&t.isDb?(this.signImg.source="viewpage_json.right",this.cointTxt.alpha=.5):2==e?(this.signImg.visible=!1,this.mc.visible=!0,this.mc.play(-1)):(this.signImg.source="menuover_json.goodbox",this.signImg.width=62,this.signImg.height=51)),this.signImg.anchorOffsetX=this.signImg.width/2,this.signImg.anchorOffsetY=this.signImg.height/2}},e}(eui.Component);__reflect(SignItem.prototype,"SignItem",["eui.UIComponent","egret.DisplayObject"]);var SoundDialog=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/SoundDialog.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.radioBtn1.selected=GameSound.instance().isPlayMusic,this.radioBtn2.selected=GameSound.instance().isPlaySound,this.radioBtn1.addEventListener(eui.UIEvent.CHANGE,this.changeHandler,this),this.radioBtn2.addEventListener(eui.UIEvent.CHANGE,this.changeHandler,this),this.cacheAsBitmap=!0},e.prototype.changeHandler=function(t){!GameSound.instance().isPlayMusic&&this.radioBtn1.selected&&(AppCenter.uploadActivityLog("1010009","click","page","","1"),GameSound.instance().isPlayMusic=this.radioBtn1.selected),GameSound.instance().isPlayMusic&&!this.radioBtn1.selected&&(AppCenter.uploadActivityLog("1010009","click","page","","0"),GameSound.instance().isPlayMusic=this.radioBtn1.selected),!GameSound.instance().isPlaySound&&this.radioBtn2.selected&&(AppCenter.uploadActivityLog("1010010","click","page","1"),GameSound.instance().isPlaySound=this.radioBtn2.selected),GameSound.instance().isPlaySound&&!this.radioBtn2.selected&&(AppCenter.uploadActivityLog("1010010","click","page","0"),GameSound.instance().isPlaySound=this.radioBtn2.selected)},e}(eui.Component);__reflect(SoundDialog.prototype,"SoundDialog",["eui.UIComponent","egret.DisplayObject"]);var StartItem=function(t){function e(){var e=t.call(this)||this;return e.isCreated=!1,e.skinName="resource/game_skins/StartItem.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.isCreated||(this.cacheAsBitmap=!0,this.btnLvlUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)),this.lockTxt1.fontFamily="xnumberBold",this.lockTxt2.fontFamily="xnumberMedium",this.cashGrp.visible=!1,this.cacheAsBitmap=!0,this.isCreated=!0,this.startGrp.visible=!1,this.refresh()},e.prototype.touchHandler=function(t){var e=this;if(GameSound.instance().playSound("btn"),t.target==this.btnLvlUp){AppCenter.uploadActivityLog("1010012","click","page");var i=GameModel.instance().userData,n=i.character,a=parseInt(i.unlock_video);a>0?AppCenter.showVideoAd("rewardvideoxjsj").then(function(){i.unlock?GameModel.instance().getLevelUpInfo():n.unlock&&GameModel.instance().getLevelUpCharacter(),e.btnLvlUp.visible=!1}):(i.unlock?GameModel.instance().getLevelUpInfo():n.unlock&&GameModel.instance().getLevelUpCharacter(),this.btnLvlUp.visible=!1)}},e.prototype.getGlobalLifePt=function(){return this.gpt||(this.gpt=this.lifeImg.parent.localToGlobal(this.lifeImg.x,this.lifeImg.y)),this.gpt},e.prototype.refresh=function(){if(this.isCreated){for(var t=GameModel.instance().userData,e=t.reward,i=t.character,n=GameModel.instance().totalCoin,a=t.cash_items,s=1e4,r=0;r<a.length;r++)if(n<a[r]){s=a[r];break}e.distance?this.lockTxt1.textFlow=[{text:"还差"},{text:""+e.distance,style:{textColor:16723204}},{text:"关解锁新"+ConstUtil.getNameByTypeId(e.reward_type)}]:this.lockTxt1.text="",this.lockTxt2.text="距离"+s/1e4+"元提现额度还差"+(s-n),t.unlock||i.unlock?(this.lockTxt1.visible=!1,this.btnLvlUp.visible=!0,GameUtil.playBreathAnim(this.btnLvlUp,{scaleX:1.15,scaleY:1.15},{scaleX:1,scaleY:1},300),AppCenter.uploadActivityLog("1010012","show","page")):(this.btnLvlUp.alpha=1,egret.Tween.removeTweens(this.btnLvlUp),this.lockTxt1.visible=!0,this.btnLvlUp.visible=!1);var o=parseInt(t.unlock_video);o>0?this.videoBtn.visible=!0:this.videoBtn.visible=!1,GameData.isVerifyMode()&&(this.lockTxt1.text="",this.btnLvlUp.visible=!1)}},e}(eui.Component);__reflect(StartItem.prototype,"StartItem",["eui.UIComponent","egret.DisplayObject"]);var TreeGetDialog=function(t){function e(){var e=t.call(this)||this;return e.isCreated=!1,e._isOpened=!1,e.skinName="resource/game_skins/TreeGetDialog.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.isCreated=!0,this.getBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.getBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.dicemc=SpriteUtil.createMovieClip("dicemc","mc",!1),this.dicemc.x=68,this.dicemc.y=40,this.dicemc.play(-1),this.dicemc.scaleX=.5,this.dicemc.scaleY=.5,this.addChild(this.dicemc)
},e.prototype.touchHandler=function(t){var e=this;GameSound.instance().playSound("btn"),t.target==this.getBtn1?(AppCenter.uploadActivityLog("1010041","click","page","","1"),AppCenter.showVideoAd("rewardvideotree").then(function(){HttpServer.getMoneyTreeData(0,1).then(function(t){GameModel.instance().updateCoinNum(t.gold),GameModel.instance().userData.tree=t.tree,GameModel.instance().getAccountInfo().then(function(i){if(1==i.have_invited){var n=new GodBeastView;n.open(4,t)}else e.showHelpTip(),GameUtil.showCoinTips("恭喜获得"+t.times+"倍奖励","+"+t.gold+"金币")}),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MENU_INFO))})}),this.close()):t.target==this.getBtn2&&(AppCenter.uploadActivityLog("1010041","click","page","","2"),HttpServer.getMoneyTreeData().then(function(t){GameModel.instance().updateCoinNum(t.gold),GameModel.instance().userData.tree=t.tree,AppCenter.showAdDialog(1,t.gold,GameModel.instance().totalCoin,"bigtree"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MENU_INFO)),e.showHelpTip()}),this.close())},e.prototype.showHelpTip=function(){AppCenter.nativeCache(ConstUtil.CACHE_MONETYTREE_TIP,"2").then(function(t){if(t&&t.value||(t={value:0}),!t.value){var e=new EqualView;e.open(),AppCenter.nativeCache(ConstUtil.CACHE_MONETYTREE_TIP,"1","1")}})},e.prototype.refresh=function(){this.isCreated&&(this.leftTxt.textFlow=[{text:"今日剩余领取次数："},{text:""+GameModel.instance().userData.tree.tree_chance,style:{textColor:16734772,fontFamily:"xnumberBold"}}])},Object.defineProperty(e.prototype,"isOpened",{get:function(){return this._isOpened},enumerable:!0,configurable:!0}),e.prototype.open=function(){this._isOpened=!0,AppCenter.uploadActivityLog("1010041","show","page"),egret.Tween.removeTweens(this),this.scaleX=0,this.scaleY=0,egret.Tween.get(this).to({scaleX:1,scaleY:1},150),this.refresh()},e.prototype.close=function(){var t=this;this._isOpened=!1,AppCenter.uploadActivityLog("1010041","close","page"),egret.Tween.removeTweens(this),egret.Tween.get(this).to({scaleX:0,scaleY:0},150).call(function(){t.parent&&t.parent.removeChild(t)})},e}(eui.Component);__reflect(TreeGetDialog.prototype,"TreeGetDialog",["eui.UIComponent","egret.DisplayObject"]);var WordItem=function(t){function e(){var e=t.call(this)||this;return e._selected=!1,e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=SpriteUtil.createImage("idiomcene_json#rect0");this.addChild(t),this.wordImg=t,this.selectMc=SpriteUtil.createMovieClip("selectedeff"),this.addChild(this.selectMc);var e=SpriteUtil.createText("毴",54,0,"left");e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,this.addChild(e),this.wordTxt=e,this.touchChildren=!1,this.touchEnabled=!0,this.cacheAsBitmap=!0,this._wordVo=new WordVO},Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.setWord=function(t,e){void 0===t&&(t=""),void 0===e&&(e=this._wordVo.status),this._wordVo.status=e,this._wordVo.current=t,this.refresh()},e.prototype.complete=function(){this._wordVo.status=ConstUtil.STATUS_COMPLETED,GameUtil.playBreathAnim(this,{scaleX:1,scaleY:1},{scaleX:1.2,scaleY:1.2},200,1),this.refresh()},Object.defineProperty(e.prototype,"wordVo",{get:function(){return this._wordVo},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){var t=this._wordVo.status;this.wordTxt.text=this._wordVo.current,this.wordTxt.textColor=2236962;var e="idiomcene_json#rect0";this.visible=!0,t==ConstUtil.STATUS_BLANK?(e="idiomcene_json#rect0",this.visible=!1):t==ConstUtil.STATUS_STATIC?e="idiomcene_json#rect2":t==ConstUtil.STATUS_NORMAL?e=""==this.wordVo.current?"idiomcene_json#rect1":"idiomcene_json#rect2":t==ConstUtil.STATUS_WRONG?(e="idiomcene_json#rect3",this.wordTxt.textColor=11476253):t==ConstUtil.STATUS_CHECKED?e="idiomcene_json#rect3":t==ConstUtil.STATUS_COMPLETED?(e="idiomcene_json#rect4",this.wordTxt.textColor=16777215):t==ConstUtil.STATUS_PUZZLE&&(this.wordTxt.text="",e="puzzle_json#rect6"),this._selected?(this.selectMc.gotoAndPlay(1,-1),this.selectMc.visible=!0):(this.selectMc.stop(),this.selectMc.visible=!1),this.wordImg.texture=RES.getRes(e)},e.prototype.reset=function(){this._wordVo.reset(),this.refresh()},e}(egret.Sprite);__reflect(WordItem.prototype,"WordItem");var AppCenter=function(){function t(){}return t.sendNativeRequest=function(e,i,n,a,s,r){return void 0===n&&(n=""),void 0===a&&(a=!0),void 0===s&&(s=!0),void 0===r&&(r="encrypt_type_php"),new Promise(function(o,l){i.lt="__lt__",AppUtil.sendNativeRequest(e,i,function(i){return console.log("--------------"+e+"--------------"),console.log(i),i?void(0==i.code?o(i.data):-1001==i.code?(t.goToViewLogin(),l("token error")):(s&&t.showToast(i.message),l())):(s&&t.showToast("网络异常"),void l())},n,a,r)})},t.sendNakedRequest=function(e,i,n,a,s){return void 0===n&&(n=!0),void 0===a&&(a=""),void 0===s&&(s=!0),new Promise(function(s,r){AppUtil.sendNakedRequest(function(i){return console.log("----------"+e+"----------"),i?void(i?s(i):(t.showToast(i.msg),r())):(t.showToast("网络异常"),console.log(e+"网络异常"),void r())},e,i,a,n)})},t.openPage=function(t,e,i,n,a,s){void 0===i&&(i=!0),void 0===n&&(n=!1),void 0===a&&(a=!0),void 0===s&&(s=!1);var r={url:e,pageName:t,showNavBar:i,showTransition:n,useDefaultBack:a,banSystemBack:s};AppUtil.sendNativeMethod("openPage",r)},t.getParameters=function(t){var e=this;return void 0===t&&(t=null),new Promise(function(t,i){AppUtil.sendNativeMethod("getCommonParams","",function(e){console.log(e),GameData.isLocal=!1,GameData.baseData=e,GameData.ipxHgt=e.topinset?parseInt(e.topinset):0,1==e.isPad&&(egret.MainContext.instance.stage.scaleMode=egret.StageScaleMode.FIXED_NARROW),GameData.setIP(),t()},function(){GameData.isLocal=!0,e.runLocalGame(),GameData.setIP(),t()})})},t.goToViewLogin=function(){AppUtil.sendNativeMethod("goToViewLogin")},t.exitGamePage=function(){AppUtil.sendNativeMethod("goback")},t.getAccountInfo=function(){return new Promise(function(t,e){AppUtil.sendNativeMethod("getAccountInfo","",function(e){console.log("getAccountInfo",e),t(e)})})},t.loadProgress=function(t){return void 0===t&&(t=0),GameData.isLocal?void this.runLocalGame():void AppUtil.sendNativeMethod("loadProgress",{progress:t})},t.showNetError=function(){return GameData.isLocal?void Game.instance().addTop(new ErrorView):void AppUtil.sendNativeMethod("showNetError")},t.fetchOrUpdateCoins=function(t,e){return void 0===t&&(t="2"),void 0===e&&(e=0),new Promise(function(i,n){return GameData.isLocal?void i(200):void AppUtil.sendNativeMethod("fetchOrUpdateCoins",{action:t,incrementCoins:e},function(t){i(parseInt(t.coin))})})},t.getTinkerPatchTime=function(){GameData.isLocal||AppUtil.sendNativeMethod("getTinkerPatchTime","",function(t){console.log(t)})},t.getPollingData=function(){return new Promise(function(t,e){if(GameData.isLocal){var i={million_answers:{onoff:!0}};return void t(i)}AppUtil.sendNativeMethod("getPollingData","",function(e){console.log("getPollingData",e),t(e)})})},t.showVisitorDialog=function(){GameData.isLocal||(console.log("^^^^^^showVisitorDialog"),AppUtil.sendNativeMethod("showVisitorDialog"))},t.showFirstRewardWaringDialog=function(){GameData.isLocal||(console.log("^^^^^^showFirstRewardWaringDialog"),AppUtil.sendNativeMethod("showFirstRewardWaringDialog"))},t.showFirstRewardDialog=function(){GameData.isLocal||(console.log("^^^^^^showFirstRewardDialog"),t.nativeCache(ConstUtil.VISITOR_REWARD_RESULT_CACHE,"2").then(function(e){var i=JSON.parse(e.value);console.log("showFirstRewardDialog - nativeCache : "+e.value),console.log(i),0==i.second.status&&0==i.second.needShow?t.showFirstRewardWaringDialog():t.showVisitorDialog()}))},t.inviteFriend=function(t,e,i){void 0===t&&(t="104"),void 0===e&&(e="ccyyaoqing1"),void 0===i&&(i="weChat"),GameData.isLocal||AppUtil.sendNativeMethod("inviteFriend",{from:t,qid:e,platform:i})},t.invitePK=function(e,i,n,a,s){void 0===i&&(i=""),void 0===n&&(n=""),void 0===a&&(a="123"),void 0===s&&(s="ccyyaoqing4"),GameData.isLocal||GameModel.instance().getAccountInfo().then(function(r){0==r.mIntCurPlatform?t.openPage("bindPhone",""):AppUtil.sendNativeMethod("invitePK",{pkData:e,title:i,description:n,from:a,qid:s})})},t.getInvitePKData=function(){return new Promise(function(t,e){if(GameData.isLocal){var i={pkData:"cccc$$ddd"};return void t(i)}AppUtil.sendNativeMethod("getInvitePKData","",function(e){t(e)})})},t.getIsNotificationEnabled=function(){return new Promise(function(t,e){return GameData.isLocal?void t({notificationEnable:!0}):void AppUtil.sendNativeMethod("isNotificationEnabled","",function(e){console.log("----isNotificationEnabled---"),console.log(e),t(e)})})},t.openPermissionSetting=function(){GameData.isLocal||AppUtil.sendNativeMethod("openPermissionSetting")},t.openSignNotfSetting=function(){return GameData.isLocal?void 0:new Promise(function(t,e){AppUtil.sendNativeMethod("addCalendar","",function(e){t(e)})})},t.nativeCache=function(t,e,i){if(void 0===e&&(e="2"),void 0===i&&(i=""),GameData.isLocal){var n=null;return"1"==e?egret.localStorage.setItem(t,i):"2"==e?(i=egret.localStorage.getItem(t),n={value:i}):"3"==e&&egret.localStorage.removeItem(t),new Promise(function(t,i){t("2"==e?n:"")})}var a={action:e,key:t,value:i};return new Promise(function(t,i){AppUtil.sendNativeMethod("nativeCache",a,function(i){t("2"==e?i:"")})})},t.uploadActivityLog=function(t,e,i,n,a,s){void 0===n&&(n=""),void 0===a&&(a=""),void 0===s&&(s="");var r={actentryid:t,type:e,entrytype:i,actid:n,materialid:a,subactid:s};AppUtil.sendNativeMethod("uploadActivityLog",r),console.log("uploadActivityLog",t,e,i,n,a,s)},t.showTeachDialog=function(){GameData.isLocal?GameUtil.showTips("怎么玩"):AppUtil.sendNativeMethod("showTeachDialog")},t.showToast=function(t){t&&(GameData.isLocal?GameUtil.showTips(t):AppUtil.sendNativeMethod("alert",{msg:t}))},t.playIosMusic=function(t){void 0===t&&(t=""),AppUtil.sendNativeMethod("playMusic",{fileName:t})},t.stopIosMusic=function(){AppUtil.sendNativeMethod("stopMusic")},t.playIosSound=function(t){void 0===t&&(t=""),AppUtil.sendNativeMethod("playSound",{fileName:t})},t.getSplashStatus=function(){return new Promise(function(t,e){AppUtil.sendNativeMethod("splashStatus","",function(i){0==i.code?t():e()})})},t.changeStatusBarTextColor=function(t){void 0===t&&(t=1),AppUtil.sendNativeMethod("changeStatusBarTextColor",{type:t})},t.getBase64Img=function(t){return new Promise(function(e,i){return t?void(GameData.isLocal?e({img:"cc"}):AppUtil.sendNativeMethod("getBase64Img",{url:t},function(t){e(t)})):void i()})},t.showVideoAd=function(e){var i=this;return new Promise(function(n,a){if(GameData.isVerifyMode())return void a();if(GameData.isLocal)return void n();var s=(new Date).getTime();return s-i.midTime<1e3?void a():(i.midTime=s,void AppUtil.sendNativeMethod("excitationVideo",{type:e},function(e){e&&e.hasOwnProperty("code")&&0==e.code?n():(t.showToast("视频不见了~"),a())}))})},t.showAdDialog=function(t,e,i,n,a,s,r){if(void 0===a&&(a=""),void 0===s&&(s=""),void 0===r&&(r=0),!GameData.isVerifyMode()){var o=(i/1e4).toFixed(2);return""==s&&(s=2==t?"金币翻倍x2":""),new Promise(function(l,h){AppUtil.sendNativeMethod("excitationDialog",{type:t,gold:e,total:o,total_coin:i,position:n,title:a,text:s,iconType:r},function(t){l(t)})})}},t.showSignAd=function(t,e){if(!GameData.isVerifyMode()){var i="2",n=GameModel.instance().totalCoin,a=(n/1e4).toFixed(2),s="bigcheckin",r="恭喜获得签到奖励"+t+"金币",o="",l=0;return new Promise(function(h,c){AppUtil.sendNativeMethod("excitationDialog",{type:i,gold:t,total:a,total_coin:n,position:s,title:r,text:o,iconType:l,multi:e},function(t){h(t)})})}},t.showBanner=function(t){return void 0===t&&(t="smallgame"),GameData.isVerifyMode()?void 0:new Promise(function(e,i){AppUtil.sendNativeMethod("showBanner",{position:t},function(t){e(t)})})},t.hideBanner=function(){AppUtil.sendNativeMethod("hideBanner")},t.showPassGameView=function(t,e){void 0===t&&(t="biggame"),void 0===e&&(e=(766+GameData.ipxHgt)/SpriteUtil.stageHeight),GameData.isVerifyMode()||Math.random()>.5||AppUtil.sendNativeMethod("showPassGameView",{contentEnd:e,position:t})},t.hidePassGameView=function(){AppUtil.sendNativeMethod("hidePassGameView")},t.runLocalGame=function(){GameData.baseData={ime:"860209042909016",appqid:"xiaomi181113",appcqid:"huawei",deviceid:"1d58795af05cb928",accid:"1000006349",apptypeid:"DFTT",ver:"2.3.6",softname:"DFTTAndroid",softtype:"TouTiao",os:"Android8.1.0",position:"上海",network:"wifi",androidId:"1d58795af05cb928",istourists:"0",logintype:"1",is_share_install:"-1",mIntCurPlatform:0,isVerifyCode:1,isDebug:1,login_token:"dHZWQnlHOUlzVUwvOUpFU1J0bnprMUZmTk9aa0JLMWJUaG00MW12elJYQThYbm1UOERESmE5bXA1dURxcTBONEwrNll5d3RTMVZOVmF6WE5xejY1Q0cvajRPVko3RzFqTE9NNndudnJraldyN2s3ZW5LQmZId2RLQ0UyNWRLMUxrb3N4VDVUUkJTdkdoY2M4OEUrMHE4OS9qTGt2L0ZZN0pUYUZDK3hRTnIwPQ==",shortVideo:"1"}},t.midTime=0,t}();__reflect(AppCenter.prototype,"AppCenter");var AppUtil=function(){function t(){}return t.isAndroidOrIos=function(){if(this.terminalType>-1)return this.terminalType;var t=navigator.userAgent,e=0;return t.indexOf("Android")>-1||t.indexOf("Adr")>-1?e=1:t.indexOf("iPhone")>-1?e=2:t.indexOf("iPad")>-1&&(e=3),console.log("平台类型",navigator.platform,"浏览器类型:",e),this.terminalType=e,e},t.isIphoneX=function(){var t=navigator.userAgent,e=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);t.search("iPhone X")>=0;return e?812==screen.height&&375==screen.width?!0:!1:void 0},t.isLeShiPhone=function(){var t=navigator.userAgent,e=!!t.match(/(Le|Letv) X(\d)+/);return e?!0:!1},t.isHuaWeiChannel=function(){var t=GameData.baseData,e=t.appcqid;return e&&e.search("huaweinew")>=0?!0:!1},t.clientRequest=function(t){if("object"!=typeof t)throw"参数不正确,请使用 json 格式参数";var e=t.callback,i=t.failback,n="idiomgame"+Math.random().toString().slice(2),a="idiomgamefailback";t.callback=n,t.failback=a,window[n]=function(t){e&&e(t),window[n]=null},window[a]=function(t){console.log("----fail--------"),console.log(t),i&&i(t),window[a]=null};var s=this.isAndroidOrIos();1==s?window.JSToNative?window.JSToNative.postMessage(JSON.stringify(t)):i&&i():2==s&&window.webkit?window.webkit.messageHandlers.JSToNative_iOS.postMessage(t):i&&i()},t.addNativeExternalCallback=function(){window.sendToJsCallBack=function(e){var i=egret.Base64Util.decode(e),n=new Blob([i]),a=new FileReader,s=function(e){s=null;var i=JSON.parse(e.target.result);console.log("ccc"),console.log(i),t.executeGlobalFunc(i.method,i.params)||i&&i.method&&(t.nativeCallBackVec[i.method]&&t.nativeCallBackVec[i.method](i.params),delete t.nativeCallBackVec[i.method])};a.onload=s,a.readAsText(n,"utf-8")},egret.ExternalInterface.addCallback("sendToJS",window.sendToJsCallBack)},t.executeGlobalFunc=function(t,e){var i=!0;switch(t){case"updateFKCCYCoin":GameModel.instance().getTotalCoin();break;case"viewDidDisAppear":GameSound.instance().isCanPlay=!1,EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.HIDE_STATICS_GAME_EVENT)),EventCenter.instance().dispatchEvent(new GuessEvent(GuessEvent.GUESS_HIDE_STATICS_EVENT));break;case"viewDidAppear":GameSound.instance().isCanPlay=!0,GameModel.instance().getTotalCoin(),HttpServer.updateMissionTipsData(),GameModel.instance().getBubbleInfo(),GameModel.instance().getAccountInfo(!0).then(function(){EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MENU_INFO))}),GameModel.instance().getExperienceBeast(!0);break;case"userSignNow":HttpServer.getSignNow().then(function(t){GameModel.instance().updateCoinNum(t.bonus),HttpServer.getSignMulti().then(function(e){AppCenter.showSignAd(t.bonus,e.multi).then(function(){AppCenter.showVideoAd("rewardvideoch").then(function(){HttpServer.getSignDoubleNow(e.multi).then(function(t){GameModel.instance().updateCoinNum(t.bonus),AppCenter.showAdDialog("3",t.bonus,GameModel.instance().totalCoin,"bigcheckin")})})})})});break;case"gotoSceneByType":if(!e||"string"!=typeof e)break;var n=JSON.parse(e);if(!n||!n.type)break;var a=n.type;"game"==a?EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_START_EVENT)):"picture"==a&&GuessModel.instance().startGuessGame();break;case"checkVisitorRewardResult":console.log("^^^^^ checkVisitorRewardResult"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.CHECK_NEW_USER_REDPACK_EVENT));break;case"onUnbindThirdParty":console.log("^^^^^ onUnbindThirdParty"),GameModel.instance().getAccountInfo(!0).then(function(){EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MENU_INFO))});break;case"socketData":SocketCenter.instance().socketDataHandler(e);break;case"socketStatus":SocketCenter.instance().socketFailHandler(e);break;case"pkUserIsComming":GameData.isPlaying||GameUtil.checkInvitePK();break;default:i=!1}return i},t.callNativeExternalCallback=function(t){var e=""+t.method+Math.random().toString().slice(2);this.nativeCallBackVec[e]=t.callback;var i={method:t.method,params:t.params,callback:e};egret.ExternalInterface.call("sendToNative",JSON.stringify(i))},t.sendNativeMethod=function(t,e,i,n){void 0===e&&(e="");var a={method:t,params:e,callback:i,failback:n},s=this.isAndroidOrIos();2==s||3==s?this.callNativeExternalCallback(a):this.clientRequest(a)},t.sendNativeRequest=function(t,e,i,n,a,s){var r=n?n:GameData.IP,o={method:"commonRequest",params:{url:r+t,needDecrypt:a,decryptType:s,data:e},callback:i},l=this.isAndroidOrIos();2==l||3==l?this.callNativeExternalCallback(o):this.clientRequest(o)},t.sendNakedRequest=function(t,e,i,n,a){void 0===n&&(n=""),void 0===a&&(a=!0);var s=n?n:GameData.IP_MILLION_ACTIVITY,r={method:"request",params:{url:s+e,data:i,postRequest:a},callback:t},o=this.isAndroidOrIos();2==o||3==o?this.callNativeExternalCallback(r):this.clientRequest(r)},t.nativeCallBackVec={},t.terminalType=-1,t}();__reflect(AppUtil.prototype,"AppUtil");var ConfigVO=function(){function t(){this.start=0,this.direction=0,this.content="",this.blank=[1,2,3,4]}return t.prototype.setData=function(t){this.start=t.start-1||0,this.direction=t.direction,this.content=t.content,this.blank=t.blank},t.prototype.reset=function(){this.direction=0,this.content="",this.blank=[]},t}();__reflect(ConfigVO.prototype,"ConfigVO");var GameData=function(){function t(){}return t.isVerifyMode=function(){return 0==t.baseData.isVerifyCode},t.setIP=function(){t.baseData.isDebug==ConstUtil.TEST_ENV?(t.IP="http://test-game.crazyccy.com/",t.IP_SIGN="http://test-sign.crazyccy.com/",t.IP_MISSION="http://test-task.crazyccy.com/",t.IP_INVITE="http://test-y.crazyccy.com/",t.IP_MILLION_ACTIVITY="http://49.232.45.133/",t.IP_STATISTICS="http://test-gamelogs.crazyccy.com/",t.H5_URL_HOST="http://h5.crazyccy.com/apph5__test/",t.IP_MESSAGE="http://test-message.crazyccy.com/index/",t.IP_PK_PORT="http://62.234.69.202/",t.IP_HUNDRED="http://test-money-activity.crazyccy.com/",egret.Logger.logLevel=egret.Logger.ALL):(t.IP="https://game.crazyccy.com/",t.IP_SIGN="https://sign.crazyccy.com/",t.IP_MISSION="https://task.crazyccy.com/",t.IP_INVITE="https://y.crazyccy.com/",t.IP_MILLION_ACTIVITY="https://fight-milhero.crazyccy.com/",t.IP_STATISTICS="https://gamelogs.crazyccy.com/",t.H5_URL_HOST="https://h5.crazyccy.com/apph5/",t.IP_MESSAGE="https://message.crazyccy.com/index/",t.IP_PK_PORT="https://gateway-ccy.crazyccy.com/",t.IP_HUNDRED="https://money-activity.crazyccy.com/")},t.GAME_VERSION="1.1.1",t.isPlaying=!1,t.isLocal=!0,t.requestTimes=0,t.baseData={},t.statisticsData={},t.guessStaticsData={},t.ipxHgt=0,t.urlPath="",t.IP="",t.IP_SIGN="",t.IP_MISSION="",t.IP_MILLION_ACTIVITY="",t.IP_INVITE="",t.IP_STATISTICS="",t.H5_URL_HOST="",t.IP_MESSAGE="",t.IP_PK_PORT="",t.IP_HUNDRED="",t.IP_PUZZLE="",t}();__reflect(GameData.prototype,"GameData");var GameModel=function(){function t(){this._totalCoin=0,this.getTotalCoin()}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},Object.defineProperty(t.prototype,"accountInfo",{get:function(){return this._accountInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userData",{get:function(){return this._userData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"levelData",{get:function(){return this._levelData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"levelConfig",{get:function(){return this._levelConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"godBeastData",{get:function(){return this._godBeastData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inviteData",{get:function(){return this._inviteData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLevelPuzzle",{get:function(){return this._levelData.puzzle},enumerable:!0,configurable:!0}),t.prototype.getTotalCoin=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,AppCenter.fetchOrUpdateCoins()];case 1:return t=e.sent(),this._totalCoin=t,EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_HEAD_INFO_EVENT)),[2]}})})},Object.defineProperty(t.prototype,"totalCoin",{get:function(){return this._totalCoin},enumerable:!0,configurable:!0}),t.prototype.updateCoinNum=function(t){0!=t&&(this._totalCoin+=isNaN(parseInt(t))?0:parseInt(t),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_HEAD_INFO_EVENT)),AppCenter.fetchOrUpdateCoins("1",t))},t.prototype.getAccountInfo=function(t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return!t&&this._accountInfo?[3,2]:[4,AppCenter.getAccountInfo()];case 1:e=i.sent(),this._accountInfo=e,i.label=2;case 2:return[2,this._accountInfo]}})})},t.prototype.getPictureConfig=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return this._pictureConfig?[2,this._pictureConfig]:(t=this,[4,HttpServer.getPictureConfigData()]);case 1:return t._pictureConfig=e.sent(),[2,this._pictureConfig]}})})},t.prototype.setSelectItemNow=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return[4,HttpServer.getSetItemData(t)];case 1:return e=i.sent(),this._userData.home=e.home,[2]}})})},t.prototype.getUserInfo=function(t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return[4,HttpServer.getUserData()];case 1:return e=i.sent(),this._userData=e,t&&EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MENU_INFO)),[2]}})})},t.prototype.getAddLifeInfo=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n,a;return __generator(this,function(s){switch(s.label){case 0:return[4,HttpServer.getLifeData(t)];case 1:return e=s.sent(),i=this._userData.health.point,n=e.health.point,a=n-i,GameUtil.playLifeEffect(400,54,isNaN(a)?3:a),e.status&&(this._userData.health=e.health),[2,e]}})})},t.prototype.getLevelUpInfo=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n,a,s,r,o,l,h;return __generator(this,function(c){switch(c.label){case 0:return[4,HttpServer.getLevelUpData()];case 1:t=c.sent(),this._userData.unlock=t.unlock,this._userData.tree=t.tree,e=this._userData.home_unlock,i=t.home_unlock,this._userData.home=t.home,this._userData.home_unlock=i,this._userData.unlock_video=t.unlock_video,this.updateCoinNum(t.unlock_gold),n=0,a=0,s="",r=0,o=0;for(l in i)i[l]!=e[l]&&"label"!=l&&(n=e[l],a=i[l],s=l,"house"==l?r=ConstUtil.TYPE_ID_HOUSE:"car"==l?r=ConstUtil.TYPE_ID_CAR:"pet"==l?r=ConstUtil.TYPE_ID_PET:"tree"==l&&(r=ConstUtil.TYPE_ID_TREE),h=new GameEvent(GameEvent.LEVEL_UP_HOME_EVENT,{type:r,level:a,got_spirit:t.got_spirit,lvlupGold:t.unlock_gold}),EventCenter.instance().dispatchEvent(h));return HttpServer.statisticsHome(n,a,s),[2]}})})},t.prototype.getLevelUpCharacter=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n;return __generator(this,function(a){switch(a.label){case 0:return[4,HttpServer.getLevelUpAvatarData()];case 1:return t=a.sent(),e=t.character.unlock_level.level,this._userData.character=t.character,this._userData.unlock_video=t.unlock_video,i=t.unlock_gold,this.updateCoinNum(i),n=new GameEvent(GameEvent.LEVEL_UP_HOME_EVENT,{type:ConstUtil.TYPE_ID_CHARACTER,level:e,lvlupGold:i}),EventCenter.instance().dispatchEvent(n),[2]}})})},t.prototype.setSelectCharacterNow=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return[4,HttpServer.getSetCharacterData(t)];case 1:return e=i.sent(),this._userData.character=e.character,[2]}})})},t.prototype.getNextLevelInfo=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n,a;return __generator(this,function(s){switch(s.label){case 0:return GameData.statisticsData.upitemlevel="",GameData.statisticsData.bonus="",GameData.statisticsData.rewardlist="",[4,HttpServer.getNextLevelData()];case 1:if(t=s.sent(),!t.status)return[2,t];for(this._levelData=t,e=t.body,i=[],n=0;n<e.length;n++)a=new ConfigVO,a.setData(e[n]),i.push(a);return this._levelConfig=i,this._userData.health=t.health,1==t.mouse_notice&&t.level.id>1&&!GameData.isVerifyMode()&&GameView.instance().getCardView.open(0),GameData.statisticsData.rewardlist="box:"+t.level.chest_num,GameData.statisticsData.gameround=t.level.id,GameData.statisticsData.idiomid=t.level.question_id,GameData.statisticsData.diomipoolver=t.level.batch_id,GameData.statisticsData.gametype=1,GameData.statisticsData.gamestauts=0,GameData.statisticsData.usepoints=t.health_paid,GameData.statisticsData.pointsbalance=t.health.point,GameData.statisticsData.blanks=this.getBlankCount(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MENU_INFO)),[2,t]}})})},t.prototype.getBlankCount=function(){var t=this._levelConfig;if(!t||0==t.length)return 0;for(var e=t.length,i=[],n=0;e>n;n++)for(var a=t[n].blank,s=t[n].start,r=t[n].direction,o=a.length,l=0;o>l;l++){var h=a[l],c=0==r?s+l:s+l*ConstUtil.COLUMNS;!h&&i.indexOf(c)<0&&i.push(c)}return i.length},t.prototype.getCompleteLevelData=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,HttpServer.getCompleteLevelData(this._levelData.level.id)];case 1:return t=i.sent(),this._userData.health=t.health,this._userData.reward=t.reward,this._userData.bubble=t.bubble,GameData.statisticsData.continuous++,t.unlock>0?GameData.statisticsData.upitemlevel=t.unlock+":"+t.unlock_level:GameData.statisticsData.upitemlevel="",e=GameData.statisticsData.rewardlist,""!=e&&(e+=","),e+="redbag:"+t.red,GameData.statisticsData.rewardlist=e,GameData.statisticsData.bonus=this._levelData.level.gold,GameData.statisticsData.gamestauts=1,HttpServer.statisticsGame(),[2,t]}})})},t.prototype.getInitGodBeastInfo=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,HttpServer.getInitGodBeastInfo()];case 1:return t=e.sent(),this._godBeastData=t,[2,t]}})})},t.prototype.getExperienceBeast=function(t){var e=this;if(void 0===t&&(t=!1),!GameData.isVerifyMode()&&Game.instance().currentScene instanceof MenuScene&&this._godBeastData&&1!=this._godBeastData.my_spirit.is_got_tmp)if(t)AppCenter.nativeCache("fenhong","2").then(function(t){if(t&&1==t.value){var i=new GodBeastView;i.open(1),e._godBeastData.my_spirit.is_got_tmp=1}});else{var i=new GodBeastView;i.open(1),this._godBeastData.my_spirit.is_got_tmp=1}},t.prototype.getBubbleInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.getBubbleReward=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n,a,s,r,o,l,h=this;return __generator(this,function(c){switch(c.label){case 0:return[4,HttpServer.getBubbleRewardData(t.id,0)];case 1:for(e=c.sent(),i=this._userData.bubble,n=i.length,a=n-1;a>=0;a--)if(i[a].id==t.id){i.splice(a,1);break}if(s=this._userData.health,r=e.health,o=Math.random()>.6?2:1,1==t.type)this.updateCoinNum(e.gold),AppCenter.showAdDialog(o,e.gold,this._totalCoin,"poppet").then(function(){AppCenter.showVideoAd("rewardvideopet").then(function(){HttpServer.getBubbleRewardData(t.id,1).then(function(t){h.updateCoinNum(t.gold),AppCenter.showAdDialog(3,t.gold,h._totalCoin,"poppet")})})});else{if(l=r.point-s.point,this._userData.health=e.health,0>=l)return AppCenter.showToast("体力已满"),[2];GameUtil.playLifeEffect(400,54,l),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_HEAD_INFO_EVENT)),AppCenter.showAdDialog(o,l,r.point,"poppet","恭喜获得体力x"+l,"体力翻倍x2",1).then(function(){AppCenter.showVideoAd("rewardvideopet").then(function(){HttpServer.getBubbleRewardData(t.id,1).then(function(t){var i=t.health,n=i.point-e.health.point;GameUtil.playLifeEffect(400,54,n),h._userData.health=i,EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_HEAD_INFO_EVENT)),AppCenter.showAdDialog(3,n,i.point,"poppet","恭喜获得体力x"+n,"",1)})})})}return[2]}})})},t.prototype.getInviteExpGoldData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,HttpServer.getIsHaveInvitedAndCoinData()];case 1:return t=e.sent(),this._inviteData=t,[2,t]}})})},t.prototype.getMillionActivity=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n;return __generator(this,function(a){switch(a.label){case 0:return t=AppCenter.nativeCache(ConstUtil.CACHE_MILLION_GROUP_INFO,"2"),e=t.value,e?[3,2]:[4,HttpNakedServer.getMillionActivityData()];case 1:return e=a.sent(),e.cache_start_time=~~((new Date).getTime()/1e3),AppCenter.nativeCache(ConstUtil.CACHE_MILLION_GROUP_INFO,"1",JSON.stringify(e)),[3,4];case 2:return e=JSON.parse(t.value),i=parseInt(e.cache_start_time),n=~~((new Date).getTime()/1e3),n-i>=300?[4,HttpNakedServer.getMillionActivityData()]:[3,4];case 3:e=a.sent(),e.cache_start_time=n,AppCenter.nativeCache(ConstUtil.CACHE_MILLION_GROUP_INFO,"1",JSON.stringify(e)),a.label=4;case 4:return[2,e]}})})},t.COLS=9,t.ROWS=9,t}();__reflect(GameModel.prototype,"GameModel");var GuessModel=function(){function t(){this._startLevel=1}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},Object.defineProperty(t.prototype,"userData",{get:function(){return this._userData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){return this._startLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"levelData",{get:function(){return this._levelData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"completeData",{get:function(){return this._completeData},enumerable:!0,configurable:!0}),t.prototype.getGuessInitInfo=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return this._userData?[2,this._userData]:[4,HttpServer.getGuessInitData()];case 1:return t=e.sent(),this._userData=t,this._startLevel=t.level.level_id,[2,t]}})})},t.prototype.getGuessNextLevelData=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n;return __generator(this,function(a){switch(a.label){case 0:return GameData.guessStaticsData.clicks=0,GameData.guessStaticsData.clicktips=0,GameData.guessStaticsData.retrycount=0,[4,HttpServer.getGuessNextLevelData(t)];case 1:return e=a.sent(),e.status?(this._levelData=e,i=e.body.idioms,n=e.body.chars,1==e.mouse_notice&&e.level.id>1&&!GameData.isVerifyMode()&&GameView.instance().getCardView.open(1),GameData.guessStaticsData.gameround=e.level.id,GameData.guessStaticsData.tallround=this._userData.level.level_id+1,GameData.guessStaticsData.continuous++,GameData.guessStaticsData.question_id=e.level.question_id,GameData.guessStaticsData.diomipoolver=e.level.batch_id,[2,e]):(GameView.instance().showUpperLimitView(),[2,e])}})})},t.prototype.isMatchSuccess=function(t){var e=this._levelData.body,i=e.idioms;return i.indexOf(t)>=0?!0:!1},t.prototype.isRightWord=function(t){for(var e=this._levelData.body,i=e.idioms,n=0,a=i;n<a.length;n++){var s=a[n];
if(s.indexOf(t)>=0)return!0}return!1},t.prototype.getGuessUseTipsData=function(t,e){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return[4,HttpServer.getGuessUseTipData(t,e)];case 1:return i=n.sent(),this._levelData.tips=i.tips,this._levelData.tips_remove=i.tips_remove,this._levelData.tips_video=i.tips_video,[2,i]}})})},t.prototype.getGuessCompleteData=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n;return __generator(this,function(a){switch(a.label){case 0:return[4,HttpServer.getGuessCompleteData(this._levelData.level.id,t)];case 1:return e=a.sent(),this._completeData=e,i=e.level.level_id,n=this._userData.level.level_id,i>=n&&(this._userData.level.level_id=i),[2,e]}})})},t.prototype.getGuessRewardData=function(t){return void 0===t&&(t=0),__awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return[4,HttpServer.getGuessGetRewardData(this._levelData.level.id,t)];case 1:return e=i.sent(),[4,GameUtil.playCoinEffect()];case 2:return i.sent(),GameModel.instance().updateCoinNum(e.gold),[2,e]}})})},t.prototype.startGuessGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return this._userData?[3,2]:[4,this.getGuessInitInfo()];case 1:i.sent(),i.label=2;case 2:return t=this._userData.level.level_id+1,e=this._userData.level.total,t>e?(AppCenter.showToast("您通关了！敬请期待更多游戏关卡！"),[2]):(GameData.guessStaticsData.gameid=(new Date).toLocaleDateString()+"-"+Math.random().toLocaleString(),GameData.guessStaticsData.gameround=t,GameData.guessStaticsData.gametype=2,GameData.guessStaticsData.clicks=0,GameData.guessStaticsData.blanks=4,GameData.guessStaticsData.clicktips=0,GameData.guessStaticsData.continuous=0,GameData.guessStaticsData.costtime=0,GameData.guessStaticsData.tallround=this._userData.level.level_id+1,GameData.guessStaticsData.laststat="__laststat__",GameData.guessStaticsData.thisstat="__thisstat__",GameData.guessStaticsData.lng="__lng__",GameData.guessStaticsData.lat="__lat__",GameData.guessStaticsData.appinfo="__appinfo__",GameData.guessStaticsData.basestation="__basestation__",this.getGuessNextLevelData(t).then(function(t){t.status&&(GameData.guessStaticsData.gamestauts=0,HttpServer.statisticsGuessGame(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_GUESS_IDIOM})))}),[2])}})})},t}();__reflect(GuessModel.prototype,"GuessModel");var HttpNakedServer=function(){function t(){}return t.getMillionActivityData=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i;return __generator(this,function(n){return t={accid:GameData.baseData.accid},e="question/center/findGroups",i=GameData.isLocal?{t:(new Date).getTime()/1e3,s:200,gpstmw:[],gps:[{g:"8cd39bb66679ed30",st:1591672915,bs:1e8,et:1591673215},{g:"16767bc55662139d",st:158652e4,bs:1e9,et:0}]}:AppCenter.sendNakedRequest(e,t),[2,i]})})},t}();__reflect(HttpNakedServer.prototype,"HttpNakedServer");var HttpServer=function(){function t(){}return t.getPublicParams=function(){var t={};return t.ime="__ime__",t.appqid="__appqid__",t.apptypeid="__apptypeid__",t.appver="__appver__",t.device="__device__",t.deviceid="__deviceid__",t.network="__network__",t.os="__os__",t.position="__position__",t.softname="__softname__",t.softtype="__softtype__",t.lt="__lt__",t},t.statisticsGame=function(){var t=GameData.statisticsData;AppCenter.sendNativeRequest(ConstUtil.HTTP_STATISTICS_GAME,t,GameData.IP_STATISTICS,!0,!1,"encrypt_type_java")},t.statisticsGuessGame=function(){var t=GameData.guessStaticsData;AppCenter.sendNativeRequest(ConstUtil.HTTP_STATISTICS_GAME,t,GameData.IP_STATISTICS,!0,!1,"encrypt_type_java")},t.statisticsHome=function(t,e,i){var n={lastlevel:t,curlevel:e,item:i};n.laststat="__laststat__",n.thisstat="__thisstat__",n.lng="__lng__",n.lat="__lat__",n.appinfo="__appinfo__",n.basestation="__basestation__",AppCenter.sendNativeRequest(ConstUtil.HTTP_STATISTICS_HOME,n,GameData.IP_STATISTICS,!0,!1,"encrypt_type_java")},t.setCallBackHandle=function(t,e,i,n,a){return void 0===i&&(i=""),void 0===n&&(n=!0),void 0===a&&(a=!0),__awaiter(this,void 0,void 0,function(){var s,r=this;return __generator(this,function(o){switch(o.label){case 0:return e||(e={}),t!=ConstUtil.HTTP_GET_USER_INFO||GameModel.instance().userData?e.timeOut=3:(this.isTimeOut=!0,egret.setTimeout(function(){return r.isTimeOut?(GameData.requestTimes++,GameData.requestTimes>=3?(GameData.requestTimes=0,void AppCenter.showNetError()):void EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.RELOAD_GAME_NOW))):void 0},this,2e3)),[4,AppCenter.sendNativeRequest(t,e,i,n,a)];case 1:return s=o.sent(),this.isTimeOut=!1,[2,s]}})})},t.getUserData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={cash_items:[1e4,2e4,1e5],level_id:5,exp:600,unlock:1,unlock_video:5,health:{point:10,max:10,cd:10},home:{house:25,pet:1,tree:2,car:5,label:"一贫如洗"},home_unlock:{house:1,pet:1,tree:2,car:1},reward:{level:5,distance:1,reward_type:3},tree:{tree_cd:0,tree_gold:200,tree_chance:1},bubble:[],challenge:{judge_left_chance:3},character:{exp:20,char_level:{level:2,label:"穷书生"},unlock:1,unlock_level:{level:3,label:"穷书生"}}},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_USER_INFO,"","",!0,!1)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getPictureConfigData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={house:[{level_id:5,unlock_level:1},{level_id:10,unlock_level:2},{level_id:15,unlock_level:3},{level_id:20,unlock_level:4},{level_id:30,unlock_level:5},{level_id:50,unlock_level:6},{level_id:80,unlock_level:7},{level_id:150,unlock_level:8},{level_id:500,unlock_level:9},{level_id:500,unlock_level:10},{level_id:500,unlock_level:11},{level_id:500,unlock_level:12},{level_id:500,unlock_level:13},{level_id:500,unlock_level:14},{level_id:500,unlock_level:15},{level_id:500,unlock_level:16},{level_id:500,unlock_level:17},{level_id:500,unlock_level:18},{level_id:500,unlock_level:19},{level_id:500,unlock_level:20},{level_id:500,unlock_level:21},{level_id:500,unlock_level:22},{level_id:500,unlock_level:23},{level_id:500,unlock_level:24},{level_id:500,unlock_level:25},{level_id:1e3,unlock_level:26}],pet:[{level_id:25,unlock_level:1}],tree:[{level_id:5,unlock_level:1}],character:[{exp:10,label:"穷光蛋",unlock_level:1},{exp:100,label:"傻蛋",unlock_level:2},{exp:200,label:"村长",unlock_level:3},{exp:300,label:"希望",unlock_level:4}],car:[{level_id:35,unlock_level:1}]},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_ITEM_CONFIG_INFO)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getSetItemData=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={home:{house:1,pet:1,tree:3,car:0,label:"死亡之舞"}},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_SET_CURRENT_ITEM_INFO,t)];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getLevelUpData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={status:!1,home:{house:41,pet:41,tree:41,car:40,label:"大神的家"},home_unlock:{house:41,pet:22,tree:21,car:40,label:"天门开阖"},tree:{tree_cd:10,tree_gold:200,tree_chance:5},unlock:0,unlock_gold:126,unlock_video:3,got_spirit:2},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_LEVEL_UP_INFO)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getSetCharacterData=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={character:{exp:0,char_level:{level:1,label:"穷书生"},unlock:0,unlock_level:{level:1,label:"穷书生"}}},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_SET_CHARACTER_ITEM_INFO,{character:t})];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getLevelUpAvatarData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={character:{exp:35,char_level:{level:1,label:"县令"},unlock_level:{level:1,label:"县令"},unlock:0,unlock_gold:111,unlock_video:3}},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_LEVEL_UP_CHARACTER_INFO)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getCleverRobotData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={msg:"大人，你还差10阅历值就可以升官啦，去闯关吧",jump:2},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_ROBOT_SPEAK_OUT_INFO)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getBubbleData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return GameData.isLocal&&(t={bubble:[{id:4141,type:2,amount:1},{id:2193,type:1,amount:14},{id:9925,type:1,amount:15}]}),[2,t]})})},t.getBubbleRewardData=function(t,e){return void 0===e&&(e=0),__awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return GameData.isLocal?(i={status:!0,health:{point:9,max:10,cd:765},gold:20},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_BUBBLE_REWARD_INFO,{bubble_id:t,"double":e})];case 2:i=n.sent(),n.label=3;case 3:return[2,i]}})})},t.getLifeData=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={status:!0,health:{point:9,max:10,cd:765}},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_ADD_LIFE_INFO,{type:t})];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getNextLevelData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={status:!0,level:{id:125364987,gold:10,health_cost:1,reward_type:3,chest_num:1,chest_gold:68},body:[{blank:[1,0,1,1],start:66,content:"促膝谈心",direction:0},{blank:[0,0,0,1],start:49,content:"承欢膝下",direction:1},{blank:[0,1,1,1],start:49,content:"承先启后",direction:0},{blank:[0,0,1,1],start:24,content:"不愤不启",direction:1},{blank:[1,0,0,1],start:32,content:"发愤忘食",direction:0},{blank:[1,1,0,1],start:8,content:"饥不择食",direction:1}],tips:0,tips_share_chances:200,health_paid:1,mouse_notice:0,health:{point:9,max:10,cd:56},puzzle:1},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_NEXT_LEVEL_INFO)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getCompleteLevelData=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={level_id:1,idioms:[{id:"2363",idiom:"双管齐下",idiom_py:"[ shuāng guǎn qí xià ]",idiom_explain:"唐张璪（zǎo）善画松，能两手拿着笔同时作画，一画生枝，一画枯干。语见宋郭若虚《图画见闻志》卷五。后以“双管齐下”比喻两件事同时进行或两种方法同时采用。管：笔。",idiom_number:"4"},{id:"3199",idiom:"多管闲事",idiom_py:"[ duō guǎn xián shì ]",idiom_explain:"没有必要而插手管别人的事。没有必要而插手管别人的事。没有必要而插手管别人的事。没有必要而插手管别人的事。没有必要而插手管别人的事。没有必要而插手管别人的事。没有必要而插手管别人的事。",idiom_number:"4"},{id:"4704",idiom:"天下归心",idiom_py:"[ tiān xià guī xīn ]",idiom_explain:"形容天下老百姓心悦诚服。",idiom_number:"4"}],health:{point:0,max:10,cd:0},reward:{level:"1",distance:9,reward_level:11,reward_type:"4"},reward2:{level:"1",distance:9,reward_level:6,reward_type:"1"},red:357,unlock:10,unlock_level:19},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_COMPLETE_LEVEL_INFO,{level_id:t})];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getIdiomExplainData=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={idiom:{id:"3199",idiom:"多管闲事",idiom_py:"[ duō guǎn xián shì ]",idiom_explain:"没有必要而插手管别人的事。没有必要而插手管别人的事。没有必要而插手管别人的事。没有必要而插手管别人的事。没有必要而插手管别人的事。没有必要而插手管别人的事。没有必要而插手管别人的事。",idiom_number:"4"}},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_IDIOM_EXPLAIN_INFO,{idiom:t})];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getMoneyTreeData=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),__awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return GameData.isLocal?(i={gold:38,tree:{tree_cd:50,tree_gold:200,tree_chance:5},times:2},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_MONEY_TREE_INFO,{"double":t,multi:e})];case 2:i=n.sent(),n.label=3;case 3:return[2,i]}})})},t.getLevelRedBoxData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={gold:1234320},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_LEVEL_RED_BOX_INFO)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getBoxLevelData=function(t,e){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return GameData.isLocal?(i={gold:120},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_LEVEL_BOX_INFO,{"double":t,level_id:e})];case 2:i=n.sent(),n.label=3;case 3:return[2,i]}})})},t.getUseTipTimesData=function(t){return void 0===t&&(t=0),__awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={tips:2,tips_share_chances:1},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_USE_TIP_TIMES_INFO,{type:t})];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getRankData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={level_rank:{list:[{level_id:121,figureurl:"",nickname:"177****2278"}],my:{rank:1,level_id:5}},picture_rank:{list:[{level_id:35,figureurl:"",nickname:"177****2278"}],my:{rank:1,level_id:1}},gold_rank:{list:[],my:{rank:0,gold:0}}},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_RANK_INFO)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getMailData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={2:[{id:1,author:"疯狂猜成语",title:"重要公告2",content:"大师发生大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大大www.baidu.c大大大大大大大大大大若点击使用“我的消息”类型时，则需要填写收件人（用户手机号或accid）逻辑2：点击发送后，后台默认2分钟后才生效逻辑3：当类型选择“活动”时，可配置对应跳转的活动链大大www.baidu.c大大大大大大大大大大大大大大大大www.baidu.c大大发生大",gowhere:"1",url:"www.baidu.comff",types:"2",imgs:["https://resources.dftoutiao.com/songheng/toutiao/newbackstageimg/uploads/2020-04-02/5e85995831356.png"],crt:"2020-03-20 11:08:19",sta:!1},{id:2,author:"疯狂猜成语",title:"重要公告1",content:"大师发生大发生大",gowhere:"1",url:"www.baidu.comff",types:"2",crt:"2020-03-01 11:08:19",sta:!1},{id:3,author:"疯狂猜成语",title:"重要公告",content:"大师发生大发生大",gowhere:"1",url:"www.baidu.comff",types:"2",imgs:["resource/hotAssets/successtitlejudge.png"],crt:"2020-02-03 11:08:19",sta:!1}],3:[{id:4,author:"疯狂猜成语",title:"活动2",content:"大师发生大发生大",gowhere:"1",url:"www.baidu.comff",types:"3",crt:"2020-01-03 11:08:19",sta:!1},{id:5,author:"疯狂猜成语",title:"活动2",content:"大师发生大发生大",gowhere:"1",url:"www.baidu.comff",types:"3",crt:"2020-03-03 11:08:19",sta:!1},{id:6,author:"疯狂猜成语",title:"活动",content:"大师发生大发生大",gowhere:"1",url:"www.baidu.comff",types:"3",crt:"2020-02-03 11:08:19",sta:!1}],4:[{id:7,author:"疯狂猜成语",title:"请更新到最新版本2",content:"大师发生大发生大",gowhere:"1",url:"www.baidu.comff",types:"4",crt:"2020-03-03 11:08:19",sta:!1},{id:8,author:"疯狂猜成语",title:"请更新到最新版本1",content:"大师发生大发生大",gowhere:"1",url:"www.baidu.comff",types:"4",crt:"2020-03-03 11:08:19",sta:!1},{id:9,author:"疯狂猜成语",title:"请更新到最新版本",content:"大师发生大发生大",gowhere:"1",url:"www.baidu.comff",types:"4",crt:"2020-01-03 11:08:19",sta:!1}],1:[{id:10,author:"疯狂猜成语",title:"给你的私人信件2",content:"大师发生大发生大",gowhere:"1",url:"www.baidu.comff",types:"1",crt:"2020-03-05 11:08:19",sta:!1},{id:11,author:"疯狂猜成语",title:"给你的私人信件1",content:"大师发生大发生大",gowhere:"1",url:"www.baidu.comff",types:"1",crt:"2020-03-03 11:08:19",sta:!1},{id:12,author:"疯狂猜成语",title:"给你的私人信件",content:"大师发生大发生大",gowhere:"1",url:"www.baidu.comff",types:"1",crt:"2020-03-02 11:08:19",sta:!1}]},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_MAIL_INFO,null,GameData.IP_MESSAGE)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.markMailsRead=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={ids:t},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_MARK_MAIL_READ,{ids:t.join(","),typestr:"see"},GameData.IP_MESSAGE)];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.deleteMails=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={ids:t},[3,3]):[3,1];case 1:return console.log("mail param delete"),console.log({ids:t.join(","),typestr:"del"}),[4,this.setCallBackHandle(ConstUtil.HTTP_DELETE_MAIL,{ids:t.join(","),typestr:"del"},GameData.IP_MESSAGE)];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getApprencesDataIn7Days=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return 0==this.apprencesCountdown&&(this.apprencesCountdown=172800),GameData.isLocal?(t={daojishi_time:this.apprencesCountdown,santian_xiaoshi:5,tixian_tanchuang:0},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_APPRENTICES_IN_7DAYS,"",GameData.IP)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getHundredInfo=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[2,{}];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_HUNDRED_INFO,"",GameData.IP_HUNDRED)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getGuessInitData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={level:{level_id:33,total:1020,limit:100,video_level:[13,33,43,53,63,73,83,93]}},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GUESS_INIT_INFO)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getGuessNextLevelData=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={level:{id:"2",gold:"10",question_id:"1",batch_id:"20191231103859"},body:{idioms:["锦上添花"],chars:["锦","然","改","衣","多","论","乡","七","些","京","说","统","上","还","装","添","花","程","参","四","平","片","及","体"],pic:"https://www.crazyccy.com/guess_from_picture/question1.png"},status:!0,tips:1,tips_remove:1,mouse_notice:0},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GUESS_NEXT_LEVEL_INFO,{level_id:t})];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getGuessCompleteData=function(t,e){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return GameData.isLocal?(i={level:{level_id:12,total:1035},idiom:{id:"1183",idiom:"一帆风顺",idiom_py:"[ yī fān fēng shùn ]",idiom_explain:"船挂满帆，顺风行驶。比喻非常顺利，没有阻碍。",idiom_number:"4"},gold:{gold:50,gold_video:100}},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GUESS_COMPLETE_LEVEL_INFO,{level_id:t,idiom:e})];case 2:i=n.sent(),n.label=3;case 3:return[2,i]}})})},t.getGuessUseTipData=function(t,e){return void 0===e&&(e=0),__awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return GameData.isLocal?(i={tips:2,tips_remove:3},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GUESS_USE_TIPS_INFO,{type:t,is_video:e})];case 2:i=n.sent(),n.label=3;case 3:return[2,i]}})})},t.getGuessGetRewardData=function(t,e){return void 0===e&&(e=0),__awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return GameData.isLocal?(i={gold:100},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GUESS_GET_LEVEL_REWARD_INFO,{level_id:t,is_video:e})];case 2:i=n.sent(),n.label=3;case 3:return[2,i]}})})},t.getJudgeData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={left_chance:398,question_num:20,body:[{idiom:"物是人非",idiom_explain:"东西还是原来的东西，可是人已不是原来的人了。多用于表达事过境迁。因而怀念故人。",blank_pos:3,options:["啡","非"]},{idiom:"赤身露体",idiom_explain:"指光着身子，衣不蔽体。也指赤祼全身，不穿衣服。",blank_pos:1,options:["身","绅"]},{idiom:"勉为其难",idiom_explain:"勉强做能力所不及的或不想做的事。",blank_pos:3,options:["难","男"]},{idiom:"血口喷人",idiom_explain:"比喻用极恶毒的语言诬蔑别人。",blank_pos:0,options:["写","血"]},{idiom:"起死回生",idiom_explain:"使死人复活，多形容医术或技术高明，也比喻把处于毁灭境地的事物挽救过来。",blank_pos:2,options:["迥","回"]},{idiom:"石沉大海",idiom_explain:"像石头掉到大海里一样，不见踪影，比喻始终没有消息。",blank_pos:1,options:["晨","沉"]},{idiom:"皇天后土",idiom_explain:"指天和地。古人认为天地能主持公道，主宰万物。",blank_pos:2,options:["厚","后"]},{idiom:"驾鹤西游",idiom_explain:"死的婉称。",blank_pos:0,options:["驽","驾"]},{idiom:"鼓舞人心",idiom_explain:"鼓舞：振作，奋发。振奋人们的信心。增强人们的勇气。",blank_pos:2,options:["仁","人"]},{idiom:"人多势众",idiom_explain:"声势力量大。",blank_pos:2,options:["适","势"]},{idiom:"手到擒来",idiom_explain:"手一到就把敌人捉拿过来，比喻做事很有把握或毫不费力就能成功。",blank_pos:0,options:["首","手"]},{idiom:"口蜜腹剑",idiom_explain:"《资治通鉴·唐玄宗天宝元年》记载，唐朝宰相李林甫，妒忌贤能，与人相处表面亲热，而心存阴谋。故时人称他“口有蜜，腹有剑。”后以“口蜜腹剑”比喻嘴甜心毒，狡猾阴险。",blank_pos:3,options:["剑","键"]},{idiom:"洋洋自得",idiom_explain:"形容非常得意、自我欣赏的样子。",blank_pos:1,options:["样","洋"]},{idiom:"宋玉东墙",idiom_explain:"喻指貌美多情的女子。",blank_pos:1,options:["愈","玉"]},{idiom:"不可限量",idiom_explain:"限量：限定止境、数量。形容前程远大。",blank_pos:2,options:["限","县"]},{idiom:"沸沸扬扬",idiom_explain:"形容议论 纷纷，好像水沸腾后气泡、热气蒸腾翻滚一样。",blank_pos:3,options:["洋","扬"]},{idiom:"一呼百应",idiom_explain:"一声召唤，群起响应。形容威信高，响应者多。",blank_pos:3,options:["应","莺"]},{idiom:"推而广之",idiom_explain:"广：宽，大。推展开来而且把它扩大。也指从一件事情推及其它。",blank_pos:3,options:["之","脂"]},{idiom:"二分明月",idiom_explain:"古人认为天下明月共三分，扬州独占二分。原用于形容扬州繁华昌盛的景象。今用以比喻当地的月色格外明朗。",blank_pos:2,options:["明","朋"]},{idiom:"论资排辈",idiom_explain:"指按资历辈分决定级别、待遇的高低：在用人上，要打破～的旧观念。",blank_pos:0,options:["纶","论"]}],expire:5},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_JUDGE_GET_DATA)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getJudgeRewardData=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={group_name:"生肖",card_type:"sheng_xiao",card:{idx:5,name:"蛇",status:1},prize_type:2,gold:50},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_JUDGE_GET_REWARD_INFO,{token:t})];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getCardInfo=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t=[{group_name:"生肖",card_type:"sheng_xiao",is_received:0,reward_gold:1e4,cards:[{idx:0,name:"鼠",status:1},{idx:1,name:"牛",status:1},{idx:2,name:"虎",status:1}]},{group_name:"生肖",card_type:"sheng_xiao",is_received:1,reward_gold:1e4,cards:[{idx:0,name:"鼠",status:1},{idx:1,name:"牛",status:0},{idx:1,name:"牛",status:0},{idx:1,name:"牛",status:0},{idx:1,name:"牛",status:0},{idx:1,name:"牛",status:0},{idx:1,name:"牛",status:0},{idx:2,name:"虎",status:1}]},{group_name:"生肖",card_type:"sheng_xiao",is_received:1,reward_gold:1e4,cards:[{idx:0,name:"鼠",status:1},{idx:1,name:"牛",status:0},{idx:1,name:"牛",status:0},{idx:1,name:"牛",status:0},{idx:1,name:"牛",status:0},{idx:2,name:"虎",status:1}]},{group_name:"天王",card_type:"tian_wang",is_received:0,reward_gold:1e4,cards:[{idx:0,name:"茉莉清",status:1},{idx:1,name:"魔礼海",status:1},{idx:1,name:"魔力红",status:1}]}],[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_CARD_CONF_INFO)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getFinishCardRewardInfo=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={gold:1e4},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_CARD_FINISH_REWARD_INFO,{card_type:t})];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.addNewIdiomBook=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={message:"操作成功"},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_ADD_NEW_IDIOM_BOOK_INFO,{idiom:t})];case 2:e=i.sent(),i.label=3;case 3:return AppCenter.showToast("添加成功"),[2,e]}})})},t.removeNewIdiomBook=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={message:"操作成功"},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_REMOVE_NEW_IDIOM_BOOK_INFO,{idiom:t})];case 2:e=i.sent(),i.label=3;case 3:return AppCenter.showToast("移除成功"),[2,e]}})})},t.errorCYReport=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){return GameData.isLocal?(e={message:"操作成功"},AppCenter.showToast("感谢上报，我们会尽快进行检查纠错")):(AppCenter.showToast("感谢上报，我们会尽快进行检查纠错"),this.setCallBackHandle(ConstUtil.HTTP_ERROR_CY_REPORT,{idiom:t})),[2,e]})})},t.reportJudgeCompleteAchieve=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return e=GameModel.instance().userData.challenge.judge_left_chance,GameData.isLocal?(t={message:"上报成功"},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_JUDGE_ACHIEVE_INFO,{left_chance:e})];case 2:t=i.sent(),i.label=3;case 3:return[2]}})})},t.getLongIPPort=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={ip:"",port:"120",gameId:""},[3,3]):[3,1];case 1:return[4,AppCenter.sendNativeRequest(ConstUtil.HTTP_PK_IP_PORT_INFO,{gameId:t},GameData.IP_PK_PORT,!0,!1,"encrypt_type_java")];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getPkUserInfo=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={user:{nickname:"你是一条大黑狗",figureurl:""},items_cd:120,pass_cd:10,pass_info:{pass:5,max:10},items_info:[{id:1,num:0,max:5},{id:2,num:2,max:5},{id:3,num:2,max:5},{id:4,num:3,max:5}],history:{win:123,lose:87,win_rate:58.57},gold:{today:0,limit:2e3}},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_PK_USER_INFO)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getPkItemsInfo=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={items_info:[{id:1,num:4,max:5},{id:2,num:5,max:5},{id:3,num:5,max:5},{id:4,num:5,max:5}]},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_PK_ITEMS_INFO)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getPkTicketsInfo=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={pass_info:{pass:6,max:10},pass_cd:120},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_PK_TICKETS_INFO)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getInitGodBeastInfo=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={profit:{ytdavgrmb:234},my_spirit:{spirit_num:1,is_got_tmp:0},tmp_info:{tmpbonus:3400,tmptime:300,create_time:1582877881}},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_INIT_GOD_BEAST_INFO)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getGodBeastInfo=function(t){return void 0===t&&(t=0),__awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={status:!0,tmp_info:{tmpbonus:3400,tmptime:300,create_time:1582877881}},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_GOD_BEAST_INFO,{tmp:t})];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getGodBeastRewardInfo=function(t){return void 0===t&&(t=0),__awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={gold:5e3},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_BEAST_REWARD_INFO,{tmp:t})];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getGodBeastProgressInfo=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={chart:{exp:[10,10,10,10,9],max:[10,10,10,10,10]},collect:{progress:4.09}},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_BEAST_PROGRESS_INFO)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getSignData=function(t){return void 0===t&&(t={}),__awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={isGetDouble:!1,signNum:0,bonus:12e3,money:1.2,isSignNew:!0,config:[{coin:18,is_sign:0},{coin:28,is_sign:0},{coin:38,is_sign:0},{coin:58,is_sign:0},{coin:68,is_sign:2},{coin:88,is_sign:0},{coin:100,is_sign:0}]},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_SIGN_DATA_INFO,t,GameData.IP_SIGN)];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getSignNow=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={num:1,bonus:18},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_SIGN_NOW_INFO,"",GameData.IP_SIGN)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getSignDoubleNow=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={bonus:18},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_SIGN_DOUBLE_INFO,{multi:t},GameData.IP_SIGN)];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getSignMulti=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={multi:5},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_SIGN_GET_MULTI,"",GameData.IP_SIGN)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getMissionData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={gameTask:[{id:"28",title:"初出茅庐",coin:"100",type:"3",num:"1",sort:"1",status:0,finish:1,finish_time:1590114580,pid:3},{id:"29",title:"进击的官人",coin:"2000",type:"3",num:"600",sort:"1",status:0,finish:0,finish_time:0,pid:3},{id:"30",title:"体力收割机",coin:"3000",type:"3",num:"900",sort:"1",status:0,finish:0,finish_time:0,pid:3},{id:"31",title:"爆肝狂人",coin:"4000",type:"3",num:"1200",sort:"1",status:0,finish:0,finish_time:0,pid:3},{id:"32",title:"初生牛犊",coin:"100",type:"3",num:"1",sort:"1",status:1,finish:1,finish_time:1590114580,pid:4},{id:"33",title:"鉴宝达人",coin:"2000",type:"3",num:"30",sort:"1",status:2,finish:0,finish_time:0,pid:4},{id:"34",title:"卡牌大师",coin:"4000",type:"3",num:"50",sort:"1",status:0,finish:0,finish_time:0,pid:4},{id:"35",title:"小试牛刀",coin:"500",type:"3",num:"15",sort:"1",status:2,finish:0,finish_time:0,pid:5},{id:"37",title:"庖丁解牛",coin:"3000",type:"3",num:"200",sort:"1",status:0,finish:0,finish_time:0,pid:5},{id:"38",title:"螺丝钉",coin:"1000",type:"3",num:"5",sort:"1",status:2,finish:0,finish_time:0,pid:6},{id:"39",title:"打桩机",coin:"4000",type:"3",num:"15",sort:"1",status:1,finish:0,finish_time:0,pid:6},{id:"40",title:"永动机",coin:"5000",type:"3",num:"30",sort:"1",status:2,finish:0,finish_time:0,pid:6},{id:"41",title:"火眼金睛",coin:"500",type:"3",num:"5",sort:"1",status:2,finish:0,finish_time:0,pid:7},{id:"42",title:"葵花点穴手",coin:"1000",type:"3",num:"50",sort:"1",status:0,finish:20,finish_time:0,pid:7},{id:"43",title:"佛山无影手",coin:"2000",type:"3",num:"100",sort:"1",status:1,finish:0,finish_time:0,pid:7},{id:"44",title:"小有斩获",coin:"500",type:"3",num:"100",sort:"1",status:0,finish:0,finish_time:0,pid:8},{id:"45",title:"大浪淘沙",coin:"2000",type:"3",num:"600",sort:"1",status:0,finish:0,finish_time:0,pid:8},{id:"46",title:"摸金校尉",coin:"5000",type:"3",num:"1200",sort:"1",status:0,finish:0,finish_time:0,pid:8},{id:"47",title:"妙手空空",coin:"1000",type:"3",num:"80",sort:"1",status:0,finish:0,finish_time:0,pid:9},{id:"49",title:"百发百中",coin:"3000",type:"3",num:"40",sort:"1",status:0,finish:0,finish_time:0,pid:9},{id:"50",title:"随心所欲",coin:"4000",type:"3",num:"30",sort:"1",status:1,finish:0,finish_time:0,pid:9}],dailyTask:[{id:"3",title:"绑定微信号",coin:"500",type:"1",num:"0",sort:"3",status:"1"},{id:"4",title:"绑定手机号",coin:"1000",type:"1",num:"0",sort:"4",status:"0"},{id:"23",title:"开启推送",coin:"100",type:"1",num:"0",sort:"5",status:"0"},{id:"6",title:"开启签到提醒",coin:"50",type:"1",num:"0",sort:"6",status:"0"},{id:"7",title:"邀请好友赚金币",coin:"2000",type:"2",num:"0",sort:"7",status:1},{id:"8",title:"看激励视频赚金币",coin:"50",type:"2",num:"5",sort:"8",status:0,finish:0,time:2},{id:"27",title:"完成所有任务",coin:"50",type:"2",num:"1",sort:"8",status:0,finish:0},{id:"51",title:"每日参与匹配对战",coin:"50",type:"2",num:"1",sort:"8",status:2,finish:0,ticket_num:1},{id:"52",title:"每日匹配对战获胜3次",coin:"50",type:"2",num:"1",sort:"8",status:0,finish:0,ticket_num:1,prop_type:[4]},{id:"53",title:"每日对战中使用道具3次",coin:"50",type:"2",num:"1",sort:"8",status:2,finish:0,prop_type:[1,2,3]},{id:"9",title:"每日分享奖励",coin:"10",type:"2",num:"3",sort:"9",status:0,finish:1}]},[3,3]):[3,1];
case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_MISSION_DATA_INFO,"",GameData.IP_MISSION)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getBattleMissionData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t=[{id:"51",title:"每日参与匹配对战",coin:"30",ticket_num:1,type:"1",num:"1",sort:"3",status:"1",finish:1},{id:"52",title:"每日匹配对战获胜3次",coin:"50",ticket_num:1,prop_type:[4],type:"1",num:"3",sort:"4",status:"1",finish:1},{id:"53",title:"每日对战中使用道具3次	",coin:"50",prop_type:[1,2,3],type:"1",num:"3",sort:"5",status:"0",finish:2}],[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_BATTLE_MISSION_DATA_INFO,"",GameData.IP_MISSION)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getMissionReward=function(t){return void 0===t&&(t=""),__awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={taskId:2,bonus:1e3},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_MISSION_REWARD_INFO,{task_id:t},GameData.IP_MISSION)];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.getMissionDoubleReward=function(t){return void 0===t&&(t=""),__awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={taskId:2,bonus:1e3},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_MISSION_DOUBLE_REWARD_INFO,{task_id:t},GameData.IP_MISSION)];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.updateMissionTipsData=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(t={status:!0},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_MISSION_TIPS_INFO,"",GameData.IP_MISSION)];case 2:t=i.sent(),i.label=3;case 3:return e=new GameEvent(GameEvent.SHOW_CAN_GET_POINT_EVENT,t),EventCenter.instance().dispatchEvent(e),[2]}})})},t.setMissionNotificationStatus=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={status:!0},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_SET_MISSION_NOTIFICATION_INFO,{taskId:"23"},GameData.IP_MISSION)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getIsHaveInvitedAndCoinData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={can_get_status:1,bonus:20},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_GET_INVITED_AND_COINT_INFO,"",GameData.IP_INVITE)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getPuzzleInfo=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={pintu_1:1,pintu_2:0,pintu_3:2,pintu_4:0,pintu_5:0,pintu_6:0,pintu_7:1,pintu_8:3,pintu_9:0},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_PUZZLE_INFO,"")];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getPuzzlePiece=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={pintu_id:1,bonus:0,num:1,level_x:5,left_chance:3,first_pintu_status:1},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_PUZZLE_PIECE,"")];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.applyFriend=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_FRIEND_APPLY,{other_accid:t},GameData.IP_INVITE)];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.agreeApply=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_FRIEND_AGREE_APPLY,{other_accid:t},GameData.IP_INVITE)];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.refuseApply=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_FRIEND_REFUSE_APPLY,{other_accid:t},GameData.IP_INVITE)];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.deleteFriend=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_FRIEND_DELETE,{other_accid:t},GameData.IP_INVITE)];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.friendApplyList=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={apply_list:[{accid:"f42f91a9d33aebf11iiZAV",status:0,nickname:"188****9166",figureurl:"",invitecode:"000044758"}]},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_FRIEND_APPLY_LIST,{page:1,limit:1e4},GameData.IP_INVITE)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getFriends=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={friend_list:[{accid:"f42f91a9d33aebf11iiZAV",status:0,nickname:"188****9166",figureurl:"",invitecode:"000044758",win:4,lose:4,win_rate:.5}]},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_FRIEND_LIST,{page:1,limit:1e4},GameData.IP_INVITE)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getOnlineFriends=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return GameData.isLocal?(t={online_friend_list:[]},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_FRIEND_GET_ONLINE,"",GameData.IP_INVITE)];case 2:t=e.sent(),e.label=3;case 3:return[2,t]}})})},t.getSearchedInfo=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isLocal?(e={accid:"f42f91a9d33aebf11iiZAV",nickname:"188****9166",figureurl:""},[3,3]):[3,1];case 1:return[4,this.setCallBackHandle(ConstUtil.HTTP_FRIEND_SEARCH,{invitecode:t},GameData.IP_INVITE)];case 2:e=i.sent(),i.label=3;case 3:return[2,e]}})})},t.isTimeOut=!1,t.apprencesCountdown=0,t}();__reflect(HttpServer.prototype,"HttpServer");var JudgeModel=function(){function t(){this.index=0}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},Object.defineProperty(t.prototype,"userData",{get:function(){return this._userData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cardData",{get:function(){return this._cardData},enumerable:!0,configurable:!0}),t.prototype.getJudgeData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,HttpServer.getJudgeData()];case 1:return t=e.sent(),this._userData=t,GameModel.instance().userData.challenge.judge_left_chance=t.left_chance,this.idiomData=t.body,[2]}})})},t.prototype.getJudgeResultData=function(t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){var e,i,n,a,s,r,o,l;return __generator(this,function(h){switch(h.label){case 0:return e=t?this._userData.token_v:this._userData.token,[4,HttpServer.getJudgeRewardData(e)];case 1:if(i=h.sent(),1==i.prize_type)GameModel.instance().updateCoinNum(i.gold);else{if(!this._cardData)return[2,i];for(n=this._cardData.length,a=!1,s=0;n>s;s++)if(r=this._cardData[s],r.card_type==i.card_type){for(o=r.cards,l=0;l<o.length;l++)if(o[l].idx==i.card.idx){o[l].status=i.card.status,a=!0;break}break}a&&this.redestructCardData()}return[2,i]}})})},t.prototype.getCardConfData=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return this._cardData?[2]:[4,HttpServer.getCardInfo()];case 1:return t=e.sent(),this._cardData=t,this.redestructCardData(),[2]}})})},t.prototype.redestructCardData=function(){var t=this._cardData;if(t)for(var e=t.length,i=0;e>i;i++){var n=t[i];n.total=n.cards.length,n.current=this.getHaveNum(n.cards),n.finish=n.total==n.current}},t.prototype.getHaveNum=function(t){if(!t||t.length<=0)return 0;for(var e=0,i=0,n=t;i<n.length;i++){var a=n[i];1==a.status&&e++}return e},t.prototype.getIndexAndTotal=function(){var t=this.idiomData.length;return{num:this.index,total:t}},t.prototype.getCurrentIdiom=function(){return this.idiomData[this.index-1]},t.prototype.getNextIdiom=function(){var t=this.idiomData.length;if(this.index>=t)return null;var e=this.idiomData[this.index];return this.index++,e},t.prototype.checkFirstAchieve=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n,a,s;return __generator(this,function(r){switch(r.label){case 0:return this._cardData?[3,2]:[4,this.getCardConfData()];case 1:r.sent(),r.label=2;case 2:for(t=0,e=this._cardData.length,i=0;e>i;i++)for(n=this._cardData[i],a=n.cards,s=0;s<a.length;s++)if(1==a[s].status&&(t++,t>1))return[2];return 1==t&&AppCenter.nativeCache(ConstUtil.CACHE_ACHIECE_POPUP_32,"2").then(function(t){if(!t||!t.value){AppCenter.nativeCache(ConstUtil.CACHE_ACHIECE_POPUP_32,"1","1");var e=new AchievePopup;e.open(32)}}),[2]}})})},t.prototype.reset=function(){this.index=0},t}();__reflect(JudgeModel.prototype,"JudgeModel");var PKModel=function(){function t(){this.pkViews=[],this.isEnemyFlee=!1,this.isFriendFlag=!1,this._userIdList=[],this._ownerUserId="",this._userList=[],this._tempUserIdList=[],this.socket=SocketCenter.instance()}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},Object.defineProperty(t.prototype,"userIdList",{set:function(t){this._userIdList=t,this._tempUserIdList=t.concat()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userList",{set:function(t){this._userList=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ownerUserId",{set:function(t){this._ownerUserId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"myPkInfo",{get:function(){return this._myPkInfo},enumerable:!0,configurable:!0}),t.prototype.isMySelf=function(t){return GameData.baseData.accid==t},t.prototype.getPlayAccid=function(){for(var t=this._tempUserIdList,e=0;e<t.length;e++)if(t[e]!=GameData.baseData.accid)return t[e];return 0},t.prototype.isLeader=function(){return GameData.baseData.accid==this._ownerUserId},t.prototype.getRoomUserInfo=function(t){void 0===t&&(t=!0);for(var e,i=this._userList.length,n=0;i>n;n++){var a=this._userList[n];if(t){if(this.isMySelf(a.accid)){e=a;break}}else if(!this.isMySelf(a.accid)){e=a;break}}return e},t.prototype.getOwnPKInfo=function(t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){var e,i;return __generator(this,function(n){switch(n.label){case 0:return!t&&this._myPkInfo?[2]:[4,HttpServer.getPkUserInfo()];case 1:return e=n.sent(),this._myPkInfo=e,i=~~((new Date).getTime()/1e3),this._myPkInfo.items_cd=i+e.items_cd,this._myPkInfo.pass_cd=i+e.pass_cd,[2,e]}})})},t.prototype.getItemByIdx=function(t){var e={num:0,id:0,max:0};if(this._myPkInfo)for(var i=this._myPkInfo.items_info,n=0,a=i;n<a.length;n++){var s=a[n];if(s.id==t){e=s;break}}return e},t.prototype.getPKItemsInfo=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n,a,s,r,o,l,h;return __generator(this,function(c){switch(c.label){case 0:return[4,HttpServer.getPkItemsInfo()];case 1:for(t=c.sent(),e=~~((new Date).getTime()/1e3),this._myPkInfo.items_cd=t.items_cd+e,i=this._myPkInfo.items_info,n=t.items_info,a={},s=i.length,r=0;s>r;r++)o=i[r].num,l=n[r].num,h=parseInt(l)-parseInt(o),a[i[r].id]=h;return this._myPkInfo.items_info=n,[2,a]}})})},t.prototype.reset=function(){this._userIdList=[],this._ownerUserId="",this._userList=[],this.isEnemyFlee=!1},t.prototype.gotoPKGame=function(){var t=new GameEvent(GameEvent.GOTO_SCENE_EVENT);t.data={type:ConstUtil.SCENE_DISPEL_PK},EventCenter.instance().dispatchEvent(t)},t.prototype.inviteFriendPK=function(){var t=this._myPkInfo.user.nickname,e=""+GameData.baseData.accid,i="挑战邀请",n="点击该链接，与"+t+"一起组队PK《全民消成语模式》";AppCenter.invitePK(e,i,n),this.sendInviteFriendInfo("")},t.prototype.connectNow=function(){this.socket.connect()},t.prototype.disconnect=function(){this.socket.disconnect(),this.reset()},t.prototype.sendReadyInfo=function(){this.socket.flushData("","",MessageUtil.GAME_READY)},t.prototype.sendDoubleInfo=function(){this.socket.flushData("",MessageUtil.METHOD_REAWARD_DOUBLE)},t.prototype.sendMatchEnemyInfo=function(t){void 0===t&&(t=!1);var e=t?MessageUtil.CLIENT_RETRY_MATCH:MessageUtil.CLIENT_START_MATCH;this.isEnemyFlee=t,this.socket.flushData("","",e)},t.prototype.sendRoomUserInfo=function(t,e){void 0===t&&(t=1),void 0===e&&(e=0),this.socket.flushData({users:this._userIdList,game_type:t,invite_type:e},MessageUtil.METHOD_ROOM_USERS_INFO)},t.prototype.sendStartGameInfo=function(){this.socket.flushData("",MessageUtil.METHOD_CREATE_GAME)},t.prototype.sendUseEmojiInfo=function(t){var e=this.getRoomUserInfo(!1);this.socket.flushData({content:t,to_accid:e.accid},MessageUtil.METHOD_USE_EMOJI)},t.prototype.sendUseItemInfo=function(t){var e=this.getRoomUserInfo(!1);this.socket.flushData({item_id:t,to_accid:e.accid},MessageUtil.METHOD_USE_ITEM)},t.prototype.sendFinishOneInfo=function(t,e){void 0===e&&(e=1),this.socket.flushData({idiom:t,combo:e},MessageUtil.METHOD_GAME_PROGRESS)},t.prototype.sendGiveupGameInfo=function(){this.socket.flushData("",MessageUtil.METHOD_GIVE_UP_GAME)},t.prototype.sendWinGameInfo=function(){this.socket.flushData("",MessageUtil.METHOD_WIN_GAME)},t.prototype.sendResultInfo=function(){this.socket.flushData("",MessageUtil.METHOD_SETTLE_GAME)},t.prototype.sendRobotMsg=function(){var t=this.getRoomUserInfo(!1);if(t){var e=t.accid;e.search("rbtbattle")<0||this.socket.flushData("",MessageUtil.METHOD_ROBOT_MESSAGE)}},t.prototype.sendInviteFriendInfo=function(t){this.socket.flushData({targetId:t},"",MessageUtil.CLIENT_INVITE_BATTLE),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.PK_FRIEND_WAITING_EVENT))},t.prototype.sendReceiveInvite=function(t){this.socket.flushData({targetId:t},"",MessageUtil.CLIENT_RECEIVE_INVITE_BATTLE)},t.prototype.sendRejectInvite=function(t){this.socket.flushData({targetId:t},"",MessageUtil.CLIENT_REJECT_INVITE_BATTLE)},t.prototype.sendCancelInvite=function(){this.socket.flushData("","",MessageUtil.CLIENT_CANCEL_INVITE)},t.prototype.sendLeaveRoomInfo=function(){this.socket.flushData("","",MessageUtil.CLIENT_LEAVE_ROOM)},t.prototype.sendBroadcastInfo=function(t,e){this.socket.flushData({event:t,params:e},MessageUtil.METHOD_BROADCAST)},t.prototype.messageHandler=function(t){var e=t.method,i=t.data;switch(e){case MessageUtil.METHOD_ROOM_USERS_INFO:GameData.isLocal&&(i={users:[{accid:GameData.baseData.accid,nickname:"我自己",figureurl:""},{accid:"456",nickname:"你的对手日本鬼子",figureurl:""}]}),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.GET_ROOM_USERS_EVENT,i));break;case MessageUtil.METHOD_CREATE_GAME:GameData.isLocal&&(i={words:["采采采长","力挽狂澜","刀枪不入","洗耳恭听","良药苦口","大家风范"],chars:["苦","长","大","风","独","听","貌","入","刀","药","采","踞","采","龙","口","家","独","断","神","范","虎","狂","蟠","恭"],hints:["形容雄壮的队伍或浩大的声势","形容天气晴朗暖和，多用于春天","比喻容易引起嫌疑的场合","比喻在重大问题上需要作出选择","长城通称，比喻国家依赖的大将","形容场面喜庆、热闹","比喻游览、观赏的大好时机","人来来往往连续不断","形容没有约束，十分安闲随意"],tickets:[{pass:1,accid:""},{pass:1,accid:""}]}),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.GET_QUESTION_TOPIC_EVENT,i));break;case MessageUtil.METHOD_USE_ITEM:GameData.isLocal&&(i={status:!0,from_accid:"ddddd",to_accid:"aaabbbccc",item_id:2}),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.USE_ITEM_EVENT,i));break;case MessageUtil.METHOD_USE_EMOJI:GameData.isLocal&&(i={status:!0,from_accid:GameData.baseData.accid,to_accid:"aaabbbccc",content:"你不会赢的，大傻逼"}),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.USE_EMOJI_EVENT,i));break;case MessageUtil.METHOD_GAME_PROGRESS:GameData.isLocal&&(i={accid:GameData.baseData.accid,points:120,combo:2,finish:["博采众长","力挽狂澜"]}),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.COMPLETE_ONE_EVENT,i));break;case MessageUtil.METHOD_BROADCAST:GameData.isLocal&&(i={accid:GameData.baseData.accid,event:"video",params:{status:1}}),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.PK_BROADCAST_EVENT,i));break;case MessageUtil.METHOD_ROBOT_SLEEP:console.log("npc:我休息了");break;case MessageUtil.METHOD_GIVE_UP_GAME:case MessageUtil.METHOD_WIN_GAME:case MessageUtil.METHOD_SETTLE_GAME:GameData.isLocal&&(i={winner:"cccc",status:2,game_type:1,is_friend:1,users:[{accid:GameData.baseData.accid,gold:150,combo:2,use_item:3,use_emoji:7,points:300,points_ext:300,room_point:10,gold_double:1,finish:["快言快语","无价之宝","世世代代"],history:{win:123,lose:87,win_rate:58.57}},{accid:"8856c8bafc4fc61f1iqrzP",gold:50,combo:0,use_item:0,use_emoji:0,points:0,points_ext:0,room_point:5,finish:[]}],ts_connect:1591240237,ts:1591240517}),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.PK_RESULT_EVENT,i));break;default:console.log("未定义的method:"+e,i)}},t.prototype.resetView=function(){for(var t=0,e=this.pkViews;t<e.length;t++){var i=e[t];i.close()}this.pkViews=[]},t}();__reflect(PKModel.prototype,"PKModel");var WordVO=function(){function t(){this.configArr=[],this.index=0,this.aIndex=-1,this.status=0,this.current="",this.correct=""}return t.prototype.coonstructor=function(){this.reset()},t.prototype.reset=function(){this.status=ConstUtil.STATUS_BLANK,this.configArr=[],this.aIndex=-1,this.current="",this.correct=""},t.prototype.isCorrect=function(){return!this.current||this.correct?!1:this.current==this.correct},t}();__reflect(WordVO.prototype,"WordVO");var PKBonusView=function(t){function e(){var e=t.call(this)||this;return e._type=0,e.skinName="resource/game_skins/PKBonusView.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){var e=this;t.target==this.videoBtn?(0==this._type?AppCenter.uploadActivityLog("1020059","click","page","","1"):1==this._type&&AppCenter.uploadActivityLog("1020072","click","page","","1"),AppCenter.showVideoAd("rewardvideojsjb").then(function(){e._callBack&&e._callBack(1),e.close()})):t.target==this.cancelTxt&&(0==this._type?AppCenter.uploadActivityLog("1020059","click","page","","2"):1==this._type&&AppCenter.uploadActivityLog("1020072","click","page","","2"),this._callBack&&this._callBack(0),this.close())},e.prototype.open=function(e,i){void 0===e&&(e=null),void 0===i&&(i=0),t.prototype.open.call(this),this._callBack=e,this._type=i,0==i?AppCenter.uploadActivityLog("1020059","show","page"):1==i&&AppCenter.uploadActivityLog("1020072","show","page")},e.prototype.close=function(){t.prototype.close.call(this);var e=PKModel.instance().pkViews,i=e.indexOf(this);i>=0&&e.splice(i,1),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.destroy(),0==this._type?AppCenter.uploadActivityLog("1020059","close","page"):1==this._type&&AppCenter.uploadActivityLog("1020072","close","page"),this._callBack=null},e}(BaseEuiView);__reflect(PKBonusView.prototype,"PKBonusView");var PKFriendUI=function(t){function e(){var e=t.call(this)||this;return e.isReady=!1,e.mCount=-1,e.pkModel=PKModel.instance(),e.isMatching=!1,e.waitNum=0,e.skinName="resource/game_skins/PKFriendUI.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.$onAddToStage=function(e,i){var n=this;t.prototype.$onAddToStage.call(this,e,i),AppCenter.uploadActivityLog("1020077","show","entry"),AppCenter.uploadActivityLog("1020076","show","page"),HttpServer.friendApplyList().then(function(t){var e=t?t.apply_list:[];e.length?RedpointUtil.addRedPoint(n.myfriendBtn,{offx:-16,offy:8}):RedpointUtil.removeRedPoint(n.myfriendBtn)})},e.prototype.checkApplyRedpoint=function(t){var e=t.data;e?RedpointUtil.addRedPoint(this.myfriendBtn,{offx:-16,offy:8}):RedpointUtil.removeRedPoint(this.myfriendBtn)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.x=SpriteUtil.stageCenterX-this.width/2,this.y=GameData.ipxHgt+55,this.headImg1.mask=this.maskRect1,this.headImg2.mask=this.maskRect2,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),EventCenter.instance().addEventListener(GameEvent.FRIEND_APPLY_CHANGE,this.checkApplyRedpoint,this)},e.prototype.touchHandler=function(t){var e=t.target,i=e.name,n=i.search("playtxt_");if(this.showPlayChat(!0),n>=0){AppCenter.uploadActivityLog("1020078","click","entry");var a=parseInt(i.split("_")[1]);this.nowTxt.text=this.playGrp.getChildAt(1+a).text,this.pkModel.isLeader()&&this.pkModel.sendBroadcastInfo("gamechat",this.nowTxt.text),GameSound.instance().playSound("btn")}else e==this.backBtn?(this.pkModel.sendCancelInvite(),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.GOTO_PK_SCENE_EVENT)),GameSound.instance().playSound("btn")):e==this.inviteBtn?(AppCenter.uploadActivityLog("1020077","click","entry"),FriendOnlineView.show(),GameSound.instance().playSound("btn")):e==this.startBtn?(AppCenter.uploadActivityLog("1020081","click","entry"),this.pkModel.isLeader()?this.pkModel.sendStartGameInfo():this.isReady||this.pkModel.sendReadyInfo(),GameSound.instance().playSound("btn")):e==this.chatBtn?(this.showPlayChat(),GameSound.instance().playSound("btn")):e==this.myfriendBtn&&(AppCenter.uploadActivityLog("1020079","click","entry"),FriendView.show(),GameSound.instance().playSound("btn"))},e.prototype.setBroadcast=function(t){var e=this.pkModel.isMySelf(t.accid);e||"gamechat"==t.event&&(this.nowTxt.text=t.params)},e.prototype.setLeave=function(t){var e=this.pkModel.isMySelf(t.userId);e||(GameUtil.showPKToast("你的好友离开了房间"),this.reset())},e.prototype.setReady=function(t){this.isReady=!0,this.pkModel.isLeader()?(this.startBtn.touchEnabled=!0,this.startBtn.filters=this.startTxt.filters=null):this.startTxt.text="已准备",this.readyImg.visible=!0,this.readyImg.scaleX=0,this.readyImg.scaleY=0,egret.Tween.get(this.readyImg).to({scaleX:1,scaleY:1},200)},e.prototype.reset=function(){var t=this;this.isMatching=!1;var e=PKModel.instance().myPkInfo;GameUtil.getHeadIconByUrl(e.user.figureurl).then(function(e){t.headImg1.source=e}),TextUtil.showEllipsis(this.myNameTxt,e.user.nickname),this.headImg2.source=null,this.friendNameTxt.text="",this.tipsTxt.text="",this.readyImg.visible=!1,this.startBtn.touchEnabled=!1,this.startBtn.filters=this.startTxt.filters=GameUtil.getGrayFilter(),this.inviteBtn.visible=!0,this.isReady=!1,this.mCount=-1,console.log("ccccccc")},e.prototype.setInviting=function(){this.mCount=0},e.prototype.loop=function(){if(this.isMatching||(this.isMatching=!0,AppCenter.uploadActivityLog("1020092","show","page")),!(this.mCount<0)){if(this.waitNum<20)return void this.waitNum++;this.waitNum=0;for(var t="",e=0;e<this.mCount;e++)t+=".";this.tipsTxt.text="等待好友加入"+t,this.mCount++,this.mCount>3&&(this.mCount=0)}},e.prototype.setUserInfo=function(){var t=this,e=this.pkModel.getRoomUserInfo(),i=this.pkModel.getRoomUserInfo(!1),n=this.pkModel.isLeader();this.tipsTxt.text="",this.mCount=-1,this.inviteBtn.visible=!1,AppCenter.uploadActivityLog("1020081","show","entry"),n?(this.startTxt.text="开始对战",this.startBtn.touchEnabled=!1,this.startBtn.filters=this.startTxt.filters=GameUtil.getGrayFilter(),GameUtil.getHeadIconByUrl(i.figureurl).then(function(e){t.headImg2.source=e})):(this.startTxt.text="准备",this.startBtn.touchEnabled=!0,this.startBtn.filters=this.startTxt.filters=null,GameUtil.getHeadIconByUrl(i.figureurl).then(function(e){t.headImg1.source=e}),GameUtil.getHeadIconByUrl(e.figureurl).then(function(e){t.headImg2.source=e})),TextUtil.showEllipsis(this.myNameTxt,n?e.nickname:i.nickname),TextUtil.showEllipsis(this.friendNameTxt,n?i.nickname:e.nickname)},e.prototype.showPlayChat=function(t){void 0===t&&(t=!1),t?this.playGrp.visible=!t:this.playGrp.visible=!this.playGrp.visible},e.prototype.hangUp=function(){this.parent&&(this.parent.removeChild(this),FriendSearchView.hide(),FriendOnlineView.hide(),FriendView.hide(),AppCenter.uploadActivityLog("1020076","close","page"))},e}(eui.Component);__reflect(PKFriendUI.prototype,"PKFriendUI",["eui.UIComponent","egret.DisplayObject"]);var PKGameUI=function(t){function e(){var e=t.call(this)||this;return e.answerArr=[],e.answerCopyArr=[],e.pkModel=PKModel.instance(),e.progressWidth=174,e.comboCnt=0,e.comboCurTime=0,e.score1=0,e.score2=0,e.isStart=!1,e.curTotalTime=0,e.bubbleChatDuration1=0,e.bubbleChatDuration2=0,e.inkDuration=0,e.protectDuration1=0,e.protectDuration2=0,e.glassTipTime=0,e.tipsTime=0,e.xchattimes=0,e.skinName="resource/game_skins/PKGameUI.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.createWordsList(),this.createItemList(),this.createIdiomList(),this.toastTxt1.text=this.toastTxt2.text="",this.progress1.mask=this.prgmask1,this.progress2.mask=this.prgmask2,this.prgmask1.width=this.prgmask2.width=0,this.headImg1.mask=this.headMask1,this.headImg2.mask=this.headMask2,this.tipsTxt.mask=this.tipMask,this.topGrp.x=SpriteUtil.stageCenterX-this.topGrp.width/2,this.bottomGrp.x=SpriteUtil.stageCenterX-this.bottomGrp.width/2,this.countDownObj={},this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.createWordsList=function(){for(var t=[],e=[],i=0;24>i;i++){var n=new PKWord;n.x=i%6*112,n.y=122*Math.floor(i/6),n.index=i,this.wordGrp.addChild(n),t.push(n),e.push({index:i,x:n.x,y:n.y})}this.wordsList=t,this.wordsPoints=e,this.wordGrp.x=SpriteUtil.stageCenterX-this.wordGrp.width/2,this.pkbgImg.x=SpriteUtil.stageCenterX-this.pkbgImg.width/2},e.prototype.createItemList=function(){for(var t=[],e=[],i=[],n=1;4>=n;n++)t.push(this["itemBtn"+n]),e.push(this["itemLabel"+n]),i.push(this["itemCnt"+n]);this.itemBtnArr=t,this.itemLabelArr=e,this.itemCntArr=i},e.prototype.createIdiomList=function(){for(var t=[],e=[],i=0;6>i;i++)t.push(this["idiomTxt"+i]),e.push(this["idiomBg"+i]);this.idiomTxtArr=t,this.idiomBgArr=e},e.prototype.touchHandler=function(t){var e=this,i=t.target,n=i.name,a=this.itemBtnArr.indexOf(i);if(i instanceof PKWord){var s=i;s.selected=!s.selected,s.selected?(this.answerArr.push(s.index),this.gotoGuide(),this.checkResult()):this.answerArr.splice(this.answerArr.indexOf(s.index),1),GameSound.instance().playSound("btn")}else if(a>=0){var r=0,o=0;if(0==a)r=ConstUtil.PK_ITEM_GLASS,o=25,GuideTip.instance().isGuiding&&this.gotoGuide();else if(1==a)r=ConstUtil.PK_ITEM_INK,o=30;else if(2==a)r=ConstUtil.PK_ITEM_CONFUSE,o=30;else if(3==a&&(r=ConstUtil.PK_ITEM_PROTECT,this.protectDuration1>0))return void GameUtil.showPKToast("当前保护罩生效中");if(0!=r){var l=this.pkModel.getItemByIdx(r);if(l.num>0){if(this.countDownObj[r]&&this.countDownObj[r]>0)return void GameUtil.showPKToast("冷却中...");AppCenter.uploadActivityLog("1020063","click","entry","",r+""),this.countDownObj[r]=o,this.pkModel.sendUseItemInfo(r)}else GameUtil.showPKToast("数量不足");GameSound.instance().playSound("btn")}}else if(i==this.tipBtn)GameSound.instance().playSound("btn"),this.refreshTip(),this.gotoGuide(),AppCenter.uploadActivityLog("1020062","click","entry");else if(i==this.giveupBtn){GameSound.instance().playSound("btn");var h=new ConfirmView;h.open(function(t){t&&e.pkModel.sendGiveupGameInfo()}),AppCenter.uploadActivityLog("1020065","click","entry")}else if(i==this.chatBtn)this.showChatDialog(),GameSound.instance().playSound("btn");else if(n.search("chat_")>=0){this.showChatDialog(!0);var c=i.text;this.pkModel.sendUseEmojiInfo(c),GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1020064","click","entry")}else if(i==this.headImg1&&(this.xchattimes++,this.xchattimes>=10)){var d=["你是谁？你这么牛叉啊！有本事放学别走","虐你，简直就是易如反掌！","哈哈哈哈哈哈哈哈哈哈","你敢赢我的话，我就死给你看！"];this.pkModel.sendUseEmojiInfo(d[~~(d.length*Math.random())]),this.xchattimes=0}},e.prototype.loop=function(t){if(this.isStart){var e=this.curTotalTime-t;this.timeTxt.text=TimeUtil.getMSTimeStr(e),0>=e&&(this.isStart=!1,this.pkModel.sendResultInfo())}this.countDownObj&&(this.refreshItemTime(ConstUtil.PK_ITEM_GLASS,this.itemLabelArr[0]),this.refreshItemTime(ConstUtil.PK_ITEM_INK,this.itemLabelArr[1]),this.refreshItemTime(ConstUtil.PK_ITEM_CONFUSE,this.itemLabelArr[2]),this.refreshItemTime(ConstUtil.PK_ITEM_PROTECT,this.itemLabelArr[3])),this.updateTime(t)},e.prototype.updateTime=function(t){if(this.inkDuration>=t){var e=this.inkDuration-t;this.timeLeft&&(this.timeLeft.textFlow=[{text:e+"s",style:{textColor:6487551}},{text:"后消失"}]),0>=e&&this.removeInk()}if(this.protectDuration1<t&&this.removeProtect(1),this.protectDuration2<t&&this.removeProtect(2),this.bubbleChatDuration1>0&&(this.bubbleChatDuration1--,this.bubbleChatDuration1<=0&&this.chatBubbleGrp1&&this.chatBubbleGrp1.parent&&this.chatBubbleGrp1.parent.removeChild(this.chatBubbleGrp1)),this.bubbleChatDuration2>0&&(this.bubbleChatDuration2--,this.bubbleChatDuration2<=0&&this.chatBubbleGrp2&&this.chatBubbleGrp2.parent&&this.chatBubbleGrp2.parent.removeChild(this.chatBubbleGrp2)),this.tipsTime>0&&(this.tipsTime--,this.tipsTime<=0&&this.refreshTip()),this.itemBtnArr&&(this.glassTipTime++,this.glassTipTime>=20)){var i=this.pkModel.getItemByIdx(ConstUtil.PK_ITEM_GLASS);if(i.num>0){var n=this.itemBtnArr[0];egret.Tween.removeTweens(n),egret.Tween.get(n).to({x:52},80).to({x:40},80).to({x:50},80).to({x:42},80).to({x:46},80),this.glassTipTime=15}}},e.prototype.refreshItemTime=function(t,e){var i=this.countDownObj[t];i>0&&(i--,0>=i?(e.textColor=16777215,e.text=this.getItemLabel(t)):(e.text=TimeUtil.getMSTimeStr(i),e.textColor=16777091),this.countDownObj[t]=i)},e.prototype.getItemLabel=function(t){return t==ConstUtil.PK_ITEM_GLASS?"放大镜":t==ConstUtil.PK_ITEM_INK?"墨汁":t==ConstUtil.PK_ITEM_CONFUSE?"重排":t==ConstUtil.PK_ITEM_PROTECT?"保护罩":""},e.prototype.startGame=function(){var t=this;this.isStart=!0,AppCenter.nativeCache(ConstUtil.PK_NEW_GAME_UI_CACHE,"2").then(function(e){e&&e.value||(e={value:""}),e.value||(GuideTip.instance().guideIndex=0,t.gotoGuide(!0),AppCenter.nativeCache(ConstUtil.PK_NEW_GAME_UI_CACHE,"1","true"))})},e.prototype.gotoGuide=function(t){if(void 0===t&&(t=!1),t||GuideTip.instance().isGuiding){var e=GuideTip.instance().guideIndex;if(4>e){for(var i=this.topicInfo.words,n=this.topicInfo.chars,a=i[0],s=n.length,r=void 0,o=0;s>o;o++)if(n[o]==a[e]){if(this.wordsList[o].selected)continue;r=this.wordsList[o];break}if(!r)return void GuideTip.instance().close();var l=r.getBounds(),h=r.parent.localToGlobal(r.x,r.y);l.x=h.x,l.y=h.y,GuideTip.instance().playGuide(l,e)}else if(4==e){var h=this.progress1.parent.localToGlobal(this.progress1.x,this.progress1.y),l=new egret.Rectangle(h.x,h.y,175,30);l.x=h.x,l.y=h.y,GuideTip.instance().playGuide(l,e,"您每完成一个成语\n进度条都会前进一步哦！",!0)}else if(5==e){var h=this.tipBtn.parent.localToGlobal(this.tipBtn.x,this.tipBtn.y),l=new egret.Rectangle(h.x,h.y,this.tipBtn.width,this.tipBtn.height);GuideTip.instance().playGuide(l,e,"觉得题目太难\n也可以瞄一眼提示哦！")}else if(6==e){var l=this.itemBtnArr[0].getBounds(),h=this.itemBtnArr[0].parent.localToGlobal(this.itemBtnArr[0].x,this.itemBtnArr[0].y);l.x=h.x,l.y=h.y,l.width+=30,l.height+=20,GuideTip.instance().playGuide(l,e,"有效的使用游戏道具\n可提升您的胜率哦")}else GuideTip.instance().close();e++,GuideTip.instance().guideIndex=e}},e.prototype.refreshTip=function(){if(this.topicInfo){var t=this.topicInfo.hints;if(t&&0!=t.length){this.tipsTime=10;for(var e=t.length,i=[],n=0;e>n;n++)t[n]&&i.push(t[n]);this.tipsTxt.text=i[~~(i.length*Math.random())],this.tipsTxt.x=this.tipMask.x+2,egret.Tween.removeTweens(this.tipsTxt),this.tipsTxt.width>this.tipMask.width&&egret.Tween.get(this.tipsTxt,{loop:!0}).to({x:674-this.tipsTxt.width},8e3),i=null
}}},e.prototype.reset=function(){for(var t=this.idiomTxtArr.length,e=0;t>e;e++)this.idiomTxtArr[e].text="",this.idiomBgArr[e].source="dispelPk_json.dpk_answerbg",this.idiomBgArr[e].visible=!0,this.idiomTxtArr[e].visible=!0;for(var i=this.wordsList.length,e=0;i>e;e++)this.wordsList[e].reset(),this.wordsList[e].x=this.wordsPoints[e].x,this.wordsList[e].y=this.wordsPoints[e].y,this.wordsList[e].visible=!0;this.countDownObj[ConstUtil.PK_ITEM_GLASS]=0,this.countDownObj[ConstUtil.PK_ITEM_INK]=0,this.countDownObj[ConstUtil.PK_ITEM_CONFUSE]=0,this.countDownObj[ConstUtil.PK_ITEM_PROTECT]=0,this.itemLabelArr&&(this.itemLabelArr[0].text=this.getItemLabel(ConstUtil.PK_ITEM_GLASS),this.itemLabelArr[1].text=this.getItemLabel(ConstUtil.PK_ITEM_INK),this.itemLabelArr[2].text=this.getItemLabel(ConstUtil.PK_ITEM_CONFUSE),this.itemLabelArr[3].text=this.getItemLabel(ConstUtil.PK_ITEM_PROTECT),this.itemLabelArr[0].textColor=this.itemLabelArr[1].textColor=this.itemLabelArr[2].textColor=this.itemLabelArr[3].textColor=16777215);var n=~~((new Date).getTime()/1e3);this.comboCurTime=n,this.curTotalTime=n+120,this.comboCnt=0,this.inkDuration=0,this.protectDuration1=0,this.protectDuration2=0,this.glassTipTime=0,this.isStart=!1,this.removeInk(),this.removeProtect(),this.showChatDialog(!0),this.chatBubbleGrp1&&this.chatBubbleGrp1.parent&&this.chatBubbleGrp1.parent.removeChild(this.chatBubbleGrp1),this.chatBubbleGrp2&&this.chatBubbleGrp2.parent&&this.chatBubbleGrp2.parent.removeChild(this.chatBubbleGrp2)},e.prototype.setTopicInfo=function(t){var e=this;this.reset(),this.topicInfo=t;for(var i=t.words,n=t.chars,a=n.length,s=this.wordsList.length,r=0;s>r;r++)a>r?this.wordsList[r].setWord(n[r]):this.wordsList[r].visible=!1;for(var o=i.length,l=this.idiomBgArr.length,r=0;l>r;r++)this.idiomBgArr[r].visible=o>r,this.idiomTxtArr[r].visible=o>r;this.score1=0,this.score2=0,this.scoreTxt1.text="得分:0",this.scoreTxt2.text="得分:0",this.prgmask1.width=0,this.prgmask2.width=0,this.answerArr.length=0,this.answerCopyArr.length=0,this.timeTxt.text=TimeUtil.getMSTimeStr(120),this.refreshItemsCnt(ConstUtil.PK_ITEM_GLASS),this.refreshItemsCnt(ConstUtil.PK_ITEM_INK),this.refreshItemsCnt(ConstUtil.PK_ITEM_CONFUSE),this.refreshItemsCnt(ConstUtil.PK_ITEM_PROTECT),this.refreshTip();var h=this.pkModel.getRoomUserInfo(),c=this.pkModel.getRoomUserInfo(!1);h&&GameUtil.getHeadIconByUrl(h.figureurl).then(function(t){e.headImg1.source=t}),c&&GameUtil.getHeadIconByUrl(c.figureurl).then(function(t){e.headImg2.source=t})},e.prototype.refreshItemsCnt=function(t){var e=this.pkModel.getItemByIdx(t);t==ConstUtil.PK_ITEM_GLASS?this.itemCntArr[0].text=e.num+"/"+e.max:t==ConstUtil.PK_ITEM_INK?this.itemCntArr[1].text=e.num+"/"+e.max:t==ConstUtil.PK_ITEM_CONFUSE?this.itemCntArr[2].text=e.num+"/"+e.max:t==ConstUtil.PK_ITEM_PROTECT&&(this.itemCntArr[3].text=e.num+"/"+e.max)},e.prototype.checkResult=function(t){if(void 0===t&&(t=this.answerArr),!(t.length<4)){if(t.length>4){for(var e=0,i=t;e<i.length;e++){var n=i[e];this.wordsList[n].reset()}return void(t.length=0)}for(var a="",s=this.topicInfo.chars,r=this.topicInfo.words,o=0,l=t;o<l.length;o++){var n=l[o];a+=s[n]}if(r.indexOf(a)<0){for(var h=0,c=t;h<c.length;h++){var n=c[h];this.wordsList[n].playFail()}t.length=0}else{var d=~~((new Date).getTime()/1e3);if(d-this.comboCurTime<15||0==this.comboCurTime?this.comboCnt++:this.comboCnt=0,this.comboCurTime=d,0==this.answerCopyArr.length){for(var p=0,u=t;p<u.length;p++){var n=u[p];this.answerCopyArr.push(n)}this.pkModel.sendFinishOneInfo(a,this.comboCnt)}else{for(var g=0,v=t;g<v.length;g++){var n=v[g];this.wordsList[n].reset()}this.answerCopyArr.length=0}t.length=0}}},e.prototype.finishOne=function(t){var e=this,i=this.pkModel.isMySelf(t.accid),n=t.finish,a=(this.topicInfo.chars,this.topicInfo.words),s=this.topicInfo.hints,r=a.length;if(i){for(var o=this.idiomTxtArr.length,l=n.length,h=-1,c=0;o>c;c++)if(""==this.idiomTxtArr[c].text&&l>c){h=c;break}this.scoreTxt1.text="得分:"+(this.score1+=parseInt(t.points));var d=t.combo,p=this.getEffType(n.length>5?1:0);if(d>1?(p="combo"+d,GameSound.instance().playSound("combo")):GameSound.instance().playSound(p),GameUtil.playPKEffect(p),n.length==r&&this.pkModel.sendWinGameInfo(),0>h)return void(this.answerArr.length=0);var u=n[h];s&&(s[a.indexOf(u)]=""),this.glassTipTime=0,this.refreshTip(),this.playCompleteEffect(h).then(function(){e.idiomTxtArr[h].text=n[h],e.idiomBgArr[h].source="dispelPk_json.dpk_idiombg"})}else this.scoreTxt2.text="得分:"+(this.score2+=parseInt(t.points));var g=i?this.prgmask1:this.prgmask2;g.width=n.length/r*this.progressWidth;var v=i?this.toastTxt1:this.toastTxt2;v.text="+"+t.points;var m=v.y;egret.Tween.get(v).to({y:m-60},800).call(function(){v.y=m,v.text=""})},e.prototype.showEmoji=function(t){var e=this.pkModel.isMySelf(t.from_accid);this.showBubbleChat(e,t.content),this.showChatDialog(!0)},e.prototype.showUseItem=function(t){var e=this.pkModel.isMySelf(t.from_accid);if(e){var i=(this.pkModel.myPkInfo,this.pkModel.getItemByIdx(t.item_id)),n=i.num;n--,i.num=n,this.refreshItemsCnt(t.item_id)}var a=t.item_id;a==ConstUtil.PK_ITEM_GLASS?(e||GameUtil.showPKToast("你的对手使用了一个放大镜"),this.useBigGlass(e)):a==ConstUtil.PK_ITEM_INK?(e||GameUtil.showPKToast("你的对手对你使用了一个墨汁道具"),this.useInkEff(e)):a==ConstUtil.PK_ITEM_CONFUSE?(e||GameUtil.showPKToast("你的对手对你使用了一个重排道具"),this.useConfuseEff(e)):a==ConstUtil.PK_ITEM_PROTECT&&(e||GameUtil.showPKToast("你的对手使用了一个保护罩"),this.useProtectedEff(e))},e.prototype.useBigGlass=function(t){if(t){for(var e=this.topicInfo.chars,i=this.topicInfo.words,n=e.length,a=this.idiomTxtArr.length,s=i.length,r="",o=0,l=this.answerArr;o<l.length;o++){var h=l[o];this.wordsList[h].reset()}this.answerArr.length=0;for(var c=0;s>c;c++){for(var d=i[c],p=!1,u=0;a>u;u++)if(d==this.idiomTxtArr[u].text){p=!0;break}if(!p){r=d;break}}for(var g=[],c=0;4>c;c++)for(var v=r.charAt(c),u=0;n>u;u++)if(this.wordsList[u].visible&&e[u]==v&&g.indexOf(u)<0){g.push(u);break}this.checkResult(g)}this.playUseItemEff("dispelPk_json.dpk_bigglass",t?1:0,1)},e.prototype.useInkEff=function(t){if(t)this.removeProtect(2);else{if(this.protectDuration1>0)return this.removeProtect(1),void GameUtil.showPKToast("保护罩成功抵御一次攻击");if(!this.itemEffImg){var e=new eui.Image;e.source="dispelPk_json.dpk_inkbg",e.anchorOffsetX=217,e.anchorOffsetY=192,e.x=SpriteUtil.stageCenterX,e.touchEnabled=!1,this.itemEffImg=e}if(!this.timeLeft){var i=new eui.Label;i.width=434,i.size=32,i.bold=!0,i.textAlign="center",i.anchorOffsetX=217,i.x=SpriteUtil.stageCenterX,i.touchEnabled=!1,this.timeLeft=i}this.itemEffImg.y=this.wordGrp.y+this.wordGrp.height/2,this.itemEffImg.scaleX=3,this.itemEffImg.scaleY=3,this.timeLeft.textFlow=[{text:"10s",style:{textColor:6487551}},{text:"后消失"}],this.timeLeft.y=this.itemEffImg.y-16,egret.Tween.get(this.itemEffImg).to({scaleX:2,scaleY:1.5},220),this.inkDuration=~~((new Date).getTime()/1e3)+10,this.addChild(this.itemEffImg),this.addChild(this.timeLeft)}this.playUseItemEff("dispelPk_json.dpk_ink",t?1:0)},e.prototype.useConfuseEff=function(t){if(t)this.removeProtect(2);else{if(this.protectDuration1>0)return this.removeProtect(1),void GameUtil.showPKToast("保护罩成功抵御一次攻击");for(var e=[],i=0,n=this.wordsList;i<n.length;i++){var a=n[i];a.visible&&e.push(a.index)}e.sort(function(t,e){return Math.random()>.5?1:-1});for(var s=GameUtil.getCntRandomFromRange(0,this.wordsPoints.length,e.length),r=e.length,o=0;r>o;o++){var l=e[o];egret.Tween.get(this.wordsList[l]).to({x:this.wordsPoints[s[o]].x,y:this.wordsPoints[s[o]].y},200)}}this.playUseItemEff("dispelPk_json.dpk_refresh",t?1:0)},e.prototype.useProtectedEff=function(t){var e=this,i=~~((new Date).getTime()/1e3)+30;t?(this.removeProtect(1),this.protectHeadAmarture1=SpriteUtil.createDragonBones("baohuzhao_ske_json","baohuzhao_tex"),this.protectHeadAmarture1.x=this.headImg1.x+60,this.protectHeadAmarture1.y=this.headImg1.y+60,this.topGrp.addChildAt(this.protectHeadAmarture1,3),this.protectHeadAmarture1.touchEnabled=!1,this.protectHeadAmarture1.touchChildren=!1,this.protectDuration1=i,this.protectHeadAmarture1.animation.play("newAnimation",-1)):(this.removeProtect(2),this.protectHeadAmarture2=SpriteUtil.createDragonBones("baohuzhao_ske_json","baohuzhao_tex"),this.protectHeadAmarture2.x=this.headImg2.x+60,this.protectHeadAmarture2.y=this.headImg2.y+60,this.topGrp.addChildAt(this.protectHeadAmarture2,4),this.protectHeadAmarture2.touchEnabled=!1,this.protectHeadAmarture2.touchChildren=!1,this.protectDuration2=i,this.protectHeadAmarture2.animation.play("newAnimation",-1)),t&&(this.pkbgImg.source="dispelPk_json.dpk_protectbg",SpriteUtil.createDynamicDragonBones("xdabaohuzhao","resource/hotAssets/").then(function(t){var i=t;i.x=SpriteUtil.stageCenterX,i.y=e.pkbgImg.y+430,i.animation.play("newAnimation",-1),e.addChildAt(i,2),i.touchEnabled=!1,i.touchChildren=!1,e.protectAmarture=i}))},e.prototype.removeInk=function(){this.itemEffImg&&this.itemEffImg.parent&&this.itemEffImg.parent.removeChild(this.itemEffImg),this.timeLeft&&(this.timeLeft.text="",this.timeLeft.parent&&this.timeLeft.parent.removeChild(this.timeLeft))},e.prototype.removeProtect=function(t){void 0===t&&(t=0),(0==t||1==t)&&(this.protectHeadAmarture1&&(this.protectHeadAmarture1.parent&&this.protectHeadAmarture1.parent.removeChild(this.protectHeadAmarture1),this.protectHeadAmarture1.dispose(),this.protectHeadAmarture1=null),this.protectAmarture&&(this.protectAmarture.parent&&(this.protectAmarture.parent.removeChild(this.protectAmarture),1==t&&GameUtil.showPKToast("保护卡失效")),this.protectAmarture.dispose(),this.protectAmarture=null),this.protectDuration1>0&&this.pkbgImg&&(this.pkbgImg.source="dispelPk_json.dpk_pkbg"),this.protectDuration1=0),(0==t||2==t)&&(this.protectHeadAmarture2&&(this.protectHeadAmarture2.parent&&this.protectHeadAmarture2.parent.removeChild(this.protectHeadAmarture2),this.protectHeadAmarture2.dispose(),this.protectHeadAmarture2=null),this.protectDuration2=0)},e.prototype.showChatDialog=function(t){if(void 0===t&&(t=!1),egret.Tween.removeTweens(this.chatDlgGrp),this.chatDlgGrp){if(t)return void(this.chatDlgGrp.parent&&this.chatDlgGrp.parent.removeChild(this.chatDlgGrp));this.chatDlgGrp.parent?this.chatDlgGrp.parent.removeChild(this.chatDlgGrp):(this.addChild(this.chatDlgGrp),this.chatDlgGrp.scaleX=0,this.chatDlgGrp.scaleY=0,egret.Tween.get(this.chatDlgGrp).to({scaleX:1,scaleY:1},50))}},e.prototype.showBubbleChat=function(t,e){var i=t?this.chatBubbleGrp1:this.chatBubbleGrp2,n=i.getChildAt(1);n.text=e;var a=i.getChildAt(0);a.width=n.width+40,t?this.bubbleChatDuration1=3:(i.x=this.headImg2.x-a.width+30,a.x=a.width,this.bubbleChatDuration2=3),this.addChild(i)},e.prototype.playUseItemEff=function(t,e,i){var n=this;return void 0===e&&(e=0),void 0===i&&(i=0),new Promise(function(a,s){if(!t)return void a();var r=new eui.Image;r.source=t,n.addChild(r);var o=e?n.headImg1.x+n.topGrp.x:n.headImg2.x+n.topGrp.x,l=e?n.headImg1.y+n.topGrp.y:n.headImg2.y+n.topGrp.y,h=e?n.headImg2.x+n.topGrp.x:n.headImg1.x+n.topGrp.x,c=e?n.headImg2.y+n.topGrp.y:n.headImg1.y+n.topGrp.y;r.x=o,r.y=l,0==i?egret.Tween.get(r).to({x:h,y:c},800).call(function(){r.parent&&r.parent.removeChild(r),egret.Tween.removeTweens(r),r=null,a()}):GameUtil.playLoopTween(r,{scaleX:1,scaleY:1},{scaleX:1.1,scaleY:1.1},1,400).then(function(){r.parent&&r.parent.removeChild(r),egret.Tween.removeTweens(r),r=null,a()})})},e.prototype.getEffType=function(t){void 0===t&&(t=0);var e=["good","cool","nice","excellent"],i=["perfect","amazing","unbelievable"];return 0==t?e[~~(e.length*Math.random())]:1==t?i[~~(i.length*Math.random())]:"good"},e.prototype.playCompleteEffect=function(t){var e=this;return new Promise(function(i,n){var a=e.answerCopyArr;if(a.length<=0)return void i();for(var s=e.idiomBgArr[t],r=s.parent.localToGlobal(s.x+s.width/2,s.y),o=a.length,l=function(t){var n=e.wordsList[a[t]],s=n.parent.localToGlobal(n.x,n.y),o=180+180/Math.PI*Math.atan((r.x-s.x)/(s.y-r.y)),l=e.getPools();l.x=s.x+42,l.y=s.y+42,l.rotation=o;var h=e.getExplosionPools();h.x=l.x,h.y=l.y,h.animation.timeScale=.8,h.animation.play("newAnimation",1),egret.Tween.get(n).to({alpha:0},500).call(function(){n.visible=!1,n.alpha=1});var c=egret.Tween.get(l);c.to({x:r.x,y:r.y},500).to({scaleY:0,scaleX:.1,alpha:0},100).call(function(){l.parent&&l.parent.removeChild(l),i()})},h=0;o>h;h++)l(h);GameSound.instance().playSound("remove"),e.answerCopyArr.length=0})},e.prototype.getPools=function(){this.lightPools||(this.lightPools=[]);for(var t,e=0,i=this.lightPools;e<i.length;e++){var n=i[e];if(!n.parent){t=n;break}}return t||(t=SpriteUtil.createImage("dispelPk_json#dpk_zyslight"),t.touchEnabled=!1,t.anchorOffsetY=0,this.lightPools.push(t)),t.alpha=1,t.scaleX=.5,t.scaleY=2,Game.instance().addTop(t),t},e.prototype.getExplosionPools=function(){this.explosionPools||(this.explosionPools=[]);for(var t,e=0,i=this.explosionPools;e<i.length;e++){var n=i[e];if(!n.parent){t=n;break}}return t||(t=SpriteUtil.createDragonBones("bisai_ske_json","bisai_tex"),t.touchEnabled=!1,this.explosionPools.push(t),t.addEventListener(dragonBones.EgretEvent.COMPLETE,function(e){t.parent&&(t.animation.stop(),t.parent.removeChild(t))},this)),Game.instance().addTop(t),t},e.prototype.hangUp=function(){this.parent&&(this.reset(),egret.Tween.removeTweens(this.itemBtnArr[0]),this.parent.removeChild(this),GuideTip.instance().close())},e}(eui.Component);__reflect(PKGameUI.prototype,"PKGameUI",["eui.UIComponent","egret.DisplayObject"]);var PKHelpView=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/PKHelpView.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){t.target==this.closeBtn&&(GameSound.instance().playSound("btn"),this.close())},e.prototype.open=function(){t.prototype.open.call(this),AppCenter.uploadActivityLog("1020053","show","page")},e.prototype.close=function(){t.prototype.close.call(this);var e=PKModel.instance().pkViews,i=e.indexOf(this);i>=0&&e.splice(i,1),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.destroy(),AppCenter.uploadActivityLog("1020053","close","page")},e}(BaseEuiView);__reflect(PKHelpView.prototype,"PKHelpView");var PKMatchUI=function(t){function e(){var e=t.call(this)||this;return e.timeOutId=0,e.skinName="resource/game_skins/PKMatchUI.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.nameTxt1.text="正在匹配中...",this.nameTxt2.text="",this.headImg1.mask=this.headMask1,this.headImg2.mask=this.headMask2,this.x=SpriteUtil.stageCenterX-this.width/2,this.y=SpriteUtil.stageCenterY-this.height/2-120},e.prototype.refresh=function(){return __awaiter(this,void 0,void 0,function(){var t,e=this;return __generator(this,function(i){return this.playerGrp1.x=SpriteUtil.stageWidth,egret.Tween.get(this.playerGrp1).to({x:66},300),this.playerGrp2.x=-566,egret.Tween.get(this.playerGrp2).to({x:115},300),this.headImg1.source="menuover_json.headimg",this.nameTxt1.text="正在匹配中...",t=PKModel.instance().myPkInfo,GameUtil.getHeadIconByUrl(t.user.figureurl).then(function(t){e.headImg2.source=t}),this.nameTxt2.text=t.user.nickname,this.playWave(),GameSound.instance().playSound("match"),[2]})})},e.prototype.playWave=function(){var t=this;this.wave1.alpha=1,this.wave1.scaleX=.5,this.wave1.scaleY=.5,egret.clearTimeout(this.timeOutId),egret.Tween.removeTweens(this.wave1),egret.Tween.get(this.wave1,{loop:!0}).to({scaleX:1.5,scaleY:1.5,alpha:0},2e3),this.timeOutId=egret.setTimeout(function(){egret.Tween.removeTweens(t.wave2),t.wave2.alpha=1,t.wave2.scaleX=.5,t.wave2.scaleY=.5,egret.Tween.get(t.wave2,{loop:!0}).to({scaleX:1.5,scaleY:1.5,alpha:0},2e3)},this,1e3)},e.prototype.setEnemyInfo=function(){var t=this,e=PKModel.instance().getRoomUserInfo(!1);e&&(GameUtil.getHeadIconByUrl(e.figureurl).then(function(e){t.headImg1.source=e}),this.nameTxt1.text=e.nickname)},e.prototype.hangUp=function(){this.parent&&(this.parent.removeChild(this),egret.clearTimeout(this.timeOutId),egret.Tween.removeTweens(this.wave1),egret.Tween.removeTweens(this.wave2))},e}(eui.Component);__reflect(PKMatchUI.prototype,"PKMatchUI",["eui.UIComponent","egret.DisplayObject"]);var PKMenuUI=function(t){function e(){var e=t.call(this)||this;return e.countTime1=0,e.countTime2=0,e.pkModel=PKModel.instance(),e.skinName="resource/game_skins/PKMenuUI.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.mainGrp.y=GameData.ipxHgt,this.x=SpriteUtil.stageCenterX-this.width/2,this.raceBtn1.y=SpriteUtil.stageHeight-235,this.raceBtn2.y=SpriteUtil.stageHeight-235;for(var e=[],i=0;4>i;i++)e.push(this["cntTxt"+i]);this.cntTxtArr=e;for(var n=[],i=0;3>i;i++)n.push(this["achieve"+i]);this.achieveTxtArr=n,this.raceBtn1.visible=!1;var a=SpriteUtil.createDragonBones("paoguang_ske_json","paoguang_tex");a.animation.play("newAnimation",-1),a.x=this.raceBtn1.x+this.raceBtn1.width/2,a.y=this.raceBtn2.y+this.raceBtn1.height/2,this.addChild(a),a.touchEnabled=!0,this.raceAnimBtn=a,this.createMissionItems(),this.showHandTip(),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),EventCenter.instance().addEventListener(GameEvent.UPDATE_MISSION_LIST_EVENT,this.refreshMission,this)},e.prototype.$onAddToStage=function(e,i){t.prototype.$onAddToStage.call(this,e,i),AppCenter.uploadActivityLog("1020075","show","page")},e.prototype.touchHandler=function(t){var e=this;if(t.target==this.homeBtn){GameSound.instance().playSound("btn");var i=new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME});EventCenter.instance().dispatchEvent(i),AppCenter.uploadActivityLog("1020074","click","entry")}else if(t.target==this.addBtn){if(this.countTime1>0)return;GameSound.instance().playSound("btn");var n=this.pkModel.myPkInfo.pass_info,a=new PKTicketView;n.pass>0?a.currentState="status_yeshave":a.currentState="status_nohave",AppCenter.uploadActivityLog("1020050","click","entry"),a.open(function(){e.setInfo()}),this.pkModel.pkViews.push(a)}else if(t.target==this.rewardBtn)AppCenter.showVideoAd("rewardvideohqdj").then(function(){e.pkModel.getPKItemsInfo().then(function(t){e.showAdded(t)})}),AppCenter.uploadActivityLog("1020054","click","entry"),GameSound.instance().playSound("btn");else if(t.target==this.helpBtn){var a=new PKHelpView;a.open(),this.pkModel.pkViews.push(a),GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1020052","click","entry")}else if(t.target==this.itemBtn1)this.showItemTip(this.itemBtn1,1);else if(t.target==this.itemBtn2)this.showItemTip(this.itemBtn2,2);else if(t.target==this.itemBtn3)this.showItemTip(this.itemBtn3,3);else if(t.target==this.itemBtn4)this.showItemTip(this.itemBtn4,4);else if(t.target==this.raceBtn1||t.target==this.raceAnimBtn){AppCenter.uploadActivityLog("1020058","click","entry");var s=PKModel.instance().myPkInfo.pass_info;if(s.pass>0)EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.START_MATCH_EVENT));else{var a=new PKTicketView;a.currentState="status_nohave",a.open(function(){e.setInfo()}),this.pkModel.pkViews.push(a)}AppCenter.nativeCache(ConstUtil.PK_START_GAME_CACHE,"1","1"),GuideTip.instance().close(),GameSound.instance().playSound("btn")}else if(t.target==this.raceBtn2){AppCenter.uploadActivityLog("1020075","click","page"),GameSound.instance().playSound("btn");var s=PKModel.instance().myPkInfo.pass_info;if(s.pass>0)EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.GOTO_PK_SCENE_EVENT,{type:ConstUtil.PK_FRIEND_STATUS}));else{var a=new PKTicketView;a.currentState="status_nohave",a.open(function(){e.setInfo()}),this.pkModel.pkViews.push(a)}}},e.prototype.showHandTip=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,AppCenter.nativeCache(ConstUtil.PK_START_GAME_CACHE,"2")];case 1:return t=i.sent(),t&&t.value||(t={value:0}),1==t.value?[2]:(AppCenter.nativeCache(ConstUtil.PK_START_GAME_CACHE,"1","1"),e=this.raceBtn1.parent.localToGlobal(this.raceBtn1.x,this.raceBtn1.y),GuideTip.instance().playGuide(new egret.Rectangle(e.x,e.y,this.raceBtn1.width,this.raceBtn1.height),1),[2])}})})},e.prototype.showItemTip=function(t,e){if(e){var i=this.itemTipGrp;if(i){GameSound.instance().playSound("btn");var n="",a=50;1==e?n="自动完成一个成语":2==e?n="对手棋盘喷上墨汁干扰":3==e?n="使对手棋盘重新排列":4==e&&(n="防御一次对手的攻击",a=40),i.getChildAt(1).text=n;var s=t.parent.localToGlobal(t.x,t.y);i.visible=!0,i.alpha=1,i.x=s.x+a,i.y=s.y,egret.Tween.removeTweens(i);var r=egret.Tween.get(i);r.wait(2e3),r.to({alpha:0},300).call(function(){i.visible=!1})}}},e.prototype.loop=function(t){this.countTime1>0&&(this.countTime1--,this.countTime1<=0?(this.ticketTimeTxt.visible=!1,this.addBtn.source="dispelPk_json.dpk_addbtn"):(this.ticketTimeTxt.visible=!0,this.ticketTimeTxt.text=TimeUtil.getMSTimeStr(this.countTime1))),this.countTime2>0&&(this.countTime2--,this.countTime2<=0?(this.countTime2=0,this.itemTimeTxt.visible=!1,this.rewardBtn.visible=!0):this.itemTimeTxt.text=TimeUtil.getMSTimeStr(this.countTime2))},e.prototype.showAdded=function(t){var e=this;if(t[ConstUtil.PK_ITEM_GLASS]>0){this.toastTxt0.text="+"+t[ConstUtil.PK_ITEM_GLASS],this.toastTxt0.visible=!0;var i=296;egret.Tween.get(this.toastTxt0).to({y:i-40},800).call(function(){e.toastTxt0.visible=!1,e.toastTxt0.y=296})}if(t[ConstUtil.PK_ITEM_INK]>0){this.toastTxt1.text="+"+t[ConstUtil.PK_ITEM_INK],this.toastTxt1.visible=!0;var i=296;egret.Tween.get(this.toastTxt1).to({y:i-40},800).call(function(){e.toastTxt1.visible=!1,e.toastTxt1.y=296})}if(t[ConstUtil.PK_ITEM_CONFUSE]>0){this.toastTxt2.text="+"+t[ConstUtil.PK_ITEM_CONFUSE],this.toastTxt2.visible=!0;var i=296;egret.Tween.get(this.toastTxt2).to({y:i-40},800).call(function(){e.toastTxt2.visible=!1,e.toastTxt2.y=296})}if(t[ConstUtil.PK_ITEM_PROTECT]>0){this.toastTxt3.text="+"+t[ConstUtil.PK_ITEM_PROTECT],this.toastTxt3.visible=!0;var i=296;egret.Tween.get(this.toastTxt3).to({y:i-40},800).call(function(){e.toastTxt3.visible=!1,e.toastTxt3.y=296})}this.setInfo()},e.prototype.setInfo=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n,a;return __generator(this,function(s){switch(s.label){case 0:return this.validateNow(),this.ticketTimeTxt.visible=!1,this.coinTxt.text=GameModel.instance().totalCoin+"",t=this.pkModel.myPkInfo,e=t.history,i=t.gold,n=t.pass_info,this.ticketTxt.text=n.pass+"/"+n.max,this.achieveTxtArr[0].text="x"+e.win,this.achieveTxtArr[1].text="x"+e.lose,this.achieveTxtArr[2].text=e.win_rate+"%",this.refreshItems(ConstUtil.PK_ITEM_GLASS,0),this.refreshItems(ConstUtil.PK_ITEM_INK,1),this.refreshItems(ConstUtil.PK_ITEM_CONFUSE,2),this.refreshItems(ConstUtil.PK_ITEM_PROTECT,3),this.addBtn.visible=n.pass<6,this.checkTicketTime(),a=this,[4,HttpServer.getBattleMissionData()];case 1:return a._missionData=s.sent(),this.refreshMission(),[2]}})})},e.prototype.refreshItems=function(t,e){var i=this.pkModel.getItemByIdx(t);this.cntTxtArr[e].text=i.num+"/"+i.max},e.prototype.createMissionItems=function(){for(var t=[],e=new eui.Group,i=0;3>i;i++){var n=new MissionItem;n.y=154*i,n.currentState="battle",e.addChild(n),t.push(n)}this.missionItems=t,this.miContainer=e,this.mScroller.viewport=e},e.prototype.refreshMission=function(){if(this._missionData){this.miContainer.removeChildren();var t=this._missionData;t=this.sortMissionData(t);for(var e=t.length,i=this.missionItems.length,n=0,a=0;e>a;a++){var s=void 0;i>n?s=this.missionItems[n++]:(s=new MissionItem,s.y=154*n++,s.currentState="battle",this.missionItems.push(s)),s.visible=!0,s.setData(t[a]),this.miContainer.addChild(s)}this.mScroller.viewport.scrollV=0}},e.prototype.sortMissionData=function(t){for(var e=[],i=[],n=[],a=0,s=t;a<s.length;a++){var r=s[a];1==r.status?e.push(r):0==r.status?i.push(r):n.push(r)}return e.concat(i,n)},e.prototype.checkTicketTime=function(){var t=this.pkModel.myPkInfo,e=~~((new Date).getTime()/1e3);t.pass_cd<=e||t.pass_info.pass>=6?(this.countTime1=0,this.ticketTimeTxt.visible=!1,this.addBtn.source="dispelPk_json.dpk_addbtn"):(this.countTime1=t.pass_cd-e,this.ticketTimeTxt.text=TimeUtil.getMSTimeStr(this.countTime1),this.ticketTimeTxt.visible=!0,this.addBtn.source="dispelPk_json.dpk_addbtngray"),t.items_cd<=e?(this.countTime2=0,this.itemTimeTxt.visible=!1,this.rewardBtn.visible=!0,GameUtil.playBreathAnim(this.rewardBtn,{scaleX:1,scaleY:1},{scaleX:1.2,scaleY:1.2})):(this.itemTimeTxt.visible=!0,this.rewardBtn.visible=!1,this.countTime2=t.items_cd-e,this.itemTimeTxt.text=TimeUtil.getMSTimeStr(this.countTime2))},e.prototype.hangUp=function(){this.parent&&(this.parent.removeChild(this),AppCenter.uploadActivityLog("1020049","close","page"))},e}(eui.Component);__reflect(PKMenuUI.prototype,"PKMenuUI",["eui.UIComponent","egret.DisplayObject"]);var PKResultUI=function(t){function e(){var e=t.call(this)||this;return e.isBReady=!1,e.isAReady=!1,e.pkModel=PKModel.instance(),e.gameType=0,e.skinName="resource/game_skins/PKResultUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.x=SpriteUtil.stageCenterX-this.width/2,this.headImg1.mask=this.maskRect1,this.headImg2.mask=this.maskRect2,this.y=20+GameData.ipxHgt,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){var e=this,i=PKModel.instance().myPkInfo.pass_info;if(t.target==this.continueBtn){if(GameSound.instance().playSound("btn"),3==this.gameType){if(this.pkModel.isEnemyFlee){if(i.pass)AppCenter.uploadActivityLog("1020092","click","entry"),this.hangUp(),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.GOTO_PK_SCENE_EVENT,{type:ConstUtil.PK_FRIEND_STATUS}));else{var n=new PKTicketView;n.currentState="status_nohave",n.open(null,2),this.pkModel.pkViews.push(n)}return}AppCenter.uploadActivityLog("1020089","click","entry")}if(i.pass>0)this.pkModel.sendReadyInfo();else{var n=new PKTicketView;n.currentState="status_nohave",n.open(function(){e.isBReady&&e.pkModel.sendBroadcastInfo("video",{status:0})},1),this.pkModel.pkViews.push(n)}AppCenter.uploadActivityLog("1020068","click","entry")}else if(t.target==this.homeBtn)GameSound.instance().playSound("btn"),this.pkModel.sendLeaveRoomInfo(),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.GOTO_PK_SCENE_EVENT)),AppCenter.uploadActivityLog("1020069","click","entry");else if(t.target==this.changeBtn)if(GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1020073","click","entry"),i.pass>0)this.pkModel.sendLeaveRoomInfo(),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.START_MATCH_EVENT));else{var n=new PKTicketView;n.currentState="status_nohave",n.open(function(){e.isBReady&&e.pkModel.sendBroadcastInfo("video",{status:0})},1),this.pkModel.pkViews.push(n)}else if(t.target==this.addFriendBtn){3==this.gameType?AppCenter.uploadActivityLog("1020088","click","entry"):AppCenter.uploadActivityLog("1020091","click","entry");var a=this.pkModel.getPlayAccid();HttpServer.applyFriend(a).then(function(){AppCenter.showToast("已申请~")})}},e.prototype.setReady=function(t){this.pkModel.isMySelf(t.userId)?(this.readyLabel.text="已准备，等待对方开始",this.isAReady=!0,this.isBReady&&this.pkModel.sendStartGameInfo()):(this.isBReady=!0,this.readyLabel.text="对手已准备，继续开战",this.readyImg.visible=!0,this.readyImg.scaleX=0,this.readyImg.scaleY=0,egret.Tween.get(this.readyImg).to({scaleX:1,scaleY:1},200))},e.prototype.setLeave=function(t){var e=this.pkModel.isMySelf(t.userId);e||(GameUtil.showPKToast("你的对手离开了"),3==this.gameType?(this.continueBtn.filters=[],this.readyLabel.text="对手已离开,重新邀请",this.readyLabel.textColor=9256704,this.continueBtn.touchEnabled=!0):(this.continueBtn.filters=GameUtil.getGrayFilter(),this.readyLabel.text="对手已离开",this.readyLabel.textColor=1717397,this.continueBtn.touchEnabled=!1),this.readyImg.visible=!1)},e.prototype.setBroadcast=function(t){var e=this.pkModel.isMySelf(t.accid);e||"video"==t.event&&(t.params.status?this.readyLabel.text="对手获取入场券中":this.readyLabel.text=this.isAReady?"已准备，等待对方开始":"准备")},e.prototype.setInfo=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n,a,s,r,o,l,h,c,c,c,d,p,u,g;return __generator(this,function(v){switch(v.label){case 0:for(this.gameType=t.game_type,this.validateNow(),this.isAReady=!1,this.isBReady=!1,this.readyImg.visible=!1,e=t.users,a=0,s=e;a<s.length;a++)r=s[a],this.pkModel.isMySelf(r.accid)?i=r:n=r;return o="",this.doubleFlag.visible=!1,this.pkModel.isEnemyFlee?(this.continueBtn.filters=GameUtil.getGrayFilter(),this.readyLabel.text="对手已离开",this.readyLabel.textColor=1717397,this.continueBtn.touchEnabled=!1,this.readyImg.visible=!1):(this.continueBtn.filters=null,this.continueBtn.touchEnabled=!0,this.readyLabel.text="准备",this.readyLabel.textColor=9256704),i&&(this.p1d1Txt.text=i.combo,this.p1d2Txt.text=i.points,this.p1d3Txt.text=i.use_item,this.p1d4Txt.text=i.points_ext,this.p1ScoreTxt.text=i.points+i.points_ext,this.rewardLabel.text="+"+i.gold+"金币",this.doubleFlag.visible=i.gold_double,GameModel.instance().updateCoinNum(i.gold),l=this.pkModel.myPkInfo,h=l.gold,h.today=parseInt(h.today)+parseInt(i.gold),o+=i.room_point,l.history=i.history),n&&(this.p2d1Txt.text=n.combo,this.p2d2Txt.text=n.points,this.p2d3Txt.text=n.use_item,this.p2d4Txt.text=n.points_ext,this.p2ScoreTxt.text=n.points+n.points_ext,o+=":"+n.room_point),this.scoreLabel.text=o,this.xAmarture&&(this.xAmarture.parent&&this.xAmarture.parent.removeChild(this.xAmarture),this.xAmarture.dispose()),this.pkModel.isMySelf(t.winner)?(this.winnerImg.x=this.headImg1.x+18,this.winnerImg.y=this.headImg1.y-42,GameSound.instance().playSound("win"),c=SpriteUtil.createDragonBones("shenglile_ske_json","shenglile_tex"),c.x=SpriteUtil.stageCenterX,c.y=160,this.addChild(c),c.animation.play("newAnimation",1),this.xAmarture=c):0==t.winner?(c=SpriteUtil.createDragonBones("pingshou_ske_json","pingshou_tex"),c.x=SpriteUtil.stageCenterX,c.y=160,this.addChild(c),c.animation.play("newAnimation",1),this.xAmarture=c,GameSound.instance().playSound("lose")):(c=SpriteUtil.createDragonBones("shibai_ske_json","shibai_tex"),c.x=SpriteUtil.stageCenterX,c.y=160,this.addChild(c),c.animation.play("newAnimation",1),this.xAmarture=c,this.winnerImg.x=this.headImg2.x+18,this.winnerImg.y=this.headImg2.y-42,GameSound.instance().playSound("lose")),this.addFriendBtn.visible=!t.is_friend,this.changeBtn.visible=3!=t.game_type,3==t.game_type?(this.continueBtn.filters=[],this.readyLabel.text="对手已离开",this.readyLabel.textColor=1717397,this.continueBtn.touchEnabled=!0,this.pkModel.isEnemyFlee?(AppCenter.uploadActivityLog("1020092","show","entry"),this.readyLabel.text="对手已离开,重新邀请"):(AppCenter.uploadActivityLog("1020089","show","entry"),this.readyLabel.text="再来一局"),this.continueBtn.y=969,this.readyLabel.y=1011):(this.continueBtn.y=929,this.readyLabel.y=971),d=this.pkModel.getRoomUserInfo(),p=this.pkModel.getRoomUserInfo(!1),u=this.headImg1,[4,GameUtil.getHeadIconByUrl(d.figureurl)];case 1:return u.source=v.sent(),g=this.headImg2,[4,GameUtil.getHeadIconByUrl(p.figureurl)];case 2:return g.source=v.sent(),3==this.gameType&&AppCenter.uploadActivityLog("1020087","show","page"),[2]}})})},e.prototype.hangUp=function(){this.parent&&(3==this.gameType&&AppCenter.uploadActivityLog("1020087","close","page"),this.parent.removeChild(this),this.xAmarture&&(this.xAmarture.parent&&this.xAmarture.parent.removeChild(this.xAmarture),this.xAmarture.dispose()))},e}(eui.Component);__reflect(PKResultUI.prototype,"PKResultUI",["eui.UIComponent","egret.DisplayObject"]);var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){},e.prototype.onProgress=function(t,e){var i=t/e;AppCenter.loadProgress(Math.floor(100*i))},e.prototype.close=function(){this.parent&&this.parent.removeChild(this),this.removeChildren()
},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var PKWord=function(t){function e(){var e=t.call(this)||this;return e._selected=!1,e.index=-1,e.skinName="resource/game_skins/PKWord.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.touchChildren=!1,this.touchEnabled=!0},Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t,t?(this.wordBg.source="resource/hotAssets/dpk_wordbg2.png",this.wordTxt.textColor=16777215):(this.wordBg.source="resource/hotAssets/dpk_wordbg1.png",this.wordTxt.textColor=0)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.selected=!1},e.prototype.setWord=function(t){this.wordTxt.text=t},e.prototype.playFail=function(){var t=this;this.wordTxt.textColor=16711680,GameUtil.playBreathAnim(this.wordTxt,{alpha:1},{alpha:0},150,3).then(function(){t.reset()})},e}(eui.Component);__reflect(PKWord.prototype,"PKWord",["eui.UIComponent","egret.DisplayObject"]);var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var a=RES.getRes(t);a?n(a):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var DispelPKScene=function(t){function e(){var e=t.call(this)||this;return e.gameStatus=ConstUtil.PK_IDILE_STATUS,e.pkModel=PKModel.instance(),e.matchTime=0,e.robotTime=0,e.nextTime=0,e.curTime=0,e.onlyWaitTime=0,e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=SpriteUtil.createImage("pkgamebg_jpg",!1);t.touchEnabled=!1,t.width=SpriteUtil.stageWidth,t.height=SpriteUtil.stageHeight,this.addChild(t),t.visible=!1,this.bgImage=t;var e=SpriteUtil.createImage("dispelPk_json.dpk_menuhbg",!1);e.width=SpriteUtil.stageWidth,this.addChild(e),e.visible=!1,this.menuTitleBg=e,this.pkMenuUI=new PKMenuUI,this.pkMatchUI=new PKMatchUI,this.pkGameUI=new PKGameUI,this.pkResultUI=new PKResultUI,this.pkFriendUI=new PKFriendUI},e.prototype.addEvent=function(){EventCenter.instance().addEventListener(PKEvent.GOTO_PK_SCENE_EVENT,this.handleGotoScene,this),EventCenter.instance().addEventListener(PKEvent.START_MATCH_EVENT,this.startMatch,this),EventCenter.instance().addEventListener(PKEvent.IN_MATCHING_EVENT,this.handleMatching,this),EventCenter.instance().addEventListener(PKEvent.MATCH_SUCCESS_EVENT,this.handleMatchSuccess,this),EventCenter.instance().addEventListener(PKEvent.GET_ROOM_USERS_EVENT,this.handleRoomUsers,this),EventCenter.instance().addEventListener(PKEvent.GET_QUESTION_TOPIC_EVENT,this.handleQuestionTopic,this),EventCenter.instance().addEventListener(PKEvent.USE_ITEM_EVENT,this.handleUseItem,this),EventCenter.instance().addEventListener(PKEvent.USE_EMOJI_EVENT,this.handleUseEmoji,this),EventCenter.instance().addEventListener(PKEvent.COMPLETE_ONE_EVENT,this.handleFinishOne,this),EventCenter.instance().addEventListener(PKEvent.PK_RESULT_EVENT,this.handleResult,this),EventCenter.instance().addEventListener(PKEvent.PK_READY_EVENT,this.handleReady,this),EventCenter.instance().addEventListener(PKEvent.PK_LEAVE_EVENT,this.handleLeave,this),EventCenter.instance().addEventListener(PKEvent.PK_BROADCAST_EVENT,this.handleBroadcast,this),EventCenter.instance().addEventListener(PKEvent.PK_FRIEND_WAITING_EVENT,this.setFriendStatus,this),EventCenter.instance().addEventListener(GameEvent.GUIDE_EVENT,this.guideHandler,this),EventCenter.instance().addEventListener(GameEvent.UPDATE_PK_INFO,this.refreshPk,this)},e.prototype.removeEvet=function(){EventCenter.instance().removeEventListener(PKEvent.GOTO_PK_SCENE_EVENT,this.handleGotoScene,this),EventCenter.instance().removeEventListener(PKEvent.START_MATCH_EVENT,this.startMatch,this),EventCenter.instance().removeEventListener(PKEvent.IN_MATCHING_EVENT,this.handleMatching,this),EventCenter.instance().removeEventListener(PKEvent.MATCH_SUCCESS_EVENT,this.handleMatchSuccess,this),EventCenter.instance().removeEventListener(PKEvent.GET_ROOM_USERS_EVENT,this.handleRoomUsers,this),EventCenter.instance().removeEventListener(PKEvent.GET_QUESTION_TOPIC_EVENT,this.handleQuestionTopic,this),EventCenter.instance().removeEventListener(PKEvent.USE_ITEM_EVENT,this.handleUseItem,this),EventCenter.instance().removeEventListener(PKEvent.USE_EMOJI_EVENT,this.handleUseEmoji,this),EventCenter.instance().removeEventListener(PKEvent.COMPLETE_ONE_EVENT,this.handleFinishOne,this),EventCenter.instance().removeEventListener(PKEvent.PK_RESULT_EVENT,this.handleResult,this),EventCenter.instance().removeEventListener(PKEvent.PK_READY_EVENT,this.handleReady,this),EventCenter.instance().removeEventListener(PKEvent.PK_LEAVE_EVENT,this.handleLeave,this),EventCenter.instance().removeEventListener(PKEvent.PK_FRIEND_WAITING_EVENT,this.setFriendStatus,this),EventCenter.instance().removeEventListener(PKEvent.PK_BROADCAST_EVENT,this.handleBroadcast,this),EventCenter.instance().removeEventListener(GameEvent.GUIDE_EVENT,this.guideHandler,this),EventCenter.instance().removeEventListener(GameEvent.UPDATE_PK_INFO,this.refreshPk,this)},e.prototype.loop=function(){this.gameStatus==ConstUtil.PK_FRIEND_STATUS&&this.pkFriendUI.loop();var t=~~((new Date).getTime()/1e3);if(!(t-this.curTime<1))if(this.curTime=t,this.gameStatus==ConstUtil.PK_IDILE_STATUS)this.pkMenuUI.loop(t);else if(this.gameStatus==ConstUtil.PK_PLAYING_STATUS){if(this.pkGameUI.loop(t),this.robotTime<0||this.nextTime<=0)return void(this.nextTime=~~(10*Math.random())+10);this.robotTime++,this.robotTime>this.nextTime&&(this.pkModel.sendRobotMsg(),this.robotTime=0)}else this.gameStatus==ConstUtil.PK_MATCHING_STATUS&&this.matchTime>0&&(this.matchTime--,this.matchTime<=0&&(this.pkModel.sendMatchEnemyInfo(!0),this.nextTime=~~(10*Math.random())+10))},e.prototype.guideHandler=function(t){this.gameStatus==ConstUtil.PK_PLAYING_STATUS&&this.pkGameUI.gotoGuide()},e.prototype.showExitConfirm=function(){var t=this,e=this.gameStatus;if(e==ConstUtil.PK_RESULT_STATUS)return this.gotoView(),!0;if(e==ConstUtil.PK_PLAYING_STATUS){if(this.forceConfirmView&&this.forceConfirmView.isOpened)return!0;var i=new ConfirmView;return i.open(function(e){e&&t.pkModel.sendGiveupGameInfo(),t.forceConfirmView=null},1),this.forceConfirmView=i,!0}return e==ConstUtil.PK_MATCHING_STATUS?!0:!1},e.prototype.setFriendStatus=function(){(this.gameStatus=ConstUtil.PK_FRIEND_STATUS)&&this.pkFriendUI.setInviting()},e.prototype.handleGotoScene=function(t){var e=t.data,i=e&&e.type;if(i)this.gotoView(i);else{var n=e&&e.flag;if(n)return void(this.gameStatus==ConstUtil.PK_FRIEND_STATUS&&(this.pkModel.sendCancelInvite(),this.gotoView(ConstUtil.PK_IDILE_STATUS)));this.gotoView(ConstUtil.PK_IDILE_STATUS)}},e.prototype.gotoView=function(t){void 0===t&&(t=ConstUtil.PK_IDILE_STATUS),this.forceConfirmView&&this.forceConfirmView.isOpened&&(this.forceConfirmView.close(),this.forceConfirmView=null),this.bgImage.visible=!1,this.menuTitleBg.visible=!1,this.matchTime=0,t!=this.gameStatus&&(this.pkMenuUI.hangUp(),this.pkMatchUI.hangUp(),this.pkGameUI.hangUp(),this.pkResultUI.hangUp(),this.pkFriendUI.hangUp()),this.gameStatus=t,t==ConstUtil.PK_IDILE_STATUS?(this.menuTitleBg.visible=!0,this.addChild(this.pkMenuUI),this.pkMenuUI.setInfo(),GameSound.instance().playMusic("pkmenu"),AppCenter.uploadActivityLog("1020049","show","page")):t==ConstUtil.PK_MATCHING_STATUS?(this.matchTime=10,this.addChild(this.pkMatchUI),this.gameStatus=ConstUtil.PK_MATCHING_STATUS,this.bgImage.texture=RES.getRes("dpkvsbg_jpg"),this.bgImage.visible=!0,AppCenter.uploadActivityLog("1020060","show","page")):t==ConstUtil.PK_PLAYING_STATUS?(this.addChild(this.pkGameUI),this.gameStatus=ConstUtil.PK_PLAYING_STATUS,this.bgImage.texture=RES.getRes("pkgamebg_jpg"),this.bgImage.visible=!0,GameSound.instance().playMusic("pkplaying"),AppCenter.uploadActivityLog("1020061","show","page")):t==ConstUtil.PK_RESULT_STATUS?(this.addChild(this.pkResultUI),this.gameStatus=ConstUtil.PK_RESULT_STATUS,this.bgImage.texture=RES.getRes("pkresultbg_jpg"),this.bgImage.visible=!0,AppCenter.uploadActivityLog("1020067","show","page")):t==ConstUtil.PK_FRIEND_STATUS&&(this.addChild(this.pkFriendUI),this.gameStatus=ConstUtil.PK_FRIEND_STATUS,this.pkModel.isEnemyFlee=!1,this.bgImage.texture=RES.getRes("pkgamebg_jpg"),this.bgImage.visible=!0,this.pkFriendUI.reset())},e.prototype.refreshPk=function(){var t=this;this.pkModel.getOwnPKInfo(!0).then(function(){t.pkMenuUI.setInfo()})},e.prototype.startMatch=function(){this.matchTime=10,this.pkModel.sendMatchEnemyInfo()},e.prototype.handleMatching=function(){this.gotoView(ConstUtil.PK_MATCHING_STATUS),this.pkMatchUI.refresh()},e.prototype.handleMatchSuccess=function(){this.matchTime=0;var t=this.pkModel.userIdList,e=1;if(t&&t.length>0)for(var i=0,n=t;i<n.length;i++){var a=n[i];if(a.search("rbtbattle")<0){e=2;break}}this.pkModel.sendRoomUserInfo(e)},e.prototype.handleRoomUsers=function(t){var e=this,i=t.data;this.pkModel.userList=i.users,this.gameStatus==ConstUtil.PK_FRIEND_STATUS?this.pkFriendUI.setUserInfo():this.gameStatus==ConstUtil.PK_MATCHING_STATUS&&(this.pkMatchUI.setEnemyInfo(),egret.setTimeout(function(){e.pkModel.sendStartGameInfo()},this,500))},e.prototype.handleQuestionTopic=function(t){var e=this;if(this.gameStatus!=ConstUtil.PK_PLAYING_STATUS){var i=t.data;this.gotoView(ConstUtil.PK_PLAYING_STATUS),this.pkGameUI.setTopicInfo(i);for(var n=PKModel.instance().myPkInfo.pass_info,a=i.tickets,s=0,r=a;s<r.length;s++){var o=r[s];this.pkModel.isMySelf(o.accid)&&(n.pass=o.pass)}this.showCountDown().then(function(){e.pkGameUI.startGame()})}},e.prototype.handleUseItem=function(t){var e=t.data;this.pkGameUI.showUseItem(e)},e.prototype.handleUseEmoji=function(t){var e=t.data;this.pkGameUI.showEmoji(e)},e.prototype.handleFinishOne=function(t){var e=t.data;this.pkGameUI.finishOne(e)},e.prototype.handleResult=function(t){if(this.gameStatus!=ConstUtil.PK_RESULT_STATUS){var e=t.data;this.gotoView(ConstUtil.PK_RESULT_STATUS),this.pkResultUI.setInfo(e)}},e.prototype.handleBroadcast=function(t){var e=t.data;this.gameStatus==ConstUtil.PK_RESULT_STATUS?this.pkResultUI.setBroadcast(e):this.gameStatus==ConstUtil.PK_FRIEND_STATUS&&this.pkFriendUI.setBroadcast(e)},e.prototype.handleReady=function(t){var e=t.data;this.gameStatus==ConstUtil.PK_RESULT_STATUS?this.pkResultUI.setReady(e):this.gameStatus==ConstUtil.PK_FRIEND_STATUS&&this.pkFriendUI.setReady(e)},e.prototype.handleLeave=function(t){var e=t.data,i=this.gameStatus;if(this.pkModel.reset(),this.pkModel.isMySelf(e.userId)||(this.pkModel.isEnemyFlee=!0),i==ConstUtil.PK_RESULT_STATUS)this.pkResultUI.setLeave(e);else if(i==ConstUtil.PK_FRIEND_STATUS)this.pkFriendUI.setLeave(e);else if(i==ConstUtil.PK_PLAYING_STATUS||i==ConstUtil.PK_MATCHING_STATUS){var n=e.userId;this.pkModel.isMySelf(n)?i==ConstUtil.PK_MATCHING_STATUS&&(AppCenter.showToast("匹配失败"),this.gotoView(ConstUtil.PK_IDILE_STATUS)):(AppCenter.showToast("你的对手离开了游戏"),this.pkModel.isEnemyFlee=!0,this.pkModel.sendWinGameInfo())}GuideTip.instance().close()},e.prototype.showCountDown=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return t=new egret.Sprite,t.graphics.beginFill(0,.85),t.graphics.drawRect(0,0,SpriteUtil.stageWidth,SpriteUtil.stageHeight),t.graphics.endFill(),e=SpriteUtil.createText("3",200,16777215,"center",!0),e.fontFamily=1==AppUtil.isAndroidOrIos()?"xnumberBold":"",e.width=300,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x=SpriteUtil.stageCenterX,e.y=SpriteUtil.stageCenterY,t.addChild(e),this.addChild(t),t.touchEnabled=!0,GameSound.instance().playSound("time321"),[4,this.playCountDown(e)["catch"](function(){t.removeChildren(),t.parent&&t.parent.removeChild(t)})];case 1:return i.sent(),t.removeChildren(),t.parent&&t.parent.removeChild(t),[2]}})})},e.prototype.playCountDown=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.playNumberCountDown(t,"3")];case 1:return e.sent(),[4,this.playNumberCountDown(t,"2")];case 2:return e.sent(),[4,this.playNumberCountDown(t,"1")];case 3:return e.sent(),[4,this.playNumberCountDown(t)];case 4:return e.sent(),[2]}})})},e.prototype.playNumberCountDown=function(t,e){var i=this;return void 0===e&&(e="Go"),new Promise(function(n,a){t.scaleX=3,t.scaleY=3,t.alpha=.1,t.text=e,egret.Tween.get(t).to({scaleX:1,scaleY:1,alpha:1},200).call(function(){return i.gameStatus!=ConstUtil.PK_PLAYING_STATUS?void a():void egret.setTimeout(function(){egret.Tween.removeTweens(t),i.isRunning&&i.gameStatus==ConstUtil.PK_PLAYING_STATUS?n():a()},i,600)})})},e.prototype.enter=function(){t.prototype.enter.call(this),document.body.style.background="#4670DC",this.curTime=~~((new Date).getTime()/1e3),this.gotoView(ConstUtil.PK_IDILE_STATUS),this.pkModel.connectNow()},e.prototype.exit=function(){t.prototype.exit.call(this),GameSound.instance().playMusic("music1"),this.pkModel.resetView(),this.pkMenuUI.hangUp(),this.pkMatchUI.hangUp(),this.pkGameUI.hangUp(),this.pkResultUI.hangUp(),this.pkFriendUI.hangUp(),this.pkModel.disconnect(),GuideTip.instance().close()},e}(BaseScene);__reflect(DispelPKScene.prototype,"DispelPKScene");var GuessIdiomMenu=function(t){function e(){var e=t.call(this)||this;return e.model=GuessModel.instance(),e.isStart=!1,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.createScroller(),this.createTitle()},e.createHeadLocate=function(){if(!this._headLocateSpr){var t=new egret.DisplayObjectContainer,e=SpriteUtil.createDragonBones("NewProject_ske_json","NewProject_tex");e.animation.play("newAnimation",-1),t.addChild(e);var i=new egret.Sprite,n=SpriteUtil.createImage("guessgame_json#headlocal",!1);i.addChild(n);var a=SpriteUtil.createCircle(40);a.x=n.width/2,a.y=45,i.addChild(a);var s=SpriteUtil.createImage("menuover_json#headimg");s.x=a.x,s.y=a.y,i.addChild(s),e.x=s.x,e.y=n.height-10,s.width=90,s.height=90,s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,s.mask=a,GameModel.instance().getAccountInfo().then(function(t){var e=t.mAccountMap,i=e&&e[t.mIntCurPlatform].figureurl;GameUtil.getHeadIconByUrl(i).then(function(t){s.texture=t})});var r=i.y;GameUtil.playBreathAnim(i,{y:r-16},{y:r},600),t.addChild(i);var o=SpriteUtil.createImage("guessgame_json#unlockguesslevel");o.anchorOffsetY=0,o.x=n.width/2,o.y=40,t.addChild(o),GameUtil.playBreathAnim(o,{y:24},{y:40},600),this._headLocateSpr=t,t.touchEnabled=!1,t.touchChildren=!1}return this.restarHeadEff(),this._headLocateSpr},e.clearHeadEff=function(){if(this._headLocateSpr){var t=this._headLocateSpr.getChildAt(0);t.animation.stop();var e=this._headLocateSpr.getChildAt(1);egret.Tween.removeTweens(e)}},e.restarHeadEff=function(){if(this._headLocateSpr){var t=this._headLocateSpr.getChildAt(0);t.animation.play("newAnimation",-1);var e=this._headLocateSpr.getChildAt(1);GameUtil.playBreathAnim(e,{y:-16},{y:0},600)}},e.prototype.createTitle=function(){var t=new egret.Sprite;this.addChild(t);var e=SpriteUtil.createImage("idiomcene_json#yhome",!1);e.x=10,e.name="btn_1",t.addChild(e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1020021","close","page");var t=new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME,action:1});EventCenter.instance().dispatchEvent(t)},this);var i=SpriteUtil.createImage("guessgame_json#cloudbg");i.x=SpriteUtil.stageCenterX,i.y=i.height/2+250,t.addChild(i);var n=SpriteUtil.createImage("guessgame_json#titleImage");n.x=SpriteUtil.stageCenterX,n.y=n.height/2+35,t.addChild(n),t.y=GameData.ipxHgt+10,t.cacheAsBitmap=!0},e.prototype.createScroller=function(){var t=this,e=new eui.Scroller,i=function(){i=null,e.verticalScrollBar.visible=!1,e.verticalScrollBar.autoVisibility=!1,e.removeEventListener(eui.UIEvent.CREATION_COMPLETE,i,t)};e.addEventListener(eui.UIEvent.CREATION_COMPLETE,i,this),e.scrollPolicyH="off",e.scrollPolicyV="auto",this.addChild(e),this.scroller=e,this.scroller.height=SpriteUtil.stageHeight,this.scroller.width=750,this.scroller.x=SpriteUtil.stageCenterX-375,this.scroller.bounces=!1,this.levelList=new eui.List,this.levelList.itemRenderer=GuessGroupItem,this.levelList.sortableChildren=!0;for(var n=this.model.userData.level.total,a=Math.ceil(n/12),s=[],r=a-1;r>=0;r--)s.push({index:r});this.levelList.dataProvider=new eui.ArrayCollection(s),this.levelList.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.scroller.viewport=this.levelList;var o=function(){t.refresh(),t.levelList.removeEventListener(egret.Event.RESIZE,o,t),o=null};this.levelList.addEventListener(egret.Event.RESIZE,o,this)},e.prototype.touchHandler=function(t){if(GameSound.instance().playSound("btn"),!this.isStart){var e=t.target.name;if(e&&!(e.search("selectlevel_")<0)){AppCenter.uploadActivityLog("1020021","click","page");var i=parseInt(e.split("_")[1]);this.startNow(i)}}},e.prototype.startNow=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n,a=this;return __generator(this,function(s){switch(s.label){case 0:return e=GuessModel.instance().userData.level.total,t>e?(AppCenter.showToast("您通关了！敬请期待更多游戏关卡！"),[2]):t>this.model.userData.level.level_id+1?(AppCenter.showToast("请先解锁前面的关卡~"),[2]):(i=GuessModel.instance().userData.level.video_level,n=i.indexOf(t),n>=0?(AppCenter.uploadActivityLog("1020046","click","page"),[4,AppCenter.showVideoAd("rewardvideoktjs")]):[3,2]);case 1:s.sent(),i.splice(n,1),s.label=2;case 2:return GameData.guessStaticsData.gameid=(new Date).toLocaleDateString()+"-"+Math.random().toLocaleString(),GameData.guessStaticsData.gameround=t,GameData.guessStaticsData.gametype=2,GameData.guessStaticsData.clicks=0,GameData.guessStaticsData.blanks=4,GameData.guessStaticsData.clicktips=0,GameData.guessStaticsData.continuous=0,GameData.guessStaticsData.costtime=0,GameData.guessStaticsData.tallround=this.model.userData.level.level_id+1,GameData.guessStaticsData.laststat="__laststat__",GameData.guessStaticsData.thisstat="__thisstat__",GameData.guessStaticsData.lng="__lng__",GameData.guessStaticsData.lat="__lat__",GameData.guessStaticsData.appinfo="__appinfo__",GameData.guessStaticsData.basestation="__basestation__",this.isStart=!0,this.model.getGuessNextLevelData(t).then(function(t){a.isStart=!1,t.status&&(GameData.guessStaticsData.gamestauts=0,HttpServer.statisticsGuessGame(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_GUESS_IDIOM})))})["catch"](function(){a.isStart=!1}),[2]}})})},e.prototype.refresh=function(){var t=this,e=this.model.userData.level,i=e.total,n=0,a=Math.ceil(i/12);if(n=0==e.level_id?1:e.level_id%12!=0?Math.ceil(e.level_id/12):e.level_id<i?e.level_id/12+1:a,this.levelList.selectedIndex=a-n,this.levelList.numChildren>0)for(var s=this.levelList.numChildren,r=0;s>r;r++)this.levelList.getChildAt(r).refresh();if(1==n)this.scroller.viewport.scrollV=1334*(a-n)-(SpriteUtil.stageHeight-1334);else{var o=1334*(a-n)+60*(6-e.level_id%12);egret.setTimeout(function(){t.scroller.viewport.scrollV=0>=o?0:o},this,500)}},e.prototype.enter=function(){t.prototype.enter.call(this),document.body.style.background="linear-gradient(9deg,#88fff8,#4ab0ff)",AppCenter.uploadActivityLog("1020021","show","page"),this.refresh(),AppCenter.hidePassGameView(),AppCenter.hideBanner()},e.prototype.exit=function(){t.prototype.exit.call(this),e.clearHeadEff()},e}(BaseScene);__reflect(GuessIdiomMenu.prototype,"GuessIdiomMenu");var GuessIdiomOver=function(t){function e(){var e=t.call(this)||this;return e.headItem=HeadItem.instance(),e.model=GuessModel.instance(),e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=new GuessOverItem;t.x=SpriteUtil.stageCenterX-332,t.y=GameData.ipxHgt+121,this.addChild(t),this.overItem=t},e.prototype.addEvent=function(){EventCenter.instance().addEventListener(GameEvent.UPDATE_HEAD_INFO_EVENT,this.refreshHead,this),EventCenter.instance().addEventListener(GuessEvent.SHOW_GUESS_BIG_AD_EVENT,this.showBigAd,this)},e.prototype.removeEvent=function(){EventCenter.instance().removeEventListener(GameEvent.UPDATE_HEAD_INFO_EVENT,this.refreshHead,this),EventCenter.instance().removeEventListener(GuessEvent.SHOW_GUESS_BIG_AD_EVENT,this.showBigAd,this)},e.prototype.refreshHead=function(){this.headItem&&this.headItem.refresh()},e.prototype.refresh=function(){this.headItem.refresh(),this.overItem.refresh();var t=this.model.completeData,e=t.gold;if(!(GameData.isVerifyMode()||(this.showBigAd(),e.gold<=0&&e.gold_video<=0)))if(AppCenter.hidePassGameView(),e.gold_video>0)GameView.instance().showGuessRewardView();else if(e.gold>0){var i=new GuessSingleRewardView;i.open(),this._dlgView=i}},e.prototype.showBigAd=function(t){void 0===t&&(t=null),!this.isRunning||GameView.instance().isHaveOpened()?AppCenter.hidePassGameView():AppCenter.showPassGameView("bigktyxfinish")},e.prototype.enter=function(){t.prototype.enter.call(this),document.body.style.background="#E8E7E5",GameSound.instance().playSound("passlevel"),this.addChild(this.headItem),this.headItem.hideSound(),this.headItem.hideLife(),this.refresh(),GameData.guessStaticsData.gamestauts=1,HttpServer.statisticsGuessGame(),AppCenter.hideBanner(),AppCenter.uploadActivityLog("1020031","show","page")},e.prototype.exit=function(){t.prototype.exit.call(this),this._dlgView&&this._dlgView.close(),this._dlgView=null,AppCenter.hidePassGameView()},e}(BaseScene);__reflect(GuessIdiomOver.prototype,"GuessIdiomOver");var GuessIdiomScene=function(t){function e(){var e=t.call(this)||this;return e.curTime=0,e.model=GuessModel.instance(),e.init(),e}return __extends(e,t),e.prototype.init=function(){this.createTitle(),this.createAnswer()},e.prototype.createTitle=function(){var t=new egret.Sprite;t.y=5+GameData.ipxHgt,this.addChild(t);var e=SpriteUtil.createImage("guessgame_json#backbtn",!1);e.x=12,e.name="gobackbtn",t.addChild(e);var i=SpriteUtil.createText("第106关",48,4473924,"center",!0);i.fontFamily="xnumberBold",i.width=SpriteUtil.stageWidth,i.y=22,this.levelTxt=i,t.addChild(i);var n=SpriteUtil.createRect(720,580,16,16,13289927);n.x=SpriteUtil.stageCenterX-360,n.y=e.y+e.height+14,t.addChild(n);var a=new egret.Shape;a.graphics.lineStyle(2,5987163),a.graphics.beginFill(16777215),a.graphics.drawRect(0,0,400,400),a.graphics.endFill(),a.x=n.x+160,a.y=n.y+42,t.addChild(a);var s=new egret.Bitmap;s.x=SpriteUtil.stageCenterX,s.y=n.y+242,t.addChild(s),this.avatarImg=s;var r={lineWidth:2,lineColor:16693555,alpha:.01,radius:32},o={size:32,textColor:16693555},l=SpriteUtil.createTextButton(230,80,"重新加载",r,o);l.x=s.x-115,l.y=s.y-40,t.addChild(l),l.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.reloadBtn=l;var h=new egret.Sprite;h.name="question",h.touchEnabled=!0,t.addChild(h);for(var c=[],d=0;4>d;d++){var p=new GuessWordItem;p.x=p.width/2+d%4*112,p.y=p.height/2,p.status=GuessWordItem.G_NORMAL,p.index=d,h.addChild(p),c.push(p)}if(h.x=SpriteUtil.stageCenterX-h.width/2,h.y=a.y+a.height+33,this.questionList=c,h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),!GameData.isVerifyMode()){var u=this.createBtn(1),g=this.createBtn(2);this.deleteBtn=u,this.tipsBtn=g,u.x=n.x+88,u.y=n.y+n.height+41,g.x=u.x+u.width+42,g.y=u.y,t.addChild(u),t.addChild(g)}var v=new egret.Sprite;v.x=h.x+h.width+39,v.y=h.y-8;var m=SpriteUtil.createImage("guessgame_json#clearbtn",!1);v.addChild(m);var _=SpriteUtil.createText("清空",32,16777215,"center");_.width=m.width,_.y=35,v.addChild(_),this.clearBtn=v,t.addChild(v),v.touchEnabled=!0,v.touchChildren=!1,t.cacheAsBitmap=!0,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.createBtn=function(t){var e=new egret.Sprite,i=1==t?"guessgame_json#deletebtn":"guessgame_json#gtipbtn",n=SpriteUtil.createImage(i,!1);e.addChild(n);var a=SpriteUtil.createText("去除干扰项x3",32,16777215,"left",!0);a.y=30,e.addChild(a);var s=1==t?"guessgame_json#video1":"guessgame_json#video2",r=SpriteUtil.createImage(s,!1);return r.y=27,1==t?(r.x=n.width-r.width-20,a.x=35):(r.x=n.width-r.width-40,a.x=70),e.addChild(r),e.touchChildren=!1,e.touchEnabled=!0,e.name="button_"+t,e},e.prototype.createAnswer=function(){for(var t=new egret.Sprite,e=[],i=0;i<3*ConstUtil.GUESS_COLUMNS;i++){var n=new GuessWordItem;n.x=39+88*(i%ConstUtil.GUESS_COLUMNS),n.y=39+88*~~(i/ConstUtil.GUESS_COLUMNS),n.status=GuessWordItem.G_STATIC,n.index=i,e.push(n),t.addChild(n)}t.x=SpriteUtil.stageCenterX-t.width/2,t.y=879+GameData.ipxHgt,this.addChild(t),t.cacheAsBitmap=!0,t.touchEnabled=!0,t.name="answer",t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.answerList=e},e.prototype.addEvent=function(){EventCenter.instance().addEventListener(GuessEvent.GUESS_HIDE_STATICS_EVENT,this.staticsHandle,this)},e.prototype.removeEvent=function(){EventCenter.instance().removeEventListener(GuessEvent.GUESS_HIDE_STATICS_EVENT,this.staticsHandle,this)},e.prototype.staticsHandle=function(){this.isRunning&&(GameData.guessStaticsData.gamestauts=3,HttpServer.statisticsGuessGame())},e.prototype.showGuide=function(){var t=this;1==this.model.levelData.level.id&&AppCenter.nativeCache(ConstUtil.CACHE_GUESS_START_GUIDE,"2").then(function(e){var i=e&&e.value?parseInt(e.value):0;isNaN(i)&&(i=0),0==i&&(t.nextGuide(0),i=1,AppCenter.nativeCache(ConstUtil.CACHE_GUESS_START_GUIDE,"1",""+i))})},e.prototype.nextGuide=function(t){for(var e,i=this.model.levelData.body.idioms[0].charAt(t),n=this.answerList.length,a=0;n>a;a++){var s=this.answerList[a];s.word==i&&(e=s)}var r=e.parent.localToGlobal(e.x-e.width/2,e.y-e.height/2);GuideTip.instance().playGuide(new egret.Rectangle(r.x+5,r.y,e.width-8,e.height),1)},e.prototype.touchHandler=function(t){var e=this,i=t.target,n=i.name,a=i.parent?i.parent.name:"";if("question"==a){GameSound.instance().playSound("ctianzi"),AppCenter.uploadActivityLog("1020024","click","page","",this.model.levelData.level.id);var s=i;s.sindex>=0&&(this.answerList[s.sindex].status=GuessWordItem.G_NORMAL);for(var r=0,o=this.questionList;r<o.length;r++){var l=o[r];l.status=GuessWordItem.G_NORMAL}s.reset(),s.status=GuessWordItem.G_SELECTED,this.showClearBtn()}else if("answer"==a){GameSound.instance().playSound("ctianzi"),GameData.guessStaticsData.clicks++,AppCenter.uploadActivityLog("1020023","click","page","",this.model.levelData.level.id);var h=i,c=this.getCurrentSeletedItem();c||(this.reset(),c=this.questionList[0],c.status=GuessWordItem.G_SELECTED),c.setWord(h.word),c.sindex=h.index,h.status=GuessWordItem.G_HIDDEN,this.selectNext(),this.checkResult(),1==GuideTip.instance().guideIndex?(this.nextGuide(1),GuideTip.instance().guideIndex++):GuideTip.instance().close(),this.showClearBtn()}else if("gobackbtn"==n)GameSound.instance().playSound("btn"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_GUESS_MENU})),GameData.guessStaticsData.gamestauts=2,HttpServer.statisticsGuessGame();else if("button_1"==n){GameData.guessStaticsData.clicktips++,GameSound.instance().playSound("btn");var d=this.model.levelData.tips_remove;this.enableDTBtn(1),d>0?(AppCenter.uploadActivityLog("1020025","click","page","",this.model.levelData.level.id),this.model.getGuessUseTipsData(2,0).then(function(){e.refreshView()}),this.deleteEightWord()):(AppCenter.uploadActivityLog("1020027","click","page","",this.model.levelData.level.id),AppCenter.showVideoAd("rewardvideoktts").then(function(){e.model.getGuessUseTipsData(2,1),e.deleteEightWord()}))}else if("button_2"==n){GameData.guessStaticsData.clicktips++,GameSound.instance().playSound("btn");var d=this.model.levelData.tips;this.enableDTBtn(2),d>0?(AppCenter.uploadActivityLog("1020026","click","page","",this.model.levelData.level.id),this.model.getGuessUseTipsData(1,0).then(function(){e.refreshView()}),this.tipWordNow()):(AppCenter.uploadActivityLog("1020028","click","page","",this.model.levelData.level.id),AppCenter.showVideoAd("rewardvideoktts").then(function(){e.model.getGuessUseTipsData(1,1),e.tipWordNow()}))}else i==this.reloadBtn?this.loadImage():i==this.clearBtn&&(GameData.guessStaticsData.retrycount++,this.reset(),this.showClearBtn(),this.selectNext())},e.prototype.showClearBtn=function(){for(var t=0,e=this.questionList;t<e.length;t++){var i=e[t];if(i.word)return void(this.clearBtn.visible=!0)}this.clearBtn.visible=!1},e.prototype.deleteEightWord=function(){for(var t=this.answerList,e=t.length,i=[],n=this.model.levelData,a=n.body,s=(a.idioms,0);e>s;s++)t[s].visible&&!this.model.isRightWord(t[s].word)&&i.push(t[s]);for(var r=i.length,o=GameUtil.getCntRandomFromRange(0,r,8),l=0,h=o;l<h.length;l++){var c=h[l];i[c].status=GuessWordItem.G_DELETE}},e.prototype.tipWordNow=function(){var t=this.getCurrentSeletedItem();t||(this.reset(),t=this.questionList[0]);for(var e,i=t.index,n=this.model.levelData,a=n.body,s=a.idioms,r=s[0].charAt(i),o=this.answerList.length,l=0;o>l;l++){var h=this.answerList[l];if(h.word==r){e=h;break}}if(e.status==GuessWordItem.G_HIDDEN)for(var c=0,d=this.questionList;c<d.length;c++){var p=d[c];if(p.sindex==e.index){p.reset();break}}t.setWord(e.word),t.sindex=e.index,t.status=GuessWordItem.G_SELECTED,e.visible=!1,this.selectNext(),this.checkResult()},e.prototype.enableDTBtn=function(t){if(void 0===t&&(t=0),!GameData.isVerifyMode())if(1==t)this.deleteBtn.touchEnabled=!1,this.deleteBtn.getChildAt(0).texture=RES.getRes("guessgame_json#graybtn1"),this.deleteBtn.getChildAt(2).texture=RES.getRes("guessgame_json#video3");else if(2==t)this.tipsBtn.touchEnabled=!1,this.tipsBtn.getChildAt(0).texture=RES.getRes("guessgame_json#graybtn2"),this.tipsBtn.getChildAt(2).texture=RES.getRes("guessgame_json#video3");else{var e=this.model.levelData.tips_video;!e||e.tips>0?(this.tipsBtn.touchEnabled=!0,this.tipsBtn.getChildAt(0).texture=RES.getRes("guessgame_json#gtipbtn"),this.tipsBtn.getChildAt(2).texture=RES.getRes("guessgame_json#video2")):(this.tipsBtn.touchEnabled=!1,this.tipsBtn.getChildAt(0).texture=RES.getRes("guessgame_json#graybtn2"),this.tipsBtn.getChildAt(2).texture=RES.getRes("guessgame_json#video3")),!e||e.tips_remove>0?(this.deleteBtn.touchEnabled=!0,this.deleteBtn.getChildAt(0).texture=RES.getRes("guessgame_json#deletebtn"),this.deleteBtn.getChildAt(2).texture=RES.getRes("guessgame_json#video1")):(this.deleteBtn.touchEnabled=!1,this.deleteBtn.getChildAt(0).texture=RES.getRes("guessgame_json#graybtn1"),this.deleteBtn.getChildAt(2).texture=RES.getRes("guessgame_json#video3"))}},e.prototype.checkResult=function(){for(var t=this,e="",i=0;i<this.questionList.length;i++){if(""==this.questionList[i].word)return;e+=this.questionList[i].word}if(this.model.isMatchSuccess(e)){for(var n=0,a=this.questionList;n<a.length;n++){var s=a[n];s.complete()}return void GuessModel.instance().getGuessCompleteData(e).then(function(){var e=new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_GUESS_OVER});EventCenter.instance().dispatchEvent(e);var i=t.model.levelData;"1"==i.level.id&&AppCenter.nativeCache(ConstUtil.CACHE_ACHIECE_POPUP_28,"2").then(function(t){if(!t||!t.value){AppCenter.nativeCache(ConstUtil.CACHE_ACHIECE_POPUP_28,"1","1");var e=new AchievePopup;e.open(28)}})})}for(var r=0,o=this.questionList;r<o.length;r++){var s=o[r];s.mistake()}GameSound.instance().playSound("tianzierr")},e.prototype.reset=function(t){void 0===t&&(t=!1);for(var e=0,i=this.questionList;e<i.length;e++){var n=i[e];n.reset()}for(var a=0,s=this.answerList;a<s.length;a++){var n=s[a];(t||n.status!=GuessWordItem.G_DELETE)&&(n.status=GuessWordItem.G_NORMAL)}},e.prototype.getCurrentSeletedItem=function(){for(var t=0,e=this.questionList;t<e.length;t++){var i=e[t];if(i.status==GuessWordItem.G_SELECTED)return i}return null},e.prototype.selectNext=function(){for(var t=this.questionList.length,e=-1,i=0;t>i;i++){var n=this.questionList[i];if(n.status==GuessWordItem.G_SELECTED){this.questionList[i].status=GuessWordItem.G_NORMAL,e=i;break}}if(t>e+1)return void(this.questionList[e+1].word||(this.questionList[e+1].status=GuessWordItem.G_SELECTED));
for(var a=!1,i=0;t>i;i++){var s=this.questionList[i];s.sindex<0&&!a?(s.status=GuessWordItem.G_SELECTED,a=!0):s.status=GuessWordItem.G_NORMAL}},e.prototype.destructLevel=function(){var t=this;this.reset(!0),this.enableDTBtn();var e=this.model.levelData;this.levelTxt.textFlow=[{text:"第"},{text:""+e.level.id,style:{textColor:15496199}},{text:"关"}];for(var i=e.body,n=i.chars,a=this.answerList.length,s=n.length,r=0;a>r;r++)s>r?this.answerList[r].setWord(n[r]):this.answerList[r].status=GuessWordItem.G_DELETE,this.answerList[r].alpha=0;var o=0,l=0,h=egret.setInterval(function(){egret.Tween.get(t.answerList[o]).to({alpha:1},30).call(function(){var e=t.answerList[l];egret.Tween.removeTweens(e),e.rotation=0,e.scaleX=1,e.scaleY=1,l++}),o++,o>=s&&egret.clearInterval(h)},this,25);this.loadImage(),this.selectNext()},e.prototype.loadImage=function(){var t=this,e=this.model.levelData,i=e.body;this.reloadBtn.visible=!1,this.avatarImg.visible=!1,GameUtil.getBase64ImageByUrl(i.pic).then(function(e){t.avatarImg.texture&&t.avatarImg.texture.dispose(),t.avatarImg.texture=e,t.avatarImg.anchorOffsetX=t.avatarImg.width/2,t.avatarImg.anchorOffsetY=t.avatarImg.height/2;var i=400/t.avatarImg.width,n=400/t.avatarImg.height,a=n>i?i:n;t.avatarImg.scaleX=a,t.avatarImg.scaleY=a,t.avatarImg.visible=!0,t.reloadBtn.visible=!1})["catch"](function(e){t.reloadBtn.visible=!0})},e.prototype.refreshView=function(){if(!GameData.isVerifyMode()){var t=this.model.levelData,e=t.tips,i=t.tips_remove;0>=e?(this.tipsBtn.getChildAt(1).text="提示",this.tipsBtn.getChildAt(2).visible=!0):(this.tipsBtn.getChildAt(1).text="提示x"+e,this.tipsBtn.getChildAt(2).visible=!1),0>=i?(this.deleteBtn.getChildAt(1).text="去除干扰项",this.deleteBtn.getChildAt(2).visible=!0):(this.deleteBtn.getChildAt(1).text="去除干扰项x"+i,this.deleteBtn.getChildAt(2).visible=!1)}},e.prototype.enter=function(){t.prototype.enter.call(this),this.clearBtn.visible=!1,this.destructLevel(),this.refreshView(),document.body.style.background="#E8E7E5",AppCenter.uploadActivityLog("1020022","show","page","",this.model.levelData.level.id),AppCenter.hidePassGameView(),AppCenter.showBanner("smallktyx"),this.showGuide(),this.curTime=(new Date).getTime()},e.prototype.exit=function(){t.prototype.exit.call(this);var e=(new Date).getTime();GuideTip.instance().close(),GameData.guessStaticsData.costtime=e-this.curTime,AppCenter.hideBanner(),AppCenter.uploadActivityLog("1020022","close","page","",this.model.levelData.level.id)},e}(BaseScene);__reflect(GuessIdiomScene.prototype,"GuessIdiomScene");var IdiomScene=function(t){function e(){var e=t.call(this)||this;return e.curTime=0,e.curItemTime=0,e.isSuccess=!1,e.init(),e.addEvent(),e}return __extends(e,t),e.prototype.init=function(){this.currBlankItems=[],this.createBtns(),this.createQuestionList(),this.createAnswerList()},e.prototype.createBtns=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n,a,s,r,o,l;return __generator(this,function(h){return t=new egret.Sprite,e=SpriteUtil.createImage("idiomcene_json#yhome",!1),e.x=10,e.name="btn_1",t.addChild(e),i=SpriteUtil.createText("第106关",48,4473924,"center",!0),i.fontFamily="xnumberBold",i.width=SpriteUtil.stageWidth,i.y=16,this.levelTxt=i,t.addChild(i),n=SpriteUtil.createImage("idiomcene_json#boxbtn"),n.x=14+n.width/2,n.y=823+n.height/2,n.name="btn_2",t.addChild(n),a=SpriteUtil.createImage("idiomcene_json#howbtn",!1),a.x=382,a.y=836,a.name="btn_3",t.addChild(a),s=SpriteUtil.createImage("idiomcene_json#tipbtn",!1),s.x=a.x+a.width+46,s.y=a.y,s.name="btn_4",t.addChild(s),r=SpriteUtil.createImage("idiomcene_json#resetbtn",!1),r.x=s.x+s.width+46,r.y=a.y,r.name="btn_5",t.addChild(r),o=SpriteUtil.createText("x3",25,16777215,"left",!0,4,14448164),o.fontFamily="xnumberBold",o.x=s.x+s.width/2+12,o.y=s.y+s.height-o.height,this.tipTimesTxt=o,o.touchEnabled=!1,t.addChild(o),l=SpriteUtil.createImage("idiomcene_json#shareicon",!1),l.x=o.x,l.y=s.y+s.height-l.height+4,this.videoImg=l,l.touchEnabled=!1,t.addChild(l),t.y=11+GameData.ipxHgt,t.cacheAsBitmap=!0,t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchButton,this),this.addChild(t),this.btnSprite=t,!TimeUtil.puzzleClose&&this.initPuzzleBtn(),[2]})})},e.prototype.initPuzzleBtn=function(){var t=new egret.DisplayObjectContainer,e=SpriteUtil.createMovieClip("xinpintu","mc",!1);e.gotoAndPlay(1,-1),e.frameRate=12,t.touchEnabled=!0,t.touchChildren=!1,t.name="btn_6",t.addChild(e);var i=new eui.Image("puzzle_json#totalPuzzleTxt");t.addChild(i),t.x=SpriteUtil.stageWidth-t.width-0,this._puzzleNum=SpriteUtil.createText(),this._puzzleNum.bold=!0,this._puzzleNum.width=50,this._puzzleNum.lineSpacing=-25,this._puzzleNum.x=19,this._puzzleNum.y=14,t.addChild(this._puzzleNum),this.btnSprite.addChild(t),this._puzzleBtn=t,this._puzzleBtn.visible=!1},e.prototype.setPuzzleBtn=function(){var t=this;GameData.isVerifyMode()||HttpServer.getPuzzleInfo().then(function(e){var i=0;for(var n in e)n.length=="pintu_1".length&&-1!=n.indexOf("pintu_")&&e[n]>0&&i++;t.setPuzzleNumTextFlow(i),t._puzzleBtn.visible=!0,AppCenter.uploadActivityLog("1080066","show","page")},function(t){})},e.prototype.setPuzzleNumTextFlow=function(t){this._puzzleNum.textFlow=StringUtil.getTextFlow([{text:""+t,textColor:15485757,size:30}])},e.prototype.createQuestionList=function(){var t=new egret.Sprite;t.graphics.beginFill(13420734),t.graphics.drawRoundRect(0,0,730,730,10),t.graphics.endFill();for(var e=ConstUtil.ROWS*ConstUtil.COLUMNS,i=[],n=0;e>n;n++){var a=new WordItem;a.x=39+80*(n%ConstUtil.COLUMNS),a.y=39+80*~~(n/ConstUtil.COLUMNS),i.push(a),a.wordVo.index=n,t.addChild(a)}t.x=SpriteUtil.stageCenterX-t.width/2,t.y=102+GameData.ipxHgt,this.addChild(t),t.cacheAsBitmap=!0,t.touchEnabled=!0,t.name="question",t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.questionList=i},e.prototype.createAnswerList=function(){for(var t=new egret.Sprite,e=[],i=0;i<3*ConstUtil.COLUMNS;i++){var n=new WordItem;n.x=39+80*(i%ConstUtil.COLUMNS),n.y=39+80*~~(i/ConstUtil.COLUMNS),e.push(n),n.wordVo.index=i,t.addChild(n)}t.x=SpriteUtil.stageCenterX-t.width/2,t.y=950+GameData.ipxHgt,this.addChild(t),t.cacheAsBitmap=!0,t.touchEnabled=!0,t.name="answer",t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.answerList=e},e.prototype.reset=function(){for(var t=0,e=this.questionList;t<e.length;t++){var i=e[t];i.reset()}for(var n=0,a=this.answerList;n<a.length;n++){var i=a[n];i.reset()}this.showBox(!1),this.currBlankItems=[]},e.prototype.nextSelected=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=-1);for(var i=this.currBlankItems,n=i.length,a=0;n>a;a++){var s=i[a];s.selected=!1}if(t){var r=!1;if(e>=0){for(var o=this.questionList[e],l=o.wordVo.configArr,h=l.length,c=void 0,d=void 0,p=[],u=10,g=0,a=0;h>a;a++){for(var v=l[a],m=v.blank.length,_=0,f=0;m>f;f++){var E=0==v.direction?this.questionList[v.start+f]:this.questionList[v.start+f*ConstUtil.COLUMNS];E.wordVo.current||_++,E.wordVo.status==ConstUtil.STATUS_NORMAL&&(c||0!=v.direction?d||1!=v.direction||(d=E):c=E),E.wordVo.configArr.length>1&&(p=p.concat(E.wordVo.configArr))}u>_&&_>0&&(u=_,g=v.direction)}if(0==g&&c)c.selected=!0,r=!0;else if(1==g&&d)d.selected=!0,r=!0;else for(var T=p.length,a=0;T>a;a++){for(var y=p[a],C=y.blank.length,w=0;C>w;w++){var E=0==y.direction?this.questionList[y.start+w]:this.questionList[y.start+w*ConstUtil.COLUMNS];if(!E.wordVo.current){E.selected=!0,r=!0;break}}if(r)break}}if(!r)for(var S=0;n>S;S++){var s=i[S];if(!s.wordVo.current){s.selected=!0;break}}}},e.prototype.destructLevel=function(t){for(var e=t.start,i=t.blank,n=i.length,a=[],s=0;n>s;s++){var r=t.direction?s*ConstUtil.COLUMNS+e:s+e;if(r>=ConstUtil.ROWS*ConstUtil.COLUMNS)return;var o=i[s],l=this.questionList[r];l.wordVo.correct=t.content[s],l.wordVo.configArr.push(t),o?l.setWord(t.content[s],ConstUtil.STATUS_STATIC):this.currBlankItems.indexOf(l)<0&&(this.currBlankItems.push(l),l.setWord("",ConstUtil.STATUS_NORMAL),a.push(t.content[s]))}return this.currBlankItems.sort(function(t,e){return t.wordVo.index<e.wordVo.index?-1:t.wordVo.index>e.wordVo.index?1:0}),a},e.prototype.nextLevel=function(){this.reset();for(var t=(this.model.levelData,this.model.levelConfig),e=t.length,i=[],n=0;e>n;n++)i=i.concat(this.destructLevel(t[n]));this.model.nextLevelPuzzle&&!GameData.isVerifyMode()&&!TimeUtil.puzzleClose&&i.push(ConstUtil.PUZZLE),i.sort(function(t,e){var i=Math.random();return i>.5?1:.5>i?-1:0});for(var a=i.length,s=this.answerList.length,n=0;s>n;n++){var r=this.answerList[n];if(egret.Tween.removeTweens(r),r.y=39+80*~~(n/ConstUtil.COLUMNS),a>n){if(i[n]==ConstUtil.PUZZLE){r.setWord(i[n],ConstUtil.STATUS_PUZZLE),this._puzzleItem=r;var o=n,l=new egret.Point(this.answerList[o].x,this.answerList[o].y);this.playPuzzleEff(l),AppCenter.uploadActivityLog("1080070","show","page")}else r.setWord(i[n],ConstUtil.STATUS_NORMAL);r.visible=!0}else r.visible=!1}if(this.nextSelected(),1==this.model.levelData.level.id){var r=this.getCurrentRightItem();if(!r)return void console.log("没有正确的答案");var l=r.parent.localToGlobal(r.x-r.width/2,r.y-r.height/2);GuideTip.instance().playGuide(new egret.Rectangle(l.x+5,l.y,r.width-8,r.height),1)}this.refresh(),a>=18?AppCenter.hideBanner():AppCenter.showBanner()},e.prototype.resetPuzzleItem=function(){this._puzzleItem&&(this._puzzleItem.reset(),this._puzzleItem=null)},e.prototype.showBox=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e=0),!t)return void(this.boxSprite&&this.boxSprite.parent&&(egret.Tween.removeTweens(this.boxSprite),this.boxSprite.parent.removeChild(this.boxSprite)));if(!this.boxSprite||!this.boxSprite.parent){var i=this.model.levelData,n=i.level;if((n.chest_num<=0||GameData.isVerifyMode())&&(t=!1),t&&n.chest_num--,!this.boxSprite){var a=new egret.Sprite,s=SpriteUtil.createImage("menuover_json#jumpcoin"),r=SpriteUtil.createText("34",34,16643118,"center",!0);r.width=s.width,r.anchorOffsetX=r.width/2,r.y=2-r.height/2,a.addChild(s),a.addChild(r),a.touchEnabled=!0,a.touchChildren=!1,a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBox,this),this.boxSprite=a}if(t){var o=this.answerList[e].parent.localToGlobal(this.answerList[e].x,this.answerList[e].y);this.boxSprite.x=o.x,this.boxSprite.y=o.y,this.boxSprite.index=e,this.addChild(this.boxSprite),this.boxSprite.getChildAt(1).text=this.model.levelData.level.chest_gold,AppCenter.uploadActivityLog("1020008","show","page"),this.playBoxEff(o),GameSound.instance().playSound("coinshow")}else this.boxSprite.index=-1,this.boxSprite.parent&&this.boxSprite.parent.removeChild(this.boxSprite)}},e.prototype.playBoxEff=function(t){var e=this;egret.Tween.removeTweens(this.boxSprite),egret.Tween.get(this.boxSprite).to({y:t.y-160},200,egret.Ease.circOut).call(function(){egret.Tween.get(e.boxSprite).to({y:t.y},400,egret.Ease.bounceOut).call(function(){var i=egret.setTimeout(function(){e.boxSprite.parent?e.playBoxEff(t):egret.Tween.removeTweens(e.boxSprite),egret.clearTimeout(i)},e,1e3)})})},e.prototype.playPuzzleEff=function(t){egret.Tween.get(this._puzzleItem,{loop:!0}).to({y:t.y-160},200,egret.Ease.circOut).to({y:t.y},400,egret.Ease.bounceOut).wait(1e3)},e.prototype.addEvent=function(){EventCenter.instance().addEventListener(GameEvent.UPDATE_GAME_INFO,this.refresh,this),EventCenter.instance().addEventListener(GameEvent.TIP_GAME_INFO_EVENT,this.tipNow,this),EventCenter.instance().addEventListener(GameEvent.HIDE_STATICS_GAME_EVENT,this.staticsHandle,this),EventCenter.instance().addEventListener(GameEvent.RESET_PUZZLE_ITEM,this.resetPuzzleItem,this),EventCenter.instance().addEventListener(GameEvent.FLY_PUZZLE,this.onFlyPuzzle,this),EventCenter.instance().addEventListener(GameEvent.ADD_PUZZLE,this.onAddPuzzle,this)},e.prototype.removeEvet=function(){EventCenter.instance().removeEventListener(GameEvent.UPDATE_GAME_INFO,this.refresh,this),EventCenter.instance().removeEventListener(GameEvent.TIP_GAME_INFO_EVENT,this.tipNow,this),EventCenter.instance().removeEventListener(GameEvent.HIDE_STATICS_GAME_EVENT,this.staticsHandle,this),EventCenter.instance().removeEventListener(GameEvent.RESET_PUZZLE_ITEM,this.resetPuzzleItem,this),EventCenter.instance().removeEventListener(GameEvent.FLY_PUZZLE,this.onFlyPuzzle,this),EventCenter.instance().removeEventListener(GameEvent.ADD_PUZZLE,this.onAddPuzzle,this)},e.prototype.onFlyPuzzle=function(t){var e=t.data,i=new eui.Image(e.url);i.width=300,i.height=300,Game.instance().addTop(i),i.x=e.point.x,i.y=e.point.y;var n=this._puzzleBtn.parent.localToGlobal(this._puzzleBtn.x,this._puzzleBtn.y),a=.2;egret.Tween.get(i).to({x:n.x,y:n.y,scaleX:a,scaleY:a},500).call(function(){i.parent.removeChild(i)})},e.prototype.onAddPuzzle=function(){var t=this._puzzleNum.text,e=t.split("/"),i=Number(e[0]);i++,this._puzzleBtn.visible=!0,this.setPuzzleNumTextFlow(i)},e.prototype.staticsHandle=function(){this.isRunning&&(GameData.statisticsData.gamestauts=3,HttpServer.statisticsGame())},e.prototype.touchBox=function(t){var e=this;if(!this.isSuccess){GameSound.instance().playSound("coinshow"),this.showBox(!1),AppCenter.uploadActivityLog("1020008","click","page");var i=this.model.levelData.level;HttpServer.getBoxLevelData(0,i.id).then().then(function(t){e.model.updateCoinNum(t.gold),AppCenter.showAdDialog(1,t.gold,e.model.totalCoin,"bigbox").then(function(t){AppCenter.showVideoAd("rewardvideobox").then(function(t){HttpServer.getBoxLevelData(1,i.id).then().then(function(t){e.model.updateCoinNum(t.gold),AppCenter.showAdDialog(3,t.gold,e.model.totalCoin,"bigbox"),e.showBox(!1)})})}),e.showBox(!1)})}},e.prototype.touchButton=function(t){var e=t.target.name;if(!(this.isSuccess||e.search("btn_")<0)){GameSound.instance().playSound("btn");var i=e.split("_")[1];1==i?(AppCenter.uploadActivityLog("1020001","close","page"),GameData.statisticsData.gamestauts=2,HttpServer.statisticsGame(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME,action:1}))):2==i?console.log("点击福袋"):3==i?(AppCenter.showTeachDialog(),AppCenter.uploadActivityLog("1020002","click","page")):4==i?this.tipRightAnswer():5==i?(GameData.statisticsData.retrycount++,this.nextLevel(),AppCenter.uploadActivityLog("1020004","click","page")):6==i&&(AppCenter.openPage("h5",GameData.H5_URL_HOST+"sendphone.html",!1,!1,!1),AppCenter.uploadActivityLog("1080066","click","page"))}},e.prototype.tipRightAnswer=function(){var t=this;if(this.isOnlyLeftLast())return void AppCenter.showToast("不能再提示了");var e=this.model.levelData.tips;if(0>=e){if(GameData.isVerifyMode())return void AppCenter.showToast("不能再提示了");var i=this.model.levelData.tips_share_chances;i>0?(AppCenter.uploadActivityLog("1020006","click","page","","2"),AppCenter.inviteFriend(),i--,this.model.levelData.tips_share_chances=i,HttpServer.getUseTipTimesData(2).then(function(e){t.model.levelData.tips_share_chances=i}),this.tipNow()):AppCenter.showToast("不能再提示了")}else GameData.statisticsData.clicktips++,AppCenter.uploadActivityLog("1020006","click","page","","2"),HttpServer.getUseTipTimesData().then(function(e){t.model.levelData.tips=e.tips,t.refresh();var i=t.getCurrentRightItem();return i?void t.checkResult(i):void console.log("不能再透露了")})},e.prototype.tipNow=function(){var t=this.getCurrentRightItem();return t?void this.checkResult(t):void console.log("没有正确答案")},e.prototype.touchHandler=function(t){var e=t.target;if(!this.isSuccess&&e instanceof WordItem){var i=e.parent.name,n=e.wordVo;if(GuideTip.instance().close(),"question"==i){if(n.status==ConstUtil.STATUS_BLANK||n.status==ConstUtil.STATUS_COMPLETED||n.status==ConstUtil.STATUS_STATIC)return;this.nextSelected(!1),n.aIndex>=0&&(this.answerList[n.aIndex].visible=!0,this.boxSprite&&this.boxSprite.index==n.aIndex&&this.showBox(!1),n.aIndex=-1),e.selected=!0,e.setWord("",ConstUtil.STATUS_NORMAL)}else if("answer"==i){if(!n.current)return;if(e.wordVo.status==ConstUtil.STATUS_PUZZLE){var a=new GetedPuzzle;a.open(),AppCenter.uploadActivityLog("1080070","click","page")}else GameData.statisticsData.clicks++,this.checkResult(e)}}},e.prototype.checkResult=function(t){var e=this.getCurrentSelectItem();if(!e)return void console.log("没有选中要填入的格子");t.visible=!1;var i=[!1,!1],n=i[0],a=i[1],s=e.wordVo.index;e.setWord(t.wordVo.current),e.wordVo.aIndex>=0&&(this.answerList[e.wordVo.aIndex].visible=!0,this.boxSprite&&this.boxSprite.index==e.wordVo.aIndex&&this.showBox(!1)),e.wordVo.aIndex=t.wordVo.index;var r=this.getIncludedArr(s);if(r&&0!=r.length){for(var o=~~(new Date).getTime(),l=[],h=r.length,c=0;h>c;c++){for(var d=r[c],p=d.start,u=d.blank.length,g="",v=[],m=0;u>m;m++){var _=d.direction?m*ConstUtil.COLUMNS+p:m+p;if(_>=ConstUtil.ROWS*ConstUtil.COLUMNS)break;g+=this.questionList[_].wordVo.current,v.push(this.questionList[_])}if(g.length!=u){if(n||a)break;e.selected=!1,e.setWord(t.wordVo.current,ConstUtil.STATUS_CHECKED)}else if(g==d.content){var f=GameData.statisticsData.diomicosttime;""!=f&&(f+=","),f+=d.content+":"+(o-this.curItemTime)+"ms",GameData.statisticsData.diomicosttime=f;for(var E=v.length,T=0;E>T;T++){var y=v[T];y.selected=!1,y.complete(),T==E-1&&l.push(y)}a=!0}else a||(e.selected=!0,e.setWord(t.wordVo.current,ConstUtil.STATUS_WRONG),n=!0,GameSound.instance().playSound("tianzierr"),AppCenter.nativeCache(ConstUtil.CACHE_ERROR_GUIDE,"2").then(function(t){var i=t&&t.value?parseInt(t.value):0;if(isNaN(i)&&(i=0),3>i){var n=e.parent.localToGlobal(e.x-e.width/2,e.y-e.height/2);GuideTip.instance().playGuide(new egret.Rectangle(n.x-5,n.y-5,e.width+10,e.height+10),2),i++,AppCenter.nativeCache(ConstUtil.CACHE_ERROR_GUIDE,"1",i+"")}}))}if(a&&(this.curItemTime=o),a&&this.isAllCompleted()){this.isSuccess=!0;var C=l.length;if(0==C)return void EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_CHAIN_OVER}));for(var c=0;C>c;c++)c==C-1?this.playCoinEffect(l[c]).then(function(){EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_CHAIN_OVER}))}):this.playCoinEffect(l[c])}else{if(a){for(var w=0,S=l;w<S.length;w++){var A=S[w];this.playCoinEffect(A)}this.showBox(!0,t.wordVo.index)}(!e.selected||a)&&this.nextSelected(!0,e.wordVo.index)}}},e.prototype.isAllCompleted=function(){for(var t=0,e=this.currBlankItems;t<e.length;t++){var i=e[t];if(i.wordVo.status!=ConstUtil.STATUS_COMPLETED)return!1}return!0},e.prototype.getIncludedArr=function(t){if(!(0>t)){for(var e=this.model.levelConfig,i=e.length,n=[],a=0;i>a;a++){var s=e[a],r=s.start,o=s.direction,l=s.blank.length;if(o)for(var h=0;l>h;h++){var c=h*ConstUtil.COLUMNS+r;c==t&&n.push(s)}else t>=r&&r+l>t&&n.push(s)}return n}},e.prototype.resetWrongItem=function(){if(this.currBlankItems&&0!=this.currBlankItems.length)for(var t=0,e=this.currBlankItems;t<e.length;t++){var i=e[t];(i.wordVo.status==ConstUtil.STATUS_CHECKED||i.wordVo.status==ConstUtil.STATUS_WRONG)&&(i.setWord("",ConstUtil.STATUS_NORMAL),this.answerList[i.wordVo.aIndex].visible=!0,i.wordVo.aIndex=-1)}},e.prototype.getCurrentRightItem=function(){var t=this.getCurrentSelectItem();if(!t)return null;t.wordVo.status!=ConstUtil.STATUS_NORMAL&&this.resetWrongItem();for(var e=0,i=this.answerList;e<i.length;e++){var n=i[e];if(n.visible&&n.wordVo.current==t.wordVo.correct)return n}return console.log("没有正确答案格子"),null},e.prototype.getCurrentSelectItem=function(){for(var t=0,e=this.currBlankItems;t<e.length;t++){var i=e[t];if(i.selected)return i}return null},e.prototype.isOnlyLeftLast=function(){for(var t=0,e=0,i=this.answerList;e<i.length;e++){var n=i[e];n.visible&&t++}return 1==t},e.prototype.playCoinEffect=function(t){var e=this;return new Promise(function(i,n){if(GameSound.instance().playSound("gold4"),GameData.isVerifyMode())return void i();var a=e.btnSprite.getChildAt(2),s=a.parent.localToGlobal(a.x+a.width/2,a.y+a.height/2),r=t.parent.localToGlobal(t.x,t.y),o=e.getLightPools(),l=0,h=0;o.gotoAndPlay(1),o.addEventListener(egret.Event.COMPLETE,function(){o.parent&&o.parent.removeChild(o),o.stop()},e),o.x=r.x-15,o.y=r.y-15,e.addChild(o);var c=egret.setInterval(function(){if(l++,l>4)return void egret.clearInterval(c);var t=e.getCoinPools();t.reset(r,s),Game.instance().addTop(t),egret.Tween.get(t).to({factor:1},500).call(function(){egret.Tween.removeTweens(t),GameUtil.playBreathAnim(e.btnSprite.getChildAt(2),{scaleX:1,scaleY:1},{scaleX:1.2,scaleY:1.2},50,1),t.clear(),h++,h>=4&&i()})},e,100)})},e.prototype.getCoinPools=function(){this.coinPools||(this.coinPools=[]);for(var t=0,e=this.coinPools;t<e.length;t++){var i=e[t];if(!i.isActivate)return i}var n=new BezierCoin;return n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,n.scaleX=.5,n.scaleY=.5,this.coinPools.push(n),n},e.prototype.getLightPools=function(){this.lightPools||(this.lightPools=[]);for(var t=0,e=this.lightPools;t<e.length;t++){var i=e[t];if(!i.parent)return i}var n=SpriteUtil.createMovieClip("coinlight");return n.anchorOffsetX=66,n.anchorOffsetY=66,n.frameRate=60,n.alpha=.5,this.lightPools.push(n),n.blendMode=egret.BlendMode.ADD,n},e.prototype.refresh=function(t){void 0===t&&(t=null);var e=this.model.levelData;this.levelTxt.textFlow=[{text:"第"},{text:""+e.level.id,style:{textColor:15496199}},{text:"关"}],e.tips>0?(this.tipTimesTxt.text="x"+e.tips,this.videoImg.visible=!1):(this.tipTimesTxt.text="",this.videoImg.visible=!0),GameData.isVerifyMode()&&(this.videoImg.visible=!1,this.tipTimesTxt.visible=!1)},e.prototype.enter=function(){return document.body.style.background="#EBE7DD",this.boxSprite&&this.boxSprite.parent?(egret.Tween.removeTweens(this.boxSprite),void this.boxSprite.parent.removeChild(this.boxSprite)):(t.prototype.enter.call(this),this.isSuccess=!1,this.curTime=~~((new Date).getTime()/1e3),this.curItemTime=~~(new Date).getTime(),this.model=GameModel.instance(),this.nextLevel(),!TimeUtil.puzzleClose&&this.setPuzzleBtn(),AppCenter.hidePassGameView(),void AppCenter.uploadActivityLog("1020001","show","page"))},e.prototype.exit=function(){this.reset(),GuideTip.instance().close(),AppCenter.hideBanner();var e=~~((new Date).getTime()/1e3);GameData.statisticsData.costtime=e-this.curTime,this.curTime=e,t.prototype.exit.call(this)},e}(BaseScene);__reflect(IdiomScene.prototype,"IdiomScene");var JudgeIdiomScene=function(t){function e(){var e=t.call(this)||this;return e.totalTime=5,e.totalCopyTime=5,e.timeAngle=0,e.drawFlag=!1,e.model=JudgeModel.instance(),e.isClick=!0,e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=SpriteUtil.createImage("judgesky_png",!1);t.width=SpriteUtil.stageWidth,this.addChild(t),this.starEffSpr=new egret.Sprite,this.addChild(this.starEffSpr);var e=SpriteUtil.createImage("judgegame_json#jmoonlight",!1);e.x=SpriteUtil.stageWidth-e.width,this.addChild(e);var i=SpriteUtil.createImage("judgebg_png",!1);i.width=SpriteUtil.stageWidth,i.height=SpriteUtil.stageHeight,this.addChild(i),this.createTitle(),this.createQA(),this.createJudge(),this.touchEnabled=!0,this.timer=new egret.Timer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.createTitle=function(){var t=new egret.Sprite,e=SpriteUtil.createImage("guessgame_json#backbtn",!1);e.x=10,e.name="homebtn",t.addChild(e);var i=SpriteUtil.createImage("judgegame_json#jtitle");i.anchorOffsetY=0,i.x=SpriteUtil.stageCenterX,i.y=78,t.addChild(i);var n=SpriteUtil.createImage("judgegame_json#jprogressbg");t.addChild(n),n.x=SpriteUtil.stageCenterX,n.y=i.y+i.height+n.height/2+26;var a=SpriteUtil.createImage("judgegame_json#jprogressbar",!1);t.addChild(a),a.x=n.x-n.width/2+6,a.y=n.y-a.height/2,a.scale9Grid=new egret.Rectangle(10,10,4,4),this.progressBar=a;var s=SpriteUtil.createText("20/20",28,16777215,"center",!0,4,4265737);s.x=n.x-s.width/2,s.y=n.y-s.height/2,t.addChild(s),this.progressTxt=s,this.addChild(t),t.y=GameData.ipxHgt,t.cacheAsBitmap=!0},e.prototype.createQA=function(){var t=new egret.Sprite;t.y=248+GameData.ipxHgt,this.addChild(t);var e=SpriteUtil.createImage("judgegame_json#jblackbg");e.anchorOffsetY=0,e.x=SpriteUtil.stageCenterX,t.addChild(e);for(var i=[],n=new egret.Sprite,a=0;4>a;a++){var s=new BigWordItem;s.x=74+(s.width+13)*a,s.y=200,n.addChild(s),i.push(s)}n.x=SpriteUtil.stageCenterX-n.width/2,t.addChild(n),this.questionItemArr=i;var r=SpriteUtil.createText("剩余答题时间          秒",34,16771765,"left",!0);r.x=200,r.y=320,t.addChild(r);var o=SpriteUtil.createImage("judgegame_json#judgeperson");o.anchorOffsetY=0,o.x=SpriteUtil.stageCenterX,o.y=r.y+100,t.addChild(o),t.cacheAsBitmap=!0;var l=new egret.Sprite;l.graphics.lineStyle(10,327681,.5),l.graphics.beginFill(327681,0),l.graphics.drawArc(0,0,33,0,2*Math.PI),l.graphics.endFill();var h=new egret.Shape;h.graphics.lineStyle(6,16772660,1),h.graphics.beginFill(16772660,0),h.graphics.drawArc(0,0,34,0,0),h.graphics.endFill(),l.addChild(h),l.x=412+l.width/2+t.x,l.y=295+l.height/2+t.y;var c=SpriteUtil.createText("5",48,16772660,"center",!0);c.anchorOffsetY=c.height/2,c.y=2,c.width=t.width,c.x=-c.width/2,l.addChild(c),this.leftTimeTxt=c,this.addChild(l),this.timeShape=h},e.prototype.createJudge=function(){var t=new egret.Sprite,e=SpriteUtil.createImage("judgegame_json#janswerbg",!1),i=SpriteUtil.createText("毴",100,0,"center",!0);i.width=e.width,i.height=e.height-15,i.verticalAlign="middle",this.answerTxt1=i;var n=new egret.Sprite;n.addChild(e),n.addChild(i),n.x=180,n.y=e.height,n.touchChildren=!1,n.touchEnabled=!0,n.anchorOffsetX=80,n.anchorOffsetY=e.height,this.ansSpr1=n,t.addChild(n);var a=SpriteUtil.createImage("judgegame_json#janswerbg",!1);a.scaleX=-1,a.x=a.width;var s=SpriteUtil.createText("毴",100,0,"center",!0);s.width=a.width,s.height=a.height-15,s.verticalAlign="middle";var r=new egret.Sprite;this.answerTxt2=s,r.addChild(a),r.addChild(s),r.touchChildren=!1,r.touchEnabled=!0,r.x=SpriteUtil.stageWidth-r.width/2-130,r.y=a.height,r.anchorOffsetX=80,r.anchorOffsetY=a.height,this.ansSpr2=r,t.addChild(r);var o=SpriteUtil.createImage("judgegame_json#leftperson",!1);o.x=30,o.y=n.y-20;var l=SpriteUtil.createImage("judgegame_json#rightperson",!1);l.x=SpriteUtil.stageWidth-l.width-30,l.y=o.y,t.addChild(o),t.addChild(l),t.y=SpriteUtil.stageHeight-t.height-30,this.addChild(t),t.cacheAsBitmap=!0},e.prototype.playStarEffect=function(){var t=this.getStarPools();t.alpha=0;var e=(.6+.4*Math.random(),.8+.7*Math.random()),i=egret.Tween.get(t),n=500+2e3*Math.random();i.to({alpha:1,scaleX:e,scaleY:e},n),i.to({alpha:0,scaleX:.1,scaleY:.1},500).call(function(){egret.Tween.removeTweens(t),t.parent&&t.parent.removeChild(t)})},e.prototype.getStarPools=function(){this.starPools||(this.starPools=[]);for(var t,e=this.starPools.length,i=0;e>i;i++){var n=this.starPools[i];if(!n.parent){t=n;break}}t||(t=SpriteUtil.createImage("judgegame_json#jstar"),this.starPools.push(t));var a=Math.random()>.5?1:-1,s=Math.random()>.5?1:-1;return t.x=SpriteUtil.stageCenterX+375*a*Math.random(),t.y=250*s*Math.random(),this.starEffSpr.addChild(t),t},e.prototype.addEvent=function(){EventCenter.instance().addEventListener(JudgeEvent.BACK_TO_JUDGE_GAME,this.startNow,this),EventCenter.instance().addEventListener(JudgeEvent.CONTINUE_JUDGE_GAME,this.nextIdiom,this)},e.prototype.removeEvent=function(){EventCenter.instance().removeEventListener(JudgeEvent.BACK_TO_JUDGE_GAME,this.startNow,this),EventCenter.instance().removeEventListener(JudgeEvent.CONTINUE_JUDGE_GAME,this.nextIdiom,this)},e.prototype.showJudgeDialog=function(t,e){return void 0===e&&(e=null),this.judgeDialgView||(this.judgeDialgView=new JudgeDialogView),this.judgeDialgView.isOpened?(this.judgeDialgView.close(),!1):(this.timer.stop(),this.drawFlag=!1,this.judgeDialgView.open(),this.judgeDialgView.setInfo(t,e),!0)},e.prototype.touchHandler=function(t){var e=t.target.name;if(t.target==this.ansSpr1||t.target==this.ansSpr2){if(!this.isClick)return;this.isClick=!1,AppCenter.uploadActivityLog("1020038","click","page"),"right"==e?(this.nextIdiom(),GameSound.instance().playSound("btn")):this.playWrong()}else"homebtn"==t.target.name&&(GameSound.instance().playSound("btn"),this.showJudgeDialog(1),this.timer.stop(),this.drawFlag=!1)},e.prototype.playWrong=function(){var t=this;GameSound.instance().playSound("tianzierr"),this.timer.stop(),this.drawFlag=!1;for(var e=this.questionItemArr.length,i=this.model.getCurrentIdiom(),n=0;e>n;n++)this.questionItemArr[n].setWord(i.idiom[n]),this.questionItemArr[n].showErrorEff();egret.setTimeout(function(){t.showJudgeDialog(0)},this,400)},e.prototype.timerHandler=function(t){return this.totalTime--,this.totalTime<0?void this.playWrong():(this.slideDraw(),this.totalTime<=3&&GameSound.instance().playSound("timeflow"),void(this.leftTimeTxt.text=this.totalTime<0?"0":this.totalTime+""))},e.prototype.loop=function(){var t=(new Date).getTime();if(t-this.curTime>30&&(this.curTime=t,this.playStarEffect()),this.drawFlag&&!(this.timeAngle>=2*Math.PI-.1)){var e=2*Math.PI/(60*this.totalCopyTime);this.timeAngle+=e,this.slideDraw()}},e.prototype.slideDraw=function(t){void 0===t&&(t=0);var e=this.timeShape;e.graphics.clear(),e.graphics.lineStyle(6,16772660,1),e.graphics.beginFill(16772660,0),e.graphics.drawArc(0,0,34,0,this.timeAngle),e.graphics.endFill()},e.prototype.nextIdiom=function(){var t=this.model.getNextIdiom(),e=~~((new Date).getTime()/1e3);if(e-this.achieveTime<=2&&HttpServer.reportJudgeCompleteAchieve(),this.achieveTime=e,!t)return this.timer.stop(),this.drawFlag=!1,this.isClick=!1,void this.model.getJudgeResultData().then(function(t){var e=new BlackNormalView;e.open(1,t)});for(var i=this.questionItemArr.length,n="",a=0;i>a;a++)a==t.blank_pos?(this.questionItemArr[a].setWord(""),n=t.idiom[a]):this.questionItemArr[a].setWord(t.idiom[a]);this.answerTxt1.text=t.options[0],this.answerTxt2.text=t.options[1],this.ansSpr1.name=t.options[0]==n?"right":"wrong",this.ansSpr2.name=t.options[1]==n?"right":"wrong";var s=this.model.getIndexAndTotal(),r=480*s.num/s.total;this.progressTxt.text=s.num+"/"+s.total,this.progressBar.width=r,this.ansSpr1.scaleX=0,this.ansSpr1.scaleY=0;var o=egret.Tween.get(this.ansSpr1);o.wait(200),o.to({scaleX:1,scaleY:1},300,egret.Ease.backOut),this.ansSpr2.scaleX=0,this.ansSpr2.scaleY=0;var l=egret.Tween.get(this.ansSpr2);l.wait(200),l.to({scaleX:1,scaleY:1},300,egret.Ease.backOut),this.reset(),this.startNow()},e.prototype.reset=function(){this.totalTime=this.model.userData.expire,this.totalCopyTime=this.totalTime,this.timeShape.graphics.clear(),this.timeAngle=0,this.isClick=!0,this.drawFlag=!1,this.leftTimeTxt.text=this.totalTime<0?"0":this.totalTime+"",this.timer.stop(),this.timer.reset()},e.prototype.startNow=function(){this.timer.start(),this.drawFlag=!0},e.prototype.showStartTip=function(){var t=this,e=new egret.Sprite;e.graphics.beginFill(0,.85),e.graphics.drawRect(0,0,SpriteUtil.stageWidth,SpriteUtil.stageHeight),e.graphics.endFill();var i=SpriteUtil.createImage("judgegame_json#tguidebg"),n=SpriteUtil.createImage("judgegame_json#tpersonguide");i.x=SpriteUtil.stageCenterX,i.y=SpriteUtil.stageHeight-224-i.height/2,e.addChild(i),n.x=i.x-i.width/2+10,n.y=i.y+i.height/2-n.height/2,e.addChild(n);var a=SpriteUtil.createText("",32,9522688);a.lineSpacing=16,a.textFlow=[{text:"大人，本轮挑战共"},{text:"20道题，\n",style:{textColor:15174449,bold:!0}},{text:"每道题目有"},{text:"5秒钟",style:{textColor:15174449,bold:!0}},{text:"时间"}],a.x=n.x+101,a.y=i.y-i.height/2+45,e.addChild(a);var s=SpriteUtil.createText("3",200,16777215,"center",!0);s.fontFamily=1==AppUtil.isAndroidOrIos()?"xnumberBold":"",s.width=300,s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,s.x=SpriteUtil.stageCenterX,s.y=SpriteUtil.stageCenterY,e.addChild(s),this.playCountDown(s).then(function(){e.removeChildren(),e.parent&&e.parent.removeChild(e),t.startNow()})["catch"](function(){e.removeChildren(),e.parent&&e.parent.removeChild(e)}),this.addChild(e),e.touchEnabled=!0},e.prototype.playCountDown=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.playNumberCountDown(t,"3")];case 1:return e.sent(),[4,this.playNumberCountDown(t,"2")];case 2:return e.sent(),[4,this.playNumberCountDown(t,"1")];case 3:return e.sent(),[4,this.playNumberCountDown(t)];
case 4:return e.sent(),[2]}})})},e.prototype.playNumberCountDown=function(t,e){var i=this;return void 0===e&&(e="Go"),new Promise(function(n,a){t.scaleX=3,t.scaleY=3,t.alpha=.1,t.text=e,egret.Tween.get(t).to({scaleX:1,scaleY:1,alpha:1},200).call(function(){egret.setTimeout(function(){egret.Tween.removeTweens(t),i.isRunning?n():a()},i,600)})})},e.prototype.enter=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.prototype.enter.call(this),this.nextIdiom(),this.timer.stop(),this.drawFlag=!1,this.showStartTip(),this.curTime=(new Date).getTime(),AppCenter.uploadActivityLog("1020038","show","page"),[2]})})},e.prototype.exit=function(){t.prototype.exit.call(this),this.reset(),this.model.reset(),this.judgeDialgView&&this.judgeDialgView.close(),AppCenter.uploadActivityLog("1020038","close","page")},e}(BaseScene);__reflect(JudgeIdiomScene.prototype,"JudgeIdiomScene");var MenuScene=function(t){function e(){var e=t.call(this)||this;return e.headItem=HeadItem.instance(),e.curRobotTime=0,e.timeOutId=0,e.isClick=!1,e.model=GameModel.instance(),e.showInvitePromCountdown=!0,e.enterFromLogin=!0,e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=this,e=SpriteUtil.createImage("bg_png",!1);e.width=SpriteUtil.stageWidth,e.height=SpriteUtil.stageHeight,this.addChild(e);var i=SpriteUtil.createImage("groundbg_png",!1);i.width=SpriteUtil.stageWidth,this.addChild(i);var n=SpriteUtil.createImage("menuover_json#scloud",!1);this.addChild(n),this.playCloud(n,2),n.y=40;var a=SpriteUtil.createImage("menuover_json#zcloud",!1);this.addChild(a),a.y=80,this.playCloud(a,6);var s=SpriteUtil.createImage("menuover_json#scloud",!1);s.y=160,this.addChild(s),this.playCloud(s,10),this.createHomeParts(),this.createRankBtn();var r=new ActivityComp;r.y=SpriteUtil.stageHeight-r.Height-25,this.addChild(r),this.activityComp=r,this.createPlayParts(),this.createBubbles(),this.showGuide(),this.checkEnv(),this.model.getInitGodBeastInfo().then(function(e){t.showGodBeast()}),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.showPointTip=function(t){GameData.isVerifyMode()||this.activityComp.showMissionTip(t.data.status)},e.prototype.createHongbao=function(){if(!GameData.isVerifyMode()){AppCenter.uploadActivityLog("1010103","show","entry");var t=SpriteUtil.createMovieClip("yibai");t.touchEnabled=!0,t.name="yibaihonbbao";var e=200+GameData.ipxHgt;t.x=80,t.y=e;var i=egret.Tween.get(t,{loop:!0});return i.to({y:e-10},800,egret.Ease.quadOut).to({y:e},800,egret.Ease.quadOut),t.play(-1),this.addChild(t),t}},e.prototype.onTouchTap=function(t){var e=t.target.name;"yibaihonbbao"==e?(AppCenter.uploadActivityLog("1010103","click","entry"),GameModel.instance().getAccountInfo().then(function(t){if(0==t.mIntCurPlatform)AppCenter.showToast("游客不能参与哦~");else{var e=RedBagView.hundredData;e?(AppCenter.openPage("h5",GameData.H5_URL_HOST+("griddle.html?first_status="+e.first_status),!1,!1,!1),RedBagView.hundredData.first_status=0):HttpServer.getHundredInfo().then(function(t){RedBagView.hundredData=t,AppCenter.openPage("h5",GameData.H5_URL_HOST+("griddle.html?first_status="+t.first_status),!1,!1,!1),RedBagView.hundredData.first_status=0})}})):this.activityComp.touchHandler(t)},e.prototype.createRankBtn=function(){var t=this;this._mailbtn=SpriteUtil.createImage("menuover_json#mailbtn",!1),this._mailbtn.x=SpriteUtil.stageWidth-this._mailbtn.width-15,this._mailbtn.y=GameData.ipxHgt+138,this.addChild(this._mailbtn),this._mailbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSound.instance().playSound("btn"),GameView.instance().showMailView(),AppCenter.uploadActivityLog("1010061","click","page")},this),this._mailRedPoint=SpriteUtil.createImage("menuover_json#redpoint"),this._mailRedPoint.x=this._mailbtn.x+60,this._mailRedPoint.y=this._mailbtn.y+10,this._mailRedPoint.visible=!1,this.addChild(this._mailRedPoint),this._mailbtn.visible=!GameData.isVerifyMode();var e=SpriteUtil.createImage("menuover_json#cybaike",!1);e.x=SpriteUtil.stageWidth-e.width-2,e.y=GameData.ipxHgt+252,this.addChild(e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSound.instance().playSound("btn"),AppCenter.nativeCache(ConstUtil.CACHE_FIRST_BAIKI,"1","1"),AppCenter.uploadActivityLog("1010097","click",""),AppCenter.openPage("notebook","")},this),AppCenter.uploadActivityLog("1010097","show",""),AppCenter.nativeCache(ConstUtil.CACHE_FIRST_BAIKI,"2").then(function(i){var n=i.value?parseInt(i.value):0;if(!n){var a=!0;if(a){var s=new IconBtnTip;s.showTip("生词本搬到这了哟~",5e3),s.x=e.x-s.width,s.y=e.y,t.addChild(s)}}})},e.prototype.createPlayParts=function(){var t=this,e=new StartItem;e.x=SpriteUtil.stageCenterX-e.width/2,e.y=SpriteUtil.stageHeight-420,this.addChild(e),this.startItem=e,Game.instance().gameStage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){e.target.parent!=t._treeGetDialog&&e.target!=t.treeImg&&"getTreeBtn"!=e.target.name&&"treeCoinBtn"!=e.target.name&&"justfortreedialog"!=e.target.name&&t.showTreeDlg(!1),e.target instanceof eui.ToggleSwitch||"soundBtnName"!=e.target.name&&t.showSoundDialog(new GameEvent(GameEvent.SHOW_SOUND_SET_EVENT))},this);var i;i=AppUtil.isHuaWeiChannel()?SpriteUtil.createDragonBones("anniutiaodong3_ske_json","anniutiaodong3_tex"):SpriteUtil.createDragonBones("anniutiaodong_ske_json","anniutiaodong_tex"),i.x=e.x+200,i.y=e.y+174,this.addChild(i),i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startChainGame,this),this.startBtn=i,this.startTime=~~((new Date).getTime()/1e3)},e.prototype.createHomeParts=function(){var t=this.model.userData.home,e=new egret.Sprite;this.addChild(e);var i=new egret.Bitmap;GameUtil.getDynamicImage(ConstUtil.PATH_HOUSES+("house_"+t.house+".png")).then(function(t){i.texture=t,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height}),i.x=SpriteUtil.stageCenterX,i.y=460,e.addChild(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),i.touchEnabled=!0,this.houseImg=i;var n=new egret.Bitmap;GameUtil.getDynamicImage(ConstUtil.PATH_CARS+("car_"+t.car+".png")).then(function(t){n.texture=t,n.anchorOffsetX=n.width,n.anchorOffsetY=n.height}),n.x=SpriteUtil.stageWidth-20,n.y=SpriteUtil.stageCenterY-20,n.scaleX=.75,n.scaleY=.75,e.addChild(n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),n.touchEnabled=!0,this.carImg=n;var a=new egret.Bitmap;GameUtil.getDynamicImage(ConstUtil.PATH_PETS+("dog_"+t.pet+".png")).then(function(t){a.texture=t,a.anchorOffsetX=a.width,a.anchorOffsetY=a.height}),a.x=SpriteUtil.stageWidth-40,a.y=SpriteUtil.stageCenterY+200,a.scaleX=.8,a.scaleY=.8,e.addChild(a),a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),a.touchEnabled=!0,this.petImg=a;var s=new egret.Bitmap;GameUtil.getDynamicImage(ConstUtil.PATH_TREES+("tree_"+t.tree+".png")).then(function(t){s.texture=t,s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height}),s.x=168,s.y=SpriteUtil.stageCenterY+140,e.addChild(s),s.touchEnabled=!0,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTree,this),this.treeImg=s;var r=this.model.userData.character,o=new egret.Bitmap;GameUtil.getDynamicImage(ConstUtil.PATH_CHARACTERS+("character_"+r.char_level.level+".png")).then(function(t){o.texture=t,o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height}),o.x=SpriteUtil.stageCenterX-1,o.y=SpriteUtil.stageHeight-456,e.addChild(o),o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),o.touchEnabled=!0,this.avatarImg=o,this.createTreeDC(),this.playTreeEffect(),this.showCoinTip()},e.prototype.createTreeDC=function(){var t=new egret.Sprite,e=SpriteUtil.createImage("menuover_json#treetime",!1);t.addChild(e);var i=SpriteUtil.createText("00:00",26,16777215,"center");i.fontFamily="xnumberMedium",i.width=e.width,i.y=20,t.addChild(i),t.x=185-e.width/2-10,t.y=this.treeImg.y-60,this.addChild(t),t.cacheAsBitmap=!0,t.touchChildren=!1,t.touchEnabled=!0,t.name="getTreeBtn",t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTree,this),this.treeTimeSprite=t},e.prototype.startChainGame=function(t){GameModel.instance().userData;AppCenter.uploadActivityLog("1010011","click","page"),GameSound.instance().playSound("btn"),GameData.statisticsData.gameid=(new Date).toLocaleDateString()+"-"+Math.random().toLocaleString(),GameData.statisticsData.retrycount=0,GameData.statisticsData.clicks=0,GameData.statisticsData.clicktips=0,GameData.statisticsData.continuous=0,EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_START_EVENT))},e.prototype.showGuide=function(){var t=this;GameData.isVerifyMode()||AppCenter.nativeCache(ConstUtil.CACHE_START_GUIDE,"2").then(function(e){var i=e&&e.value?parseInt(e.value):0;if(isNaN(i)&&(i=0),0==i){var n=new egret.Rectangle(t.startItem.x+35,t.startItem.y+107,331,132);GuideTip.instance().playGuide(n,0),i=1,AppCenter.nativeCache(ConstUtil.CACHE_START_GUIDE,"1",""+i)}})},e.prototype.playCloud=function(t,e){var i=this;void 0===e&&(e=0);var n=(Math.random()>.5,SpriteUtil.stageCenterX+e*t.width),a=-t.width,s=.6+.4*Math.random();t.x=n,t.scaleX=s,t.scaleY=s,egret.Tween.removeTweens(t),egret.Tween.get(t).to({x:a},3e4+~~(1e4*Math.random())).call(function(){i.playCloud(t,e)})},e.prototype.showCoinTip=function(t){if(void 0===t&&(t=!0),GameData.isVerifyMode()&&(t=!1),!this.coinSprite){var e=new egret.Sprite,i=SpriteUtil.createImage("menuover_json#cointipbg",!1);i.scale9Grid=new egret.Rectangle(60,32,14,10),e.addChild(i);var n=SpriteUtil.createImage("menuover_json#coin",!1);n.width=41,n.height=42,n.x=13,n.y=14,e.addChild(n);var a=SpriteUtil.createText("90",30,3355443,"left",!0);a.fontFamily="xnumberMedium",a.x=60,a.y=25,e.addChild(a),e.anchorOffsetY=i.height,e.x=240,e.y=SpriteUtil.stageCenterY-20,e.cacheAsBitmap=!0,e.touchChildren=!1,e.touchEnabled=!0,e.name="treeCoinBtn",e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTree,this),this.coinSprite=e}var s=this.model.userData,r=s.tree;egret.Tween.removeTweens(this.coinSprite),t&&r.tree_gold>0&&r.tree_chance>0?(this.addChild(this.coinSprite),this.coinSprite.getChildAt(2).text=r.tree_gold,this.coinSprite.getChildAt(0).width=54+28*r.tree_gold.toString().length,this.coinSprite.rotation=0,GameUtil.playBreathAnim(this.coinSprite,{rotation:0},{rotation:20})):this.coinSprite.parent&&this.coinSprite.parent.removeChild(this.coinSprite)},e.prototype.playTreeEffect=function(){},e.prototype.showRobotTip=function(t){var e=this;if(void 0===t&&(t=!0),!GameData.isVerifyMode()){if(!this.robotTipItem){var i=new RobotITipItem;i.x=400,i.y=SpriteUtil.stageCenterY+i.height/2,i.anchorOffsetX=0,i.anchorOffsetY=i.height/2,this.robotTipItem=i}if(!this.robotTipItem.parent){var n=(new Date).getTime()/1e3;n-this.curRobotTime<60||(this.curRobotTime=n,HttpServer.getCleverRobotData().then(function(t){if(egret.clearTimeout(e.timeOutId),t&&t.msg){e.addChild(e.robotTipItem),e.robotTipItem.refresh(t);var i=egret.Tween.get(e.robotTipItem);e.robotTipItem.scaleX=.1,e.robotTipItem.scaleY=.1,i.to({scaleX:1,scaleY:1},500,egret.Ease.backOut).call(function(){egret.Tween.removeTweens(e.robotTipItem)}),e.timeOutId=egret.setTimeout(function(){egret.clearTimeout(e.timeOutId),e.robotTipItem.close()},e,8e3)}}))}}},e.prototype.showGodBeast=function(t){var e=this;if(void 0===t&&(t=!0),!GameData.isVerifyMode()){if(!this.godBeastSpr){var i=new egret.Sprite,n=SpriteUtil.createImage("menuover_json#godbeastbg",!1);i.addChild(n);var a=SpriteUtil.createText("",22,16777215,"center");a.fontFamily="xnumberBold",a.lineSpacing=10,a.width=160,a.x=105,a.y=40,i.addChild(a);var s=SpriteUtil.createRect(120,32,32,32,8145706);s.x=0,s.y=111,i.addChild(s);var r=SpriteUtil.createText("00:00:00",22,16777215,"center");r.fontFamily="xnumberBold",r.width=120,r.y=118,i.addChild(r),i.cacheAsBitmap=!0,i.touchChildren=!1,i.touchEnabled=!0,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=SpriteUtil.stageWidth-n.width/2-15,i.y=SpriteUtil.stageCenterY-220,this.godBeastSpr=i,this.addChild(i),i.visible=!1,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSound.instance().playSound("btn"),AppCenter.openPage("h5",GameData.H5_URL_HOST+"fenhong.html",!1,!1,!1);var t=e.model.godBeastData;t.tmp_info&&t.tmp_info.tmpbonus?AppCenter.uploadActivityLog("1010057","click","page"):AppCenter.uploadActivityLog("1010056","click","page")},this)}var o=this.model.godBeastData;if(o){this.godBeastSpr.visible=t;var l="0";o.tmp_info&&o.tmp_info.tmpbonus?(l=(o.tmp_info.tmpbonus/1e4).toFixed(2),this.godBeastSpr.getChildAt(2).visible=!0,this.godBeastSpr.getChildAt(3).visible=!0,this.godBeastSpr.getChildAt(3).text=TimeUtil.getHMSTimeStr(600),t&&AppCenter.uploadActivityLog("1010057","show","page")):(this.godBeastSpr.getChildAt(2).visible=!1,this.godBeastSpr.getChildAt(3).visible=!1,l=o.profit.ytdavgrmb,t&&AppCenter.uploadActivityLog("1010056","show","page")),this.godBeastSpr.getChildAt(1).textFlow=[{text:"神兽今日分红\n￥"},{text:l,style:{size:36}}]}}},e.prototype.showExperienceReward=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isVerifyMode()?[2]:(t=this.model.inviteData,t&&0==t.can_get_status?[2]:[4,this.model.getInviteExpGoldData()]);case 1:return t=i.sent(),0==t.can_get_status?[2]:this.isRunning?(this.model.updateCoinNum(t.bonus),t.can_get_status=0,e=new GodBeastView,e.open(5,{gold:t.bonus}),[2]):[2]}})})},e.prototype.checkEnv=function(){GameData.isVerifyMode()&&(this.coinSprite&&(this.coinSprite.visible=!1),this.treeImg.visible=!1,this.treeTimeSprite.visible=!1)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),EventCenter.instance().addEventListener(GameEvent.SHOW_SOUND_SET_EVENT,this.showSoundDialog,this),EventCenter.instance().addEventListener(GameEvent.GOTO_START_EVENT,this.gotoStart,this),EventCenter.instance().addEventListener(GameEvent.LEVEL_UP_HOME_EVENT,this.levelUpNow,this),EventCenter.instance().addEventListener(GameEvent.UPDATE_MENU_INFO,this.refresh,this),EventCenter.instance().addEventListener(GameEvent.SHOW_TREE_GET_DIALOG_EVENT,this.showTreeDlgHandler,this),EventCenter.instance().addEventListener(GameEvent.SHOW_CAN_GET_POINT_EVENT,this.showPointTip,this),EventCenter.instance().addEventListener(GameEvent.UPDATE_HEAD_INFO_EVENT,this.refreshHead,this),EventCenter.instance().addEventListener(GameEvent.UPDATE_BUBBLE_INFO_EVENT,this.showBubble,this),EventCenter.instance().addEventListener(GameEvent.EXCHANGE_HOME_ITEM_EVENT,this.exchangeItem,this),EventCenter.instance().addEventListener(GameEvent.UPDATE_MAIL_STATUS_EVENT,this.checkMailData,this),EventCenter.instance().addEventListener(GameEvent.SHOW_HUNDRED,this.checkHundred,this),EventCenter.instance().addEventListener(GameEvent.CHECK_NEW_USER_REDPACK_EVENT,this.checkNewUserReadpack,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),EventCenter.instance().removeEventListener(GameEvent.SHOW_SOUND_SET_EVENT,this.showSoundDialog,this),EventCenter.instance().removeEventListener(GameEvent.GOTO_START_EVENT,this.gotoStart,this),EventCenter.instance().removeEventListener(GameEvent.LEVEL_UP_HOME_EVENT,this.levelUpNow,this),EventCenter.instance().removeEventListener(GameEvent.UPDATE_MENU_INFO,this.refresh,this),EventCenter.instance().removeEventListener(GameEvent.SHOW_CAN_GET_POINT_EVENT,this.showPointTip,this),EventCenter.instance().removeEventListener(GameEvent.UPDATE_HEAD_INFO_EVENT,this.refreshHead,this),EventCenter.instance().removeEventListener(GameEvent.SHOW_TREE_GET_DIALOG_EVENT,this.showTreeDlgHandler,this),EventCenter.instance().removeEventListener(GameEvent.UPDATE_BUBBLE_INFO_EVENT,this.showBubble,this),EventCenter.instance().removeEventListener(GameEvent.EXCHANGE_HOME_ITEM_EVENT,this.exchangeItem,this),EventCenter.instance().removeEventListener(GameEvent.UPDATE_MAIL_STATUS_EVENT,this.checkMailData,this),EventCenter.instance().removeEventListener(GameEvent.SHOW_HUNDRED,this.checkHundred,this),EventCenter.instance().removeEventListener(GameEvent.CHECK_NEW_USER_REDPACK_EVENT,this.checkNewUserReadpack,this)},e.prototype.touchHandler=function(t){GameData.isVerifyMode()||(GameSound.instance().playSound("btn"),t.target==this.houseImg||"boardname"==t.target.name?GameView.instance().showPictureView(ConstUtil.TYPE_ID_HOUSE):t.target==this.carImg?GameView.instance().showPictureView(ConstUtil.TYPE_ID_CAR):t.target==this.petImg?GameView.instance().showPictureView(ConstUtil.TYPE_ID_PET):t.target==this.avatarImg&&GameView.instance().showPictureView(ConstUtil.TYPE_ID_CHARACTER))},e.prototype.touchTree=function(t){var e=this.model.userData.home_unlock;if(e.tree<2)return GameSound.instance().playSound("btn"),void AppCenter.showToast("升级即可领取摇钱树奖励");var i=this.model.userData,n=i.tree,a=i.tree.tree_gold;n.tree_cd<=0&&a>0&&n.tree_chance>0?(GameSound.instance().playSound("tree"),this._treeGetDialog&&this._treeGetDialog.isOpened?this.showTreeDlg(!1):this.showTreeDlg(!0),AppCenter.uploadActivityLog("1010018","click","page","","1")):(GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1010018","click","page","","2"),GameView.instance().showPictureView(ConstUtil.TYPE_ID_TREE))},e.prototype.showTreeDlgHandler=function(t){var e=this.model.userData.home_unlock;if(e.tree<2)return GameSound.instance().playSound("btn"),void AppCenter.showToast("升级即可领取摇钱树奖励");var i=this.model.userData,n=i.tree,a=i.tree.tree_gold;n.tree_cd<=0&&a>0&&n.tree_chance>0&&(GameSound.instance().playSound("tree"),this._treeGetDialog&&this._treeGetDialog.isOpened||this.showTreeDlg(!0))},e.prototype.showTreeDlg=function(t){if(void 0===t&&(t=!0),!GameData.isVerifyMode()){if(!t)return void(this._treeGetDialog&&this._treeGetDialog.isOpened&&this._treeGetDialog.close());if(!this._treeGetDialog||!this._treeGetDialog.isOpened){if(!this._treeGetDialog){var e=new TreeGetDialog;e.x=this.treeImg.x+100,e.y=this.treeImg.y-e.height,e.anchorOffsetY=100,this._treeGetDialog=e}this.addChild(this._treeGetDialog),this._treeGetDialog.open()}}},e.prototype.showSoundDialog=function(t){var e=t.data;if(!this._soundDlg){var i=new SoundDialog;i.x=SpriteUtil.stageWidth-250,i.y=this.headItem.y+100,this._soundDlg=i}e&&e.show&&!this._soundDlg.parent?Game.instance().addTop(this._soundDlg):this._soundDlg.parent&&this._soundDlg.parent.removeChild(this._soundDlg)},e.prototype.showBubble=function(t){if(void 0===t&&(t=null),!GameData.isVerifyMode()){for(var e=this.model.userData.bubble,i=0,n=this.bubbleItems;i<n.length;i++){var a=n[i];a.reset()}if(e&&!(e.length<=0))for(var s=e.length,r=0;s>r;r++){var a=this.bubbleItems[r],o=this.getBubblePt(r);a.x=o.x,a.y=o.y,a.setData(e[r]),this.addChild(a)}}},e.prototype.createBubbles=function(){for(var t=[],e=0;3>e;e++){var i=new BubbleItem,n=this.getBubblePt(e);i.x=n.x,i.y=n.y,t.push(i)}this.bubbleItems=t},e.prototype.getBubblePt=function(t){void 0===t&&(t=0);var e=0,i=0;return 0==t?(e=SpriteUtil.stageWidth-110,i=SpriteUtil.stageCenterY+160):1==t?(e=SpriteUtil.stageWidth-370,i=SpriteUtil.stageCenterY):(e=SpriteUtil.stageWidth-370,i=SpriteUtil.stageCenterY+160),{x:e,y:i}},e.prototype.gotoStart=function(t){var e=this;if(GuideTip.instance().close(),!this.isClick){GameModel.instance().userData;AppCenter.uploadActivityLog("1010011","click","page"),this.isClick=!0,this.model.getNextLevelInfo().then(function(t){if(t.status){var i=t.health_paid;if(i>0){if("huawei"==GameData.baseData.appcqid&&GameData.isVerifyMode())return EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_CHAIN_IDIOM})),void(e.isClick=!1);var n=e.headItem.getGlobalLifePt(),a=e.startItem.getGlobalLifePt(),s=SpriteUtil.createImage("menuover_json#lifeB",!1);s.x=n.x,s.y=n.y,egret.Tween.get(s).to({x:a.x,y:a.y},300).call(function(){s.parent&&s.parent.removeChild(s),egret.Tween.removeTweens(s),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_CHAIN_IDIOM})),e.isClick=!1}),Game.instance().gameStage.addChild(s)}else EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_CHAIN_IDIOM})),e.isClick=!1;GameData.statisticsData.gameid=(new Date).toLocaleDateString()+"-"+Math.random().toLocaleString(),GameData.statisticsData.retrycount=0,GameData.statisticsData.clicks=0,GameData.statisticsData.clicktips=0,GameData.statisticsData.continuous=0,GameData.statisticsData.gametype=1,GameData.statisticsData.gameround=e.model.levelData.level.id,GameData.statisticsData.gamestauts=0,GameData.statisticsData.diomicosttime="",GameData.statisticsData.laststat="__laststat__",GameData.statisticsData.thisstat="__thisstat__",GameData.statisticsData.lng="__lng__",GameData.statisticsData.lat="__lat__",GameData.statisticsData.appinfo="__appinfo__",GameData.statisticsData.basestation="__basestation__",HttpServer.statisticsGame()}else{if(e.isClick=!1,GameData.isVerifyMode())return void AppCenter.showToast("体力值不足");GameView.instance().showCommonView({type:0})}})["catch"](function(){e.isClick=!1})}},e.prototype.exchangeItem=function(t){var e=t.data;this.switchMyGoods(e.type,e.level,!1)},e.prototype.levelUpNow=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){return e=t.data,this.switchMyGoods(e.type,e.level,!0).then(function(){if(!GameData.isVerifyMode()){var t=!0;if(e.type==ConstUtil.TYPE_ID_PET&&(1==e.got_spirit?(GameModel.instance().getExperienceBeast(),t=!1):2==e.got_spirit&&(HttpServer.getGodBeastInfo().then(function(t){var e=new GodBeastView;e.open()}),t=!1)),t){var i=new BlackNormalView;i.open(0,{type:e.type,level:e.level,lvlupGold:e.lvlupGold})}}}),this.refresh(),[2]})})},e.prototype.switchMyGoods=function(t,e,i){return void 0===i&&(i=!1),__awaiter(this,void 0,void 0,function(){var n,a,s;return __generator(this,function(r){switch(r.label){case 0:return n="",s="",t==ConstUtil.TYPE_ID_HOUSE?(n=ConstUtil.PATH_HOUSES+("house_"+e+".png"),a=this.houseImg,s="shengjijianzhu"):t==ConstUtil.TYPE_ID_CAR?(n=ConstUtil.PATH_CARS+("car_"+e+".png"),a=this.carImg,s="shengjijianzhu"):t==ConstUtil.TYPE_ID_TREE?(n=ConstUtil.PATH_TREES+("tree_"+e+".png"),a=this.treeImg,s="zhiwuguang"):t==ConstUtil.TYPE_ID_PET?(n=ConstUtil.PATH_PETS+("dog_"+e+".png"),a=this.petImg,s="longgugou"):t==ConstUtil.TYPE_ID_CHARACTER&&(n=ConstUtil.PATH_CHARACTERS+("character_"+e+".png"),a=this.avatarImg,s="longgugou"),a?[4,this.playLevelItemTween(a,n,s,i)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype.playLevelItemTween=function(t,e,i,n){return __awaiter(this,void 0,void 0,function(){var a,s,r,o;return __generator(this,function(l){switch(l.label){case 0:return[4,GameUtil.getDynamicImage(e)];case 1:return a=l.sent(),s=t.scaleX,r=t.scaleY,n?[4,GameUtil.playLoopTween(t,{scaleX:s-.02,scaleY:r-.1},{scaleX:r,scaleY:r},2,200)]:[3,3];case 2:l.sent(),egret.Tween.removeTweens(t),o=t==this.carImg?.8:1,this.playLevelUpEff(t.x,t.y,i,o),l.label=3;case 3:return t.texture=a,t.anchorOffsetX=t==this.carImg||t==this.petImg?t.width:t.width/2,t.anchorOffsetY=t.height,n&&(t.scaleX=s-.2,t.scaleY=r-.2,egret.Tween.get(t).to({scaleX:s,scaleY:r},250,egret.Ease.backOut).call(function(){egret.Tween.removeTweens(t)})),[2]}})})},e.prototype.playLevelUpEff=function(t,e,i,n){var a=this;if(void 0===i&&(i=""),void 0===n&&(n=1),i){GameSound.instance().playSound("update");var s=SpriteUtil.createDragonBones(i+"_ske_json",i+"_tex");s.x=t,s.y=e,s.scaleX=n,s.scaleY=n,this.addChild(s);var r=function(){s&&(s.parent&&s.parent.removeChild(s),s.removeEventListener(dragonBones.EventObject.COMPLETE,r,a),s.dispose(),s=null),r=null};s.addEventListener(dragonBones.EventObject.COMPLETE,r,this),s.animation.play("newAnimation",1)}},e.prototype.loop=function(){var t=this;this.headItem.loop(),this.activityComp.updateMillionActivity(),this.invitePromotionCountdown&&this.invitePromotionCountdown.loop();var e=~~((new Date).getTime()/1e3);if(e-this.startTime>=2&&(this.startBtn.animation.play("newAnimation",1),this.startTime=e),!GameData.isVerifyMode()){var i=this.model.godBeastData;if(i&&i.tmp_info&&i.tmp_info.tmptime>0){var n=i.tmp_info.create_time,a=e-n,s=i.tmp_info.tmptime,r=i.tmp_info.tmpbonus,o=a*r/s;this.godBeastSpr.getChildAt(1).textFlow=[{text:"神兽今日分红\n￥"},{text:(o/1e4).toFixed(2),style:{size:36}}],a>=i.tmp_info.tmptime?(HttpServer.getGodBeastRewardInfo(1).then(function(e){t.model.updateCoinNum(e.gold);var i=new GodBeastView;i.open(2,e)}),i.tmp_info=null,this.godBeastSpr.getChildAt(3).visible=!1,this.godBeastSpr.getChildAt(2).visible=!1,this.showGodBeast()):(this.godBeastSpr.getChildAt(3).visible=!0,this.godBeastSpr.getChildAt(2).visible=!0,this.godBeastSpr.getChildAt(3).text=TimeUtil.getHMSTimeStr(i.tmp_info.tmptime-a))}var l=this.model.userData;if(!(l.home.tree<2)){var h=l.tree,c=parseInt(h.tree_cd);c>0&&e>this.curTime&&(this.curTime=e,c--,h.tree_cd=c,this.treeTimeSprite.getChildAt(1).text=TimeUtil.getMSTimeStr(c),0>=c&&this.refresh())}}},e.prototype.refreshHead=function(t){this.headItem&&this.headItem.refresh()},e.prototype.refresh=function(){var t=this.model.userData;t.home;this.headItem.refresh(),this.startItem.refresh();var e=this.treeTimeSprite.getChildAt(0),i=this.treeTimeSprite.getChildAt(1);if(t.home.tree<2)this.showCoinTip(!1),e.visible=!1,i.visible=!1;else{e.visible=!0,i.visible=!0;var n=t.tree.tree_cd,a=t.tree.tree_gold;0>=n?a>0&&t.tree.tree_chance>0?(i.text="多倍领取",i.bold=!0,i.x=-12,e.texture=RES.getRes("menuover_json#gettreemoney"),this.showCoinTip(),this.playTreeEffect(),AppCenter.uploadActivityLog("1010018","show","page","","1")):(e.texture=RES.getRes("menuover_json#greenbtn"),i.text="查看图鉴",i.bold=!0,i.x=0,AppCenter.uploadActivityLog("1010018","show","page","","2"),this.showCoinTip(!1)):(i.x=0,i.bold=!1,this.showCoinTip(!1),e.texture=RES.getRes("menuover_json#treetime"),i.text=TimeUtil.getMSTimeStr(n),this.curTime=~~((new Date).getTime()/1e3))}},e.prototype.checkMailData=function(){var t=this;this._mailRedPoint.visible=!1,GameData.isVerifyMode()||HttpServer.getMailData().then(function(e){for(var i=[e[1],e[2],e[3],e[4]],n=i.length,a=0;n>a;a++){var s=i[a];if(s)for(var r=s.length,o=0;r>o;o++){var l=s[o];if(!l.sta)return void(t._mailRedPoint.visible=!0)}}})},e.prototype.checkApprencesData=function(t){var e=this;GameData.isVerifyMode()||this.isRunning&&GameModel.instance().getAccountInfo().then(function(i){return console.log("checkApprencesData : res.mIntCurPlatform == "+i.mIntCurPlatform),0==i.mIntCurPlatform?void console.log("checkApprencesData : just guest"):void AppCenter.nativeCache(ConstUtil.CACHE_INVITE_PROMOTION_DONE,"2").then(function(i){var n=i&&"true"==i.value;HttpServer.getApprencesDataIn7Days().then(function(i){if(n&&1==i.tixian_tanchuang)return void console.log("checkApprencesData : has done");if(n&&0!=i.daojishi_time&&(AppCenter.nativeCache(ConstUtil.CACHE_INVITE_PROMOTION_DONE,"3"),console.log("checkApprencesData : clear done flag")),e.invitePromotionCountdown||(e.invitePromotionCountdown=new InvitePromotionCountdown(1e3*i.daojishi_time),e.invitePromotionCountdown.x=5,e.invitePromotionCountdown.y=200,e.addChild(e.invitePromotionCountdown),e.invitePromotionCountdown.visible=!1),t||172800==i.daojishi_time||0!=i.tixian_tanchuang){if(!GuideTip.instance().isGuiding&&1!=i.new_user){var a=new InvitePromotionView;a.open(i)}}else i.daojishi_time>0&&0==i.santian_xiaoshi&&1!=i.new_user&&(e.invitePromotionCountdown.visible=e.showInvitePromCountdown,AppCenter.uploadActivityLog("1010085","show","page"))})["catch"](function(t){console.log("##########"+t)})})})},e.prototype.showInvitePromotionCountdown=function(t){this.invitePromotionCountdown&&(this.invitePromotionCountdown.visible=t.data.visible&&!t.data.isDone&&this.showInvitePromCountdown,t.data.visible||t.data.isDone?t.data.visible&&AppCenter.uploadActivityLog("1010085","show","page"):this.checkApprencesData(!0))},e.prototype.checkHundred=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i;return __generator(this,function(n){switch(n.label){case 0:return!RedBagView.canPop||GuideTip.instance().isGuiding?[3,4]:[4,AppCenter.nativeCache(ConstUtil.CACHE_HUNDRED,"2")];case 1:return t=n.sent(),(e=t&&t.value)?[3,4]:RedBagView.hundredData?[3,3]:(i=RedBagView,[4,HttpServer.getHundredInfo()]);case 2:i.hundredData=n.sent(),n.label=3;case 3:RedBagView.hundredData.first_status&&(AppCenter.nativeCache(ConstUtil.CACHE_HUNDRED,"1","1"),RedBagView.show()),n.label=4;case 4:return[2]}})})},e.prototype.checkNewUserReadpack=function(){var t=this;GameData.isVerifyMode()||(this.newUserRedpack||(this.newUserRedpack=new NewUserRedpack,this.newUserRedpack.x=SpriteUtil.stageCenterX-this.newUserRedpack.width/2,this.newUserRedpack.y=SpriteUtil.stageHeight-105,this.addChild(this.newUserRedpack)),this.newUserRedpack.visible=!1,AppCenter.nativeCache(ConstUtil.VISITOR_REWARD_RESULT_CACHE,"2").then(function(e){if(e&&e.value&&""!=e.value){var i=JSON.parse(e.value);i.showIcon=!1,1==i.showIcon?(console.log("cache.showIcon = true"),t.newUserRedpack.visible=!0,t.invitePromotionCountdown&&(t.invitePromotionCountdown.visible=!1),t.showInvitePromCountdown=!1,AppCenter.uploadActivityLog("1010087","show","page")):(t.showInvitePromCountdown=!0,EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.SHOW_HUNDRED,{visible:!0,isDone:!1})))}}))},e.prototype.enter=function(e){void 0===e&&(e=null),t.prototype.enter.call(this),this.enterFromLogin?this.enterFromLogin=!1:AppUtil.sendNativeMethod("gameDidBackToIndex"),this.addChild(this.headItem),this.headItem.hideSound(!0),this.headItem.hideLife(!0),document.body.style.background="#f3e5cd",HttpServer.updateMissionTipsData(),this.refresh(),this.showBubble(),this.showGodBeast(),this.activityComp.showActivity(),this.showRobotTip(),AppCenter.hidePassGameView(),AppCenter.hideBanner(),this.checkMailData(),this.checkNewUserReadpack(),AppCenter.changeStatusBarTextColor(0),AppCenter.uploadActivityLog("1010037","show","page")},e.prototype.exit=function(){t.prototype.exit.call(this),AppCenter.changeStatusBarTextColor(),egret.Tween.removeTweens(this.coinSprite),GameUtil.closeNotice(),this.godBeastSpr&&egret.Tween.removeTweens(this.godBeastSpr)},e}(BaseScene);__reflect(MenuScene.prototype,"MenuScene");var OverScene=function(t){function e(){var e=t.call(this)||this;return e.headItem=HeadItem.instance(),e.bitRate=766/1334,e.isNext=!0,e.model=GameModel.instance(),e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=new OverItem;t.x=SpriteUtil.stageCenterX-350,t.y=GameData.ipxHgt+121,this.addChild(t),this.overItem=t,this.createRedSprite(),this.createBeastRedSprite()},e.prototype.addEvent=function(){EventCenter.instance().addEventListener(GameEvent.GOTO_NEXT_EVENT,this.gotoNext,this),EventCenter.instance().addEventListener(GameEvent.SHOW_BIG_AD_VIEW_EVENT,this.showBigAd,this),EventCenter.instance().addEventListener(GameEvent.UPDATE_HEAD_INFO_EVENT,this.refreshHead,this)},e.prototype.removeEvent=function(){EventCenter.instance().removeEventListener(GameEvent.GOTO_NEXT_EVENT,this.gotoNext,this),EventCenter.instance().removeEventListener(GameEvent.SHOW_BIG_AD_VIEW_EVENT,this.showBigAd,this),EventCenter.instance().removeEventListener(GameEvent.UPDATE_HEAD_INFO_EVENT,this.refreshHead,this)},e.prototype.createRedSprite=function(){var t=this,e=SpriteUtil.createRect();e.alpha=.7;var i=new egret.Sprite;i.addChild(e),e.touchEnabled=!0;var n=SpriteUtil.createImage("redeff_json#light");n.x=SpriteUtil.stageCenterX,n.y=SpriteUtil.stageCenterY-200,i.addChild(n);var a=SpriteUtil.createImage("redeff_json#circleeff");a.x=SpriteUtil.stageCenterX,a.y=SpriteUtil.stageCenterY-200,i.addChild(a);var s=SpriteUtil.createImage("redeff_json#circleeff");s.x=SpriteUtil.stageCenterX,s.y=SpriteUtil.stageCenterY-200,i.addChild(s);var r=SpriteUtil.createImage("redeff_json#openred");r.scaleX=.6,r.scaleY=.6,r.x=SpriteUtil.stageCenterX,r.y=SpriteUtil.stageCenterY-200,r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchRedBag,this),i.addChild(r);var o=SpriteUtil.createImage("menuover_json#overvideobtn");o.x=SpriteUtil.stageCenterX,o.y=SpriteUtil.stageCenterY+250,i.addChild(o),o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchRedBag,this);var l=SpriteUtil.createText("领取红包",36,16777215,"left",!0);
l.x=o.x-o.width/2+80,l.y=o.y-l.height/2,i.addChild(l);var h=SpriteUtil.createText("放弃",30,16777215,"center",!0);h.width=SpriteUtil.stageWidth,h.alpha=.8,h.y=o.y+o.height+38,i.addChild(h),h.touchEnabled=!0,h.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSound.instance().playSound("btn"),t.hideRedBox(),AppCenter.uploadActivityLog("1020013","close","page"),t.showBigAd()},this);var c=SpriteUtil.createText("恭喜获得奖励",34,16777215,"center",!0);c.width=SpriteUtil.stageWidth,c.y=o.y-220,i.addChild(c);var d=new egret.Sprite,p=SpriteUtil.createImage("menuover_json#coin",!1);p.width=54,p.height=54,d.addChild(p);var u=SpriteUtil.createText("+90",52,16765440,"center",!0);u.x=66,u.y=4,d.addChild(u),d.x=SpriteUtil.stageCenterX-d.width/2,d.y=c.y+70,i.addChild(d),this.redSprite=i},e.prototype.createBeastRedSprite=function(){var t=this,e=SpriteUtil.createRect();e.alpha=.7;var i=new egret.Sprite;i.addChild(e),e.touchEnabled=!0;var n=SpriteUtil.createImage("redeff_json#beastredbag");n.x=SpriteUtil.stageCenterX,n.y=SpriteUtil.stageCenterY-100,n.touchEnabled=!0,n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchRedBag,this),n.scaleX=.85,n.scaleY=.85,i.addChild(n);var a=SpriteUtil.createImage("menuover_json#overvideobtn");a.x=SpriteUtil.stageCenterX,a.y=SpriteUtil.stageHeight-300,i.addChild(a),a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchRedBag,this);var s=SpriteUtil.createText("领取红包",36,16777215,"left",!0);s.x=a.x-a.width/2+80,s.y=a.y-s.height/2,i.addChild(s);var r=SpriteUtil.createText("放弃",30,16777215,"center",!0);r.width=SpriteUtil.stageWidth,r.alpha=.8,r.y=a.y+a.height/2+28,i.addChild(r),r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSound.instance().playSound("btn"),t.hideRedBox(),t.showBigAd()},this);var o=SpriteUtil.createText("+90",60,16769673,"center",!0);o.width=SpriteUtil.stageWidth,o.y=n.y+180,i.addChild(o),this.beastSprite=i},e.prototype.showRedReward=function(t,e){var i=this;if(void 0===t&&(t=0),void 0===e&&(e=0),this.hideRedBox(),!GameData.isVerifyMode())if(0==e){AppCenter.uploadActivityLog("1020013","show","page"),this.addChild(this.redSprite),egret.Tween.get(this.redSprite.getChildAt(1),{loop:!0}).to({rotation:360},4e3),egret.Tween.get(this.redSprite.getChildAt(2),{loop:!0}).to({scaleX:1.8,scaleY:1.8,alpha:0},1e3),egret.setTimeout(function(){var t=egret.Tween.get(i.redSprite.getChildAt(3),{loop:!0});t.to({scaleX:1.8,scaleY:1.8,alpha:0},1e3)},this,500);var n=SpriteUtil.stageCenterY-200;GameUtil.playBreathAnim(this.redSprite.getChildAt(4),{y:n+20},{y:n},500);var a=this.redSprite.getChildAt(9);if(a){var s=a.getChildAt(1);s.text="+"+t}}else 1==e&&(AppCenter.uploadActivityLog("1020043","show","page"),this.beastSprite.getChildAt(5).text="+"+t,this.addChild(this.beastSprite),this.beastBoneArmature?(this.beastBoneArmature.animation.play("newAnimation",-1),this.beastSprite.addChildAt(this.beastBoneArmature,1)):(this.beastBoneArmature=SpriteUtil.createDragonBones("huodeshenshou_ske_json","huodeshenshou_tex"),this.beastBoneArmature.animation.play("newAnimation",-1),this.beastBoneArmature.x=SpriteUtil.stageCenterX,this.beastBoneArmature.y=SpriteUtil.stageCenterY+30,this.beastSprite.addChildAt(this.beastBoneArmature,1)))},e.prototype.hideRedBox=function(){if(this.redSprite&&this.redSprite.parent){this.redSprite.parent.removeChild(this.redSprite);for(var t=1;4>=t;t++){var e=this.redSprite.getChildAt(t);e.scaleX=1,e.scaleY=1,e.alpha=1,e.rotation=0,egret.Tween.removeTweens(this.redSprite.getChildAt(1));var i=this.redSprite.getChildByName("cspr");if(i){var n=i.getChildByName("coinNumTxt");n&&egret.Tween.removeTweens(n)}}}this.beastSprite&&this.beastSprite.parent&&(this.beastSprite.parent.removeChild(this.beastSprite),AppCenter.uploadActivityLog("1020043","close","page")),this.beastBoneArmature&&(this.beastBoneArmature.parent&&this.beastBoneArmature.parent.removeChild(this.beastBoneArmature),this.beastBoneArmature.animation.stop())},e.prototype.touchRedBag=function(t){var e=this;GameSound.instance().playSound("btn"),AppCenter.showVideoAd("rewardvideocash").then(function(t){HttpServer.getLevelRedBoxData().then(function(t){if(AppCenter.hidePassGameView(),e.model.updateCoinNum(t.gold),e.headItem.refresh(),e.redSprite.parent)AppCenter.uploadActivityLog("1020013","click","page"),GameUtil.playCoinEffect().then(function(){e.showBigAd()});else if(e.beastSprite.parent){AppCenter.uploadActivityLog("1020043","click","page");var i=new GodBeastView;i.open(3,{gold:t.gold})}else e.showBigAd();e.hideRedBox()})})},e.prototype.gotoNext=function(){var t=this;this.isNext&&(this.isNext=!1,this.model.getNextLevelInfo().then(function(e){if(e.status){var i=e.health_paid;if(i>0){var n=t.headItem.getGlobalLifePt(),a=t.overItem.getGlobalLifePt(),s=SpriteUtil.createImage("menuover_json#lifeB",!1);s.x=n.x,s.y=n.y,egret.Tween.get(s).to({x:a.x,y:a.y},300).call(function(){s.parent&&s.parent.removeChild(s),egret.Tween.removeTweens(s),GuideTip.instance().close(),t.isNext=!0,EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_CHAIN_IDIOM}))}),Game.instance().gameStage.addChild(s)}else AppCenter.hidePassGameView(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_CHAIN_IDIOM})),t.isNext=!0;GameData.statisticsData.diomicosttime="",GameData.statisticsData.clicks=0,HttpServer.statisticsGame()}else{if(t.isNext=!0,AppCenter.hidePassGameView(),GameData.isVerifyMode())return void AppCenter.showToast("体力值不足");GameView.instance().showCommonView({type:0})}})["catch"](function(){t.isNext=!0}))},e.prototype.refreshHead=function(){this.headItem&&this.headItem.refresh()},e.prototype.getCompleteData=function(){var t=this;this.headItem.refresh(),this.model.getCompleteLevelData().then(function(e){t.overItem.refresh(e),GameData.isVerifyMode()||t.playCoinEff().then(function(){var i=!0;if(e.red>0)e.unlock==ConstUtil.TYPE_ID_RED_GIFT?(i=!1,t.redSprite||t.createRedSprite(),t.showRedReward(e.red)):e.unlock==ConstUtil.TYPE_ID_BEAST_GIFT&&(i=!1,t.beastSprite||t.createBeastRedSprite(),t.showRedReward(e.red,1));else if(e.unlock>0&&e.unlock<10){i=!1,t.model.userData.unlock=e.unlock;e.reward;GameView.instance().showCommonView({type:2,reward_type:e.unlock,reward_level:e.unlock_level}),AppCenter.hidePassGameView()}i&&t.showBigAd()})})},e.prototype.playCoinEff=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return GameData.isVerifyMode()?[2]:(t=this.model.levelData,t&&t.level&&t.level.gold>0?(e=t.level.gold,[4,GameUtil.playFinishEff(132,55+GameData.ipxHgt,e)]):[3,2]);case 1:i.sent(),this.model.updateCoinNum(e),this.headItem.refresh(),i.label=2;case 2:return[2]}})})},e.prototype.loop=function(){this.headItem.loop()},e.prototype.showBigAd=function(t){void 0===t&&(t=null),!this.isRunning||this.redSprite.parent||this.beastSprite.parent||GameView.instance().isHaveOpened()?AppCenter.hidePassGameView():AppCenter.showPassGameView()},e.prototype.enter=function(){t.prototype.enter.call(this),document.body.style.background="#EBE7DD",GameSound.instance().playSound("passlevel"),this.getCompleteData(),this.addChild(this.headItem),this.headItem.hideSound(),this.headItem.hideLife(!0),AppCenter.hideBanner(),AppCenter.uploadActivityLog("1020014","show","page")},e.prototype.exit=function(){t.prototype.exit.call(this),AppCenter.hidePassGameView()},e}(BaseScene);__reflect(OverScene.prototype,"OverScene");var MessageUtil=function(){function t(){}return t.HEARTBEAT="HEARTBEAT",t.GAME_READY="GAME_READY",t.CLIENT_LOGIN="LOGIN",t.CLIENT_START_MATCH="START_MATCH",t.CLIENT_RETRY_MATCH="RETRY_MATCH",t.CLIENT_GAME_COMMAND="GAME_COMMAND",t.CLIENT_LEAVE_ROOM="LEAVE_ROOM",t.CLIENT_INVITE_BATTLE="INVITE_BATTLE",t.CLIENT_RECEIVE_INVITE_BATTLE="RECEIVE_INVITE_BATTLE",t.CLIENT_REJECT_INVITE_BATTLE="REJECT_INVITE_BATTLE",t.CLIENT_CANCEL_INVITE="CANCEL_INVITE",t.SERVER_LOGIN_SUCCESS="LOGIN_SUCCESS",t.SERVER_MATCHING="MATCHING",t.SERVER_MATCH_SUCCESS="MATCH_SUCCESS",t.SERVER_GAME_SERVER="GAME_SERVER",t.SERVER_LEAVE_ROOM="USER_LEAVE_ROOM",t.SERVER_INVITE_BATTLE="INVITE_BATTLE",t.SERVER_JOIN_ROOM_SUCCESS="JOIN_ROOM_SUCCESS",t.SERVER_REJECT_INVITE_BATTLE="REJECT_INVITE_BATTLE",t.SERVER_START_BATTLE="START_BATTLE",t.METHOD_ROOM_USERS_INFO="get_room_info",t.METHOD_REAWARD_DOUBLE="use_double_gold",t.METHOD_CREATE_GAME="create_game",t.METHOD_USE_ITEM="use_item",t.METHOD_USE_EMOJI="use_emoji",t.METHOD_GAME_PROGRESS="game_progress",t.METHOD_GIVE_UP_GAME="give_up_game",t.METHOD_WIN_GAME="win_game",t.METHOD_SETTLE_GAME="settle_game",t.METHOD_ROBOT_MESSAGE="action",t.METHOD_ROBOT_SLEEP="sleep",t.METHOD_BROADCAST="broadcast",t}();__reflect(MessageUtil.prototype,"MessageUtil");var SocketCenter=function(){function t(){this._roomId="",this._gameId="",this.connected=!1,this.curTime=0,this.heartTimes=0,this.reconnectTimes=0,window.socketData=this.socketDataHandler.bind(this),window.socketStatus=this.socketFailHandler.bind(this),GameData.baseData.isDebug==ConstUtil.TEST_ENV?this._gameId="game_123456":this._gameId="100012_0001"}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.connect=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n=this;return __generator(this,function(a){switch(a.label){case 0:return this.connected?[2]:GameData.isLocal?(this.connected=!0,this.flushData("","",MessageUtil.CLIENT_LOGIN),[2]):this._pkIPPort?[3,2]:(t=this,[4,HttpServer.getLongIPPort(this._gameId)]);case 1:t._pkIPPort=a.sent(),a.label=2;case 2:return e=this._pkIPPort,i="ws://"+e.ip+":"+e.port+"/play",[2,new Promise(function(t,e){AppUtil.sendNativeMethod("socketConnect",{url:i},function(e){0==e.code&&(n.connected=!0,n.heartTimes=0,n.reconnectTimes=0,TickerUtil.addLoop(n.keepHeart,n),n.flushData("","",MessageUtil.CLIENT_LOGIN),t())})})]}})})},t.prototype.keepHeart=function(){var t=~~((new Date).getTime()/1e3);if(!(t-this.curTime<3))return this.curTime=t,this.heartTimes++,this.heartTimes>=5?void this.socketFailHandler():void this.flushData("","",MessageUtil.HEARTBEAT)},t.prototype.disconnect=function(){AppUtil.sendNativeMethod("socketClose"),TickerUtil.removeLoop(this.keepHeart),this.connected=!1,this.heartTimes=0,console.log("socket断开了")},t.prototype.socketFailHandler=function(t){void 0===t&&(t=null),console.log("----socket failed----重试次数",this.reconnectTimes),this.reconnectTimes>=15?(this.disconnect(),AppCenter.showToast("你已断开连接"),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.GOTO_PK_SCENE_EVENT)),this.reconnectTimes=0):(0==this.reconnectTimes&&this.disconnect(),this.reconnect())},t.prototype.reconnect=function(){var t=this;this.reconnectTimes++,egret.setTimeout(function(){t.connect()},this,1e3)},t.prototype.flushData=function(t,e,i){return void 0===i&&(i=MessageUtil.CLIENT_GAME_COMMAND),__awaiter(this,void 0,void 0,function(){var n,a,s;return __generator(this,function(r){switch(r.label){case 0:return this.connected?[3,2]:[4,this.connect()];case 1:r.sent(),r.label=2;case 2:return i!=MessageUtil.HEARTBEAT&&console.log("@@client@@:"+i+",roomId:"+this._roomId,t),i==MessageUtil.CLIENT_START_MATCH&&(this._roomId=""),n=this._gameId,a=this._roomId,s="",t&&t.targetId&&(s=t.targetId),AppUtil.sendNativeMethod("socketFlush",{type:i,gameId:n,roomId:a,targetId:s,data:{method:e,data:t}}),this.simulateServerOnLocal(e,i),[2]}})})},t.prototype.socketDataHandler=function(t){if(this.connected){var e=t.type,i=null;switch(e!=MessageUtil.HEARTBEAT&&console.log("$$server$$:"+t.type,t),e){case MessageUtil.HEARTBEAT:this.heartTimes=0;break;case MessageUtil.SERVER_LOGIN_SUCCESS:console.log("校验成功");break;case MessageUtil.SERVER_MATCHING:this._roomId=t.roomId,i=new PKEvent(PKEvent.IN_MATCHING_EVENT),EventCenter.instance().dispatchEvent(i);break;case MessageUtil.SERVER_MATCH_SUCCESS:PKModel.instance().userIdList=t.userIdList,i=new PKEvent(PKEvent.MATCH_SUCCESS_EVENT),EventCenter.instance().dispatchEvent(i);break;case MessageUtil.GAME_READY:i=new PKEvent(PKEvent.PK_READY_EVENT,t),EventCenter.instance().dispatchEvent(i);break;case MessageUtil.SERVER_INVITE_BATTLE:var n=new InvitePKTip;n.open(t);break;case MessageUtil.SERVER_REJECT_INVITE_BATTLE:GameUtil.showPKToast("对方拒绝了你的邀请");break;case MessageUtil.SERVER_START_BATTLE:this._roomId=t.roomId;var a=PKModel.instance();a.userIdList=t.userIdList,a.ownerUserId=t.ownerUserId,a.gotoPKGame(),i=new PKEvent(PKEvent.GOTO_PK_SCENE_EVENT,{type:ConstUtil.PK_FRIEND_STATUS}),EventCenter.instance().dispatchEvent(i),egret.setTimeout(function(){var t=a.isFriendFlag?1:2;a.sendRoomUserInfo(3,t),a.isFriendFlag=!1},this,200);break;case MessageUtil.SERVER_LEAVE_ROOM:if(this._roomId!=t.roomId)return;i=new PKEvent(PKEvent.PK_LEAVE_EVENT,t),EventCenter.instance().dispatchEvent(i);break;case MessageUtil.SERVER_GAME_SERVER:var s=t.data;0==s.code?PKModel.instance().messageHandler(s):1!=s.code&&(AppCenter.showToast(s.message),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.GOTO_PK_SCENE_EVENT)));break;default:"GAME_SERVER_ERROR"==t.code?this.flushData("","",MessageUtil.CLIENT_LEAVE_ROOM):"300"==t.code?AppCenter.showToast(t.msg):(AppCenter.showToast(t.msg),EventCenter.instance().dispatchEvent(new PKEvent(PKEvent.GOTO_PK_SCENE_EVENT)))}}},t.prototype.simulateServerOnLocal=function(t,e){if(GameData.isLocal){var i={};e==MessageUtil.HEARTBEAT?i.type=e:e==MessageUtil.CLIENT_START_MATCH?i.type=MessageUtil.SERVER_MATCHING:e==MessageUtil.CLIENT_RETRY_MATCH?(i.type=MessageUtil.SERVER_MATCH_SUCCESS,i.userIdList=[]):e==MessageUtil.CLIENT_RECEIVE_INVITE_BATTLE?i.type=MessageUtil.SERVER_JOIN_ROOM_SUCCESS:e==MessageUtil.CLIENT_REJECT_INVITE_BATTLE?i.type=MessageUtil.SERVER_REJECT_INVITE_BATTLE:e==MessageUtil.CLIENT_INVITE_BATTLE?i.type=MessageUtil.SERVER_INVITE_BATTLE:e==MessageUtil.CLIENT_GAME_COMMAND?i.type=MessageUtil.SERVER_GAME_SERVER:e==MessageUtil.CLIENT_LOGIN&&(i.type=MessageUtil.SERVER_LOGIN_SUCCESS),i.data={method:t,data:{},code:0},this.socketDataHandler(i)}},t}();__reflect(SocketCenter.prototype,"SocketCenter");var ArrayUtil=function(){function t(){}return t.shuffle=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t},t.remove=function(t,e,i){var n=t.length;if(!(e>=n||0===i||0===n)){null==i&&(i=1);for(var a=n-i,s=e;a>s;++s)t[s]=t[s+i];t.length=a}},t.removeElement=function(t,e){for(var i=t?t.length:0,n=0;i>n;n++)if(t[n]==e){t.splice(n,1);break}},t.removeEleByProp=function(t,e,i){for(var n=t?t.length:0,a=0;n>a;a++)if(t[a]&&t[a][e]==i){t.splice(a,1);break}},t.swap=function(t,e,i){if(e!==i){var n=t.indexOf(e),a=t.indexOf(i);if(0>n||0>a)throw new Error("Supplied items must be elements of the same array");return t[n]=i,t[a]=e,t}},t.getRandom=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);var n=e+Math.floor(Math.random()*i);return void 0===t[n]?null:t[n]},t.getRandomByObject=function(e){var i=Object.keys(e),n=t.getRandom(i);return e[n]},t}();__reflect(ArrayUtil.prototype,"ArrayUtil");var ConstUtil=function(){function t(){}return t.getNameByTypeId=function(e){switch("string"==typeof e&&(e=parseInt(e)),e){case t.TYPE_ID_HOUSE:return"房子";case t.TYPE_ID_PET:return"宠物";case t.TYPE_ID_TREE:return"摇钱树";case t.TYPE_ID_CAR:return"汽车";case t.TYPE_ID_CHARACTER:return"官职";case t.TYPE_ID_RED_GIFT:return"红包";case t.TYPE_ID_BEAST_GIFT:return"神兽红包"}return""},t.getUrlByTypeId=function(e,i){switch("string"==typeof e&&(e=parseInt(e)),e){case t.TYPE_ID_HOUSE:return t.PATH_HOUSES+"house_"+i+".png";case t.TYPE_ID_PET:return t.PATH_PETS+"dog_"+i+".png";case t.TYPE_ID_TREE:return t.PATH_TREES+"tree_"+i+".png";case t.TYPE_ID_CAR:return t.PATH_CARS+"car_"+i+".png";case t.TYPE_ID_CHARACTER:return t.PATH_CHARACTERS+"character_"+i+".png"}return""},t.SCENE_HOME="SCENE_HOME",t.SCENE_CHAIN_OVER="SCENE_CHAIN_OVER",t.SCENE_CHAIN_IDIOM="SCENE_CHAIN_IDIOM",t.SCENE_GUESS_MENU="SCENE_GUESS_MENU",t.SCENE_GUESS_IDIOM="SCENE_GUESS_IDIOM",t.SCENE_GUESS_OVER="SCENE_GUESS_OVER",t.SCENE_JUDGE_IDIOM="SCENE_JUDGE_IDIOM",t.SCENE_DISPEL_PK="SCENE_DISPEL_PK",t.ROWS=9,t.COLUMNS=9,t.GUESS_COLUMNS=8,t.CACHE_MUSIC="fkccy-shxmwlkjyxgs-music-cache",t.CACHE_REDPOINT="fkccy-shxmwlkjyxgs-redpoint-cache",t.CACHE_SOUND="fkccy-shxmwlkjyxgs-sound-cache",t.CACHE_START_GUIDE="fkccy-shxmwlkjyxgs-start-guide-cache",t.CACHE_ERROR_GUIDE="fkccy-shxmwlkjyxgs-error-guide-cache",t.CACHE_MONETYTREE_TIP="fkccy-moneytree-tip-cache",t.CACHE_LEVELUP_VIDEO_TIP="fkccy-levelup-video-cache",t.CACHE_VIDEO_LEFTTIME_TIP="fkccy-video-left-time-cache",t.CACHE_GUESS_START_GUIDE="fkccy-guess-start-guide-cache",t.CACHE_HIGH_REWARD_PK="fkccy-high-reward-pk-cache",t.CACHE_GUESS_BUTTON_POINT="fkccy-guess-guess-button-cache",t.CACHE_ACHIECE_POPUP_28="fkccy-guess-achieve-popup-28",t.CACHE_ACHIECE_POPUP_32="fkccy-guess-achieve-popup-32",t.CACHE_MILLION_GROUP_INFO="fkccy-million-group-info-cache",t.CACHE_MILLION_CLOUD_INFO="fkccy-million-cloud-info-cache",t.CACHE_FIRST_ADD_NEW_BOOK="fkccy-first-add-new-book-cache",t.CACHE_FIRST_BAIKI="fkccy-first-baike-cache",t.CACHE_FIRST_FINISH_NEW_BOOK="fkccy-first-finish-new-book-cache",t.CACHE_INVITE_PROMOTION_DONE="fkccy-invite-promotion-done-cache",t.CACHE_HUNDRED="fkccy-hundred02",t.VISITOR_REWARD_RESULT_CACHE="visitor_reward_result_cache",t.IS_SHOW_MILLION_VIEW_CACHE="is_show_million_view_cache",t.NOTIFICATIONS_OPEN_STATUS_CACHE="notification_open_status_cache",t.PK_START_GAME_CACHE="pk_start_game_now_cache",t.PK_NEW_GAME_UI_CACHE="pk_new_game_ui_cache",t.PK_NEW_RESULT_CACHE="pk_new_result_cache",t.STATUS_BLANK=0,t.STATUS_STATIC=1,t.STATUS_NORMAL=2,t.STATUS_WRONG=3,t.STATUS_CHECKED=4,t.STATUS_COMPLETED=5,t.STATUS_PUZZLE=6,t.PK_IDILE_STATUS=0,t.PK_MATCHING_STATUS=1,t.PK_PLAYING_STATUS=2,t.PK_RESULT_STATUS=3,t.PK_FRIEND_STATUS=4,t.PK_ITEM_GLASS=1,t.PK_ITEM_INK=2,t.PK_ITEM_CONFUSE=3,t.PK_ITEM_PROTECT=4,t.PUZZLE="puzzle",t.TEST_ENV=1,t.PRD_ENV=2,t.HTTP_GET_USER_INFO="game/init/index",t.HTTP_GET_ITEM_CONFIG_INFO="game/init/item_map",t.HTTP_SET_CURRENT_ITEM_INFO="game/reward/select_item",t.HTTP_SET_CHARACTER_ITEM_INFO="game/reward/select_character",t.HTTP_LEVEL_UP_INFO="game/reward/unlock",t.HTTP_LEVEL_UP_CHARACTER_INFO="game/reward/character",t.HTTP_ROBOT_SPEAK_OUT_INFO="game/character/push",t.HTTP_NEXT_LEVEL_INFO="game/play/next",t.HTTP_COMPLETE_LEVEL_INFO="game/play/sync",t.HTTP_GET_IDIOM_EXPLAIN_INFO="game/notebook/detail",t.HTTP_GET_BUBBLE_INFO="game/init/bubble",t.HTTP_GET_BUBBLE_REWARD_INFO="game/gold/bubble",t.HTTP_ADD_LIFE_INFO="game/reward/health",t.HTTP_MONEY_TREE_INFO="game/gold/tree",t.HTTP_LEVEL_RED_BOX_INFO="game/gold/red_packet",t.HTTP_LEVEL_BOX_INFO="game/gold/chest",t.HTTP_USE_TIP_TIMES_INFO="game/play/use_tips",t.HTTP_GET_RANK_INFO="activity/ranking/index",t.HTTP_GET_MAIL_INFO="index",t.HTTP_MARK_MAIL_READ="set_sta",t.HTTP_DELETE_MAIL="set_sta",t.HTTP_GUESS_INIT_INFO="game/picture/init",t.HTTP_GUESS_NEXT_LEVEL_INFO="game/picture/play",t.HTTP_GUESS_COMPLETE_LEVEL_INFO="game/picture/sync",t.HTTP_GUESS_GET_LEVEL_REWARD_INFO="game/gold/picture_level",t.HTTP_GUESS_USE_TIPS_INFO="game/picture/use_tips",t.HTTP_JUDGE_GET_DATA="game/judge/play",t.HTTP_JUDGE_GET_REWARD_INFO="game/judge/sync",t.HTTP_GET_CARD_CONF_INFO="game/judge/gallery",t.HTTP_GET_CARD_FINISH_REWARD_INFO="game/judge/reward",t.HTTP_GET_JUDGE_ACHIEVE_INFO="game/judge/fast_complete",t.HTTP_PK_IP_PORT_INFO="game-room-gateway/getRoomServerInfo",t.HTTP_GET_PK_USER_INFO="game/battle/get_user_info",t.HTTP_GET_PK_ITEMS_INFO="game/battle/get_video_item",t.HTTP_GET_PK_TICKETS_INFO="game/battle/get_video_pass",t.HTTP_FRIEND_APPLY="friends/Friends/apply_friend",t.HTTP_FRIEND_APPLY_LIST="friends/Friends/get_apply_list",t.HTTP_FRIEND_AGREE_APPLY="friends/Friends/agree_friend_apply",t.HTTP_FRIEND_REFUSE_APPLY="friends/Friends/refused_apply",t.HTTP_FRIEND_LIST="friends/Friends/get_friend_list",t.HTTP_FRIEND_GET_ONLINE="friends/Friends/get_online",t.HTTP_FRIEND_DELETE="friends/Friends/del_friend",t.HTTP_FRIEND_SEARCH="friends/Accid_invitecode/invitecode_to_accid",t.HTTP_ADD_NEW_IDIOM_BOOK_INFO="game/notebook/add",t.HTTP_REMOVE_NEW_IDIOM_BOOK_INFO="game/notebook/rem",t.HTTP_ERROR_CY_REPORT="game/wiki/error_report",t.HTTP_INIT_GOD_BEAST_INFO="dividend/spirit/info",t.HTTP_GET_GOD_BEAST_INFO="dividend/spirit/receive",t.HTTP_GET_BEAST_REWARD_INFO="dividend/spirit/receive_profit",t.HTTP_GET_BEAST_PROGRESS_INFO="dividend/spirit/collect",t.HTTP_GET_APPRENTICES_IN_7DAYS="shoutu/get_apprentice_by_time/get_seven_day_num_new",t.HTTP_HUNDRED_INFO="index/hundred_activity/get_info",t.HTTP_SIGN_DATA_INFO="index/index",t.HTTP_SIGN_NOW_INFO="index/sign",t.HTTP_SIGN_DOUBLE_INFO="index/getSignDouble",t.HTTP_SIGN_GET_MULTI="index/getMulti",t.HTTP_MISSION_DATA_INFO="index/index",t.HTTP_BATTLE_MISSION_DATA_INFO="Battle_task/index",t.HTTP_GET_MISSION_REWARD_INFO="reward/getTaskReward",t.HTTP_GET_MISSION_DOUBLE_REWARD_INFO="reward/getDoubleReward",t.HTTP_GET_MISSION_TIPS_INFO="index/tips",t.HTTP_SET_MISSION_NOTIFICATION_INFO="task/open_push_tip",t.HTTP_GET_INVITED_AND_COINT_INFO="shoutu/get_master_info/get_info",t.HTTP_STATISTICS_GAME="gamefunction_logs/answer/userround",t.HTTP_STATISTICS_HOME="gamefunction_logs/answer/goodslevle",t.HTTP_PUZZLE_INFO="draw/Draw_debris/get_info",t.HTTP_PUZZLE_PIECE="draw/draw_debris/receive",t.TYPE_ID_BLANK=0,t.TYPE_ID_HOUSE=1,t.TYPE_ID_PET=2,t.TYPE_ID_TREE=3,t.TYPE_ID_CAR=4,t.TYPE_ID_CHARACTER=5,t.TYPE_ID_RED_GIFT=10,t.TYPE_ID_BEAST_GIFT=11,t.PATH_HOUSES="resource/assets/houses/",t.PATH_CHARACTERS="resource/assets/characters/",t.PATH_CARS="resource/assets/cars/",t.PATH_PETS="resource/assets/pets/",t.PATH_TREES="resource/assets/trees/",t.PATH_CARDS="resource/assets/cards/",t}();__reflect(ConstUtil.prototype,"ConstUtil");var GameUtil=function(){function t(){}return t.getFrontEffect=function(){return this.coinEffectFront||(this.coinEffectFront=SpriteUtil.createDragonBones("qianmian_ske_json","qianmian_tex")),this.coinEffectFront.animation.play("newAnimation",1),this.coinEffectFront},t.getBackEffect=function(){return this.coinEffectBack||(this.coinEffectBack=SpriteUtil.createDragonBones("houmian_ske_json","houmian_tex")),this.coinEffectBack.animation.play("newAnimation",1),this.coinEffectBack},t.removeCoinBFEffect=function(){this.coinEffectFront&&(this.coinEffectFront.parent&&this.coinEffectFront.parent.removeChild(this.coinEffectFront),this.coinEffectFront.animation.stop()),this.coinEffectBack&&(this.coinEffectBack.parent&&this.coinEffectBack.parent.removeChild(this.coinEffectBack),this.coinEffectBack.animation.stop())},t.showTips=function(t,e){var i=this;if(void 0===t&&(t=""),void 0===e&&(e=800),t){if(!this.toastSprite){var n=new egret.Shape;n.graphics.beginFill(0,.7),n.graphics.drawRoundRect(0,0,480,100,16),n.graphics.endFill();var a=new egret.Sprite;a.x=SpriteUtil.stageCenterX-225,a.y=SpriteUtil.stageCenterY-160,a.addChild(n);var s=new egret.TextField;s.text=t,s.width=480,s.size=32,s.backgroundColor=0,s.textAlign="center",s.name="txtstr",s.y=50-s.height/2,a.addChild(s),this.toastSprite=a}egret.Tween.removeTweens(this.toastSprite),this.toastSprite.y=SpriteUtil.stageCenterY-100,this.toastSprite.alpha=.01,this.toastSprite.getChildByName("txtstr").text=t,Game.instance().addTop(this.toastSprite);var r=egret.Tween.get(this.toastSprite).to({alpha:1},200);r.wait(e),r.to({alpha:.01},400).call(function(){egret.Tween.removeTweens(i.toastSprite),i.toastSprite&&i.toastSprite.parent&&i.toastSprite.parent.removeChild(i.toastSprite)})}},t.showCoinTips=function(t,e,i){var n=this;if(void 0===t&&(t=""),void 0===e&&(e=""),void 0===i&&(i=800),t&&e){if(!this.coinToastSprite){var a=SpriteUtil.createRect(296,160,32,32,0);a.alpha=.6;var s=new egret.Sprite;s.x=SpriteUtil.stageCenterX-148,s.y=SpriteUtil.stageCenterY-160,s.addChild(a);var r=SpriteUtil.createText(t,30,16777215,"center",!0);r.width=296,r.name="txtstr",r.lineSpacing=16,r.y=35,s.addChild(r),this.coinToastSprite=s}egret.Tween.removeTweens(this.coinToastSprite),this.coinToastSprite.y=SpriteUtil.stageCenterY-100,this.coinToastSprite.alpha=.01,this.coinToastSprite.getChildByName("txtstr").textFlow=[{text:t},{text:"\n"+e,style:{textColor:16703525,size:42}}],Game.instance().addTop(this.coinToastSprite);var o=egret.Tween.get(this.coinToastSprite).to({alpha:1},200);o.wait(i),o.to({alpha:.01},400).call(function(){egret.Tween.removeTweens(n.coinToastSprite),n.coinToastSprite&&n.coinToastSprite.parent&&n.coinToastSprite.parent.removeChild(n.coinToastSprite)})}},t.showPKToast=function(t){var e=this;if(t){if(!this.pkToastSprite){var i=new egret.Sprite,n=SpriteUtil.createImage("dispelPk_json#dpk_toastbg",!1);i.addChild(n);var a=SpriteUtil.createText("",32,16777215,"center");a.width=n.width,a.y=29,i.addChild(a),i.x=SpriteUtil.stageCenterX-n.width/2,i.y=SpriteUtil.stageCenterY-n.height/2-230,this.pkToastSprite=i}this.pkToastSprite.getChildAt(1).text=t,Game.instance().addTop(this.pkToastSprite),this.pkToastSprite.alpha=0;var s=egret.Tween.get(this.pkToastSprite).to({alpha:1},200);s.wait(1200),s.to({alpha:.01},400).call(function(){egret.Tween.removeTweens(e.pkToastSprite),e.pkToastSprite&&e.pkToastSprite.parent&&e.pkToastSprite.parent.removeChild(e.pkToastSprite)})}},t.showNotice=function(t,e){var i=this;if(void 0===t&&(t=""),void 0===e&&(e=1),t){if(!this.noticeSprite){var n=new egret.Sprite;n.graphics.beginFill(0,.25),n.graphics.drawRect(0,0,SpriteUtil.stageWidth,60),n.graphics.endFill();var a=SpriteUtil.createText("今天是全国哀悼日，纪念战胜新冠肺炎的伟大时刻！",30,16777215);a.x=n.width,a.y=30-a.height/2,n.addChild(a),n.y=150,this.noticeSprite=n}var s=this.noticeSprite.getChildAt(0);s.text=t,s.x=SpriteUtil.stageWidth,Game.instance().addMiddle(this.noticeSprite),egret.Tween.get(s).to({x:-s.width},3e4).call(function(){return egret.Tween.removeTweens(s),0>e?void i.showNotice(t,e):(e>0&&e--,e>0?void i.showNotice(t,e):void(i.noticeSprite.parent&&i.noticeSprite.parent.removeChild(i.noticeSprite)))})}},t.closeNotice=function(){this.noticeSprite&&(this.noticeSprite.parent&&this.noticeSprite.parent.removeChild(this.noticeSprite),egret.Tween.removeTweens(this.noticeSprite.getChildAt(0)))},t.flowIn=function(t){t.y=SpriteUtil.stageHeight,egret.Tween.get(t).to({y:SpriteUtil.stageHeight-t.height+40},200).call(function(){egret.Tween.removeTweens(t)})},t.flowOut=function(t,e){void 0===e&&(e=null),egret.Tween.get(t).to({y:SpriteUtil.stageHeight},200).call(function(){egret.Tween.removeTweens(t),e&&e()})},t.scaleIn=function(t){t.scaleX=.5,t.scaleY=.5,egret.Tween.get(t).to({scaleX:1,scaleY:1},350,egret.Ease.backOut).call(function(){egret.Tween.removeTweens(t)})},t.fadeIn=function(t){t.alpha=0,egret.Tween.get(t).to({alpha:1},200).call(function(){egret.Tween.removeTweens(t)})},t.fadeOut=function(t,e){void 0===e&&(e=null);var i=0;egret.Tween.get(t).to({alpha:i},200).call(function(){egret.Tween.removeTweens(t),e&&e()})},t.playLifeEffect=function(t,e,i){return void 0===i&&(i=3),__awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(a){return 0>=i?[2]:(n=egret.setInterval(function(){i--;var a=SpriteUtil.createImage("menuover_json#lifeB");a.x=SpriteUtil.stageCenterX,a.y=SpriteUtil.stageCenterY,Game.instance().addTop(a),egret.Tween.get(a).to({x:t,y:e},200).call(function(){egret.Tween.removeTweens(a),a.parent&&a.parent.removeChild(a),0>=i&&egret.clearInterval(n)})},this,300),[2])})})},t.playFinishEff=function(t,e,i){return void 0===i&&(i=0),__awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.playBoxEff(i)];case 1:return n.sent(),[4,this.playCoinEffect(t,e)];case 2:return n.sent(),this.coinSprite&&this.coinSprite.parent&&this.coinSprite.parent.removeChild(this.coinSprite),egret.Tween.removeTweens(this.coinSprite.getChildAt(1)),egret.Tween.removeTweens(this.coinSprite.getChildAt(2)),[2]}})})},t.playBoxEff=function(t){return void 0===t&&(t=0),__awaiter(this,void 0,void 0,function(){var e,i,n,a,s,r,o=this;return __generator(this,function(l){return this.coinSprite||(e=new egret.Sprite,i=SpriteUtil.createRect(),i.alpha=.7,e.addChild(i),n=SpriteUtil.createText(""+t,72,16765440,"center",!0),n.width=SpriteUtil.stageWidth,n.y=298,e.addChild(n),a=SpriteUtil.createImage("redeff_json#lightbox"),a.x=SpriteUtil.stageCenterX,a.y=SpriteUtil.stageCenterY,e.addChild(a),s=SpriteUtil.createImage("redeff_json#boxeff"),s.x=SpriteUtil.stageCenterX,s.y=SpriteUtil.stageCenterY,e.addChild(s),this.coinSprite=e),this.coinSprite.getChildAt(1).text=0==t?"":"+"+t+"金币",egret.Tween.removeTweens(this.coinSprite.getChildAt(2)),egret.Tween.get(this.coinSprite.getChildAt(2),{loop:!0}).to({rotation:360},3e3),r=this.coinSprite.getChildAt(3),r.scaleX=0,r.scaleY=0,egret.Tween.get(r).to({scaleX:1,scaleY:1},200),Game.instance().addTop(this.coinSprite),[2,new Promise(function(t,e){egret.setTimeout(function(){t()},o,200)})]})})},t.playCoinEffect=function(t,e){return void 0===t&&(t=132),void 0===e&&(e=55+GameData.ipxHgt),__awaiter(this,void 0,void 0,function(){var i=this;return __generator(this,function(n){return[2,new Promise(function(n,a){egret.clearInterval(i.intervalId);var s=0,r=0;i.intervalId=egret.setInterval(function(){if(s++,s>20)return void egret.clearInterval(i.intervalId);var a=i.getPools();a.scaleX=1,a.scaleY=1,a.x=SpriteUtil.stageCenterX,a.y=SpriteUtil.stageCenterY,Game.instance().addTop(a);var o=Math.random()>.5?-1:1,l=Math.random()>.5?-1:1,h=a.x+280*o*Math.random(),c=a.y+l*(10+280*Math.random());egret.Tween.get(a).to({x:h,y:c},300,egret.Ease.backOut).call(function(){var i=egret.Tween.get(a);i.wait(200),i.to({x:t,y:e,scaleX:.1,scaleY:.1},300).call(function(){egret.Tween.removeTweens(a),a.stop(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.PLAY_COIN_BREATH_EFFECT_EVENT)),a.parent&&a.parent.removeChild(a),r++,r>=20&&n()}).play()})},i,10)})]})})},t.getPools=function(){this.coinPools||(this.coinPools=[]);for(var t=0,e=this.coinPools;t<e.length;t++){var i=e[t];if(!i.parent)return i.gotoAndPlay(1,-1),i.scaleX=1,i.scaleY=1,i}var n=SpriteUtil.createMovieClip("coineff");return n.frameRate=30,n.gotoAndPlay(1,-1),n.scaleX=1,n.scaleY=1,this.coinPools.push(n),n},t.playPKEffect=function(t){var e=this;void 0===t&&(t="");var i=SpriteUtil.createImage("redeff_json#"+t);i.touchEnabled=!1,i.x=SpriteUtil.stageCenterX,i.y=SpriteUtil.stageCenterY-200,i.scaleX=.5,i.scaleY=.5,i.alpha=0,Game.instance().addTop(i),egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200).call(function(){egret.setTimeout(function(){i.parent&&i.parent.removeChild(i),egret.Tween.removeTweens(i),i=null},e,800)})},t.playBreathAnim=function(t,e,i,n,a){var s=this;return void 0===n&&(n=800),void 0===a&&(a=0),new Promise(function(r,o){return egret.Tween.removeTweens(t),e&&i?void egret.Tween.get(t).to(i,n).call(function(){egret.Tween.get(t).to(e,n).call(function(){0==a?s.playBreathAnim(t,e,i,n):(egret.Tween.removeTweens(t),r())})}):void r()})},t.playLoopTween=function(t,e,i,n,a){return void 0===n&&(n=0),void 0===a&&(a=800),new Promise(function(s,r){if(egret.Tween.removeTweens(t),!e||!i)return void s();var o=function(){egret.Tween.get(t).to(i,a).call(function(){egret.Tween.get(t).to(e,a).call(function(){0>=n?(s(),o=null):(n--,o())})})};o()})},t.getGrayFilter=function(){if(!this.grayFilter){var t=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,.3,0],e=new egret.ColorMatrixFilter(t);this.grayFilter=e}return[this.grayFilter]},t.getURLPath=function(){var t=window.location.pathname,e=t.substring(0,t.lastIndexOf("/")+1);return window.location.protocol+"//"+window.location.host+e},t.getDynamicImage=function(t){var e=this;return void 0===t&&(t=""),new Promise(function(i,n){var a=new egret.ImageLoader;a.crossOrigin="anonymous",a.once(egret.Event.COMPLETE,function(t){if(t.currentTarget.data){var e=new egret.Texture;e.bitmapData=t.currentTarget.data,i(e)}},e),a.once(egret.IOErrorEvent.IO_ERROR,function(t){egret.log("io error",t),n()},e),a.load(t)})},t.getBase64ImageByUrl=function(t,e){var i=this;return void 0===e&&(e=3e3),new Promise(function(n,a){AppCenter.getBase64Img(t).then(function(t){var s=!0;if(!t||!t.img)return void a();var r=egret.setTimeout(function(){s&&a(),egret.clearTimeout(r)},i,e);egret.BitmapData.create("base64",t.img,function(t){egret.clearTimeout(r),s=!1;
var e=new egret.Texture;e.bitmapData=t,n(e)})})["catch"](function(){a()})})},t.getHeadIconByUrl=function(t){var e=this;return void 0===t&&(t=""),new Promise(function(i,n){var a="menuover_json.headimg";t?e.getBase64ImageByUrl(t).then(function(t){i(t)})["catch"](function(){i(a)}):i(a)})},t.getUrlValueByKey=function(t){if(void 0===t&&(t=""),!t)return"";var e=window.location.href,i=e.split("?")[1],n="";if(i)for(var a=i.split("&"),s=0,r=a;s<r.length;s++){var o=r[s];if(o.search(t)>=0){n=o.search("=")>=0?o.split("=")[1]:"default";break}}return n},t.getCntRandomFromRange=function(t,e,i){var n=[];if(t>=e||0>=i)return n;for(var a=t;e>a;a++)n.push(a);if(i>=n.length)return n;for(var s=[];;){var r=~~(n.length*Math.random());if(s.push(n.splice(r,1)),s.length==i)break}return s},t.waiting=function(t){if(void 0===t&&(t=!0),!t)return void(this.waitSprite&&this.waitSprite.parent&&(this.waitSprite.parent.removeChild(this.waitSprite),egret.Tween.removeTweens(this.waitSprite)));if(!this.waitSprite){for(var e=12,i=2*Math.PI/e,n=30,a=new egret.Sprite,s=0;e>s;s++){var r=i*s,o={x:Math.cos(r)*n,y:Math.sin(r)*n},l=SpriteUtil.createCircle(5,16777215);l.x=o.x,l.y=o.y,l.alpha=(s+1)/12,a.addChild(l)}a.x=SpriteUtil.stageCenterX,a.y=SpriteUtil.stageCenterY,this.waitSprite=a}Game.instance().addTop(this.waitSprite),egret.Tween.removeTweens(this.waitSprite),egret.Tween.get(this.waitSprite,{loop:!0}).to({rotation:360},1e3)},t.getFigureUrl=function(t){var e="";for(var i in t)if(""!=t[i].figureurl)return t[i].figureurl;return e},t.checkInvitePK=function(){var t=this;AppCenter.getInvitePKData().then(function(e){if(e&&e.pkData){var i=e.pkData;i&&i!=GameData.baseData.accid&&(AppCenter.nativeCache(ConstUtil.PK_START_GAME_CACHE,"1","1"),console.log("pkData-----"),console.log(e),PKModel.instance().gotoPKGame(),egret.setTimeout(function(){var t=new InvitePKTip;t.open({userId:i,otherFlag:!0})},t,1e3))}})},t.intervalId=-1,t}();__reflect(GameUtil.prototype,"GameUtil");var RedpointUtil=function(){function t(){}return t.addRedPoint=function(t,e){void 0===e&&(e={});var i=t.__redpoint__,n=e.offx||0,a=e.offy||0,s=e.source||"menuover_json#redpoint";if(i||(i=SpriteUtil.createImage(s,!0)),t.__redpoint__=i,t instanceof egret.DisplayObjectContainer)i.x=t.width+n,i.y=a,t.addChild(i);else{var r=t.parent,o=t.x+t.width+n,l=t.y+a;i.x=o,i.y=l,r.addChild(i)}},t.removeRedPoint=function(t){if(t){var e=t.__redpoint__;e&&(e.parent&&e.parent.removeChild(e),delete t.__redpoint__)}else console.warn("移除红点时报错")},t}();__reflect(RedpointUtil.prototype,"RedpointUtil");var SpriteUtil=function(){function t(){}return t.createImage=function(t,e){if(void 0===t&&(t=""),void 0===e&&(e=!0),t){var i=new egret.Bitmap(RES.getRes(t));return e&&(i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2),i.touchEnabled=!0,i}},t.createSheetImage=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!0);var i=new egret.Bitmap(RES.getRes("actionImg_json#"+t));return e&&(i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2),i.touchEnabled=!0,i},t.createRect=function(t,e,i,n,a){void 0===t&&(t=this.stageWidth),void 0===e&&(e=this.stageHeight),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0);var s=new egret.Shape;return s.graphics.beginFill(a),s.graphics.drawRoundRect(0,0,t,e,i),s.graphics.endFill(),s},t.createCircle=function(t,e){void 0===t&&(t=10),void 0===e&&(e=16777215);var i=new egret.Shape;return i.graphics.beginFill(e),i.graphics.drawCircle(0,0,t),i.graphics.endFill(),i},t.createText=function(t,e,i,n,a,s,r){void 0===t&&(t=""),void 0===e&&(e=30),void 0===i&&(i=16777215),void 0===n&&(n="left"),void 0===a&&(a=!1),void 0===s&&(s=0),void 0===r&&(r=0);var o=new egret.TextField;return o.text=t,o.size=e,o.textColor=i,o.bold=a,o.stroke=s,o.strokeColor=r,o.textAlign=n,o},t.createMovieClip=function(t,e,i){void 0===e&&(e="mc"),void 0===i&&(i=!0);var n=RES.getRes(t+"_json"),a=RES.getRes(t+"_png"),s=new egret.MovieClipDataFactory(n,a),r=new egret.MovieClip(s.generateMovieClipData(e));return i&&(r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2),r},t.createDragonBones=function(t,e,i){void 0===i&&(i="Armature");var n=RES.getRes(t),a=RES.getRes(e+"_json"),s=RES.getRes(e+"_png"),r=new dragonBones.EgretFactory;r.parseDragonBonesData(n),r.parseTextureAtlasData(a,s);var o=r.buildArmatureDisplay(i);return o},t.createDynamicDragonBones=function(t,e){return void 0===e&&(e="resource/assets/dragbones/"),new Promise(function(i,n){var a=new DragonBonesLoader(e);a.loadSkeLoader(t,i)})},t.createTextButton=function(e,i,n,a,s){void 0===e&&(e=240),void 0===i&&(i=80),void 0===n&&(n="按钮");var r=a.bgcolor,o=void 0===r?16749874:r,l=a.lineWidth,h=void 0===l?0:l,c=a.lineColor,d=void 0===c?15876149:c,p=a.radius,u=void 0===p?0:p,g=a.alpha,v=void 0===g?1:g,m=s.size,_=void 0===m?30:m,f=s.textColor,E=void 0===f?16777215:f,T=s.bold,y=void 0===T?!1:T,C=s.stroke,w=void 0===C?0:C,S=s.strokeColor,A=void 0===S?0:S,I=new egret.Sprite;I.graphics.lineStyle(h,d),I.graphics.beginFill(o,v),I.graphics.drawRoundRect(0,0,e,i,u,u),I.graphics.endFill();var b=t.createText(n,_);return b.width=e,b.textColor=E,b.bold=y,b.stroke=w,b.strokeColor=A,b.textAlign="center",b.y=(i-b.height)/2+2,I.addChild(b),I.touchEnabled=!0,I.cacheAsBitmap=!0,I},t.stageWidth=0,t.stageHeight=0,t.stageCenterX=0,t.stageCenterY=0,t}();__reflect(SpriteUtil.prototype,"SpriteUtil");var StringUtil=function(){function t(){}return t.htmlColorStr=function(t){for(var e=t.toString(16),i=e.length,n="0x",a=0;6-i>a;a++)n+="0";var s=n+e,r=s.replace("0x","");return r},t.getTextFlow=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],a={style:{}};a.text=n.text;for(var s in n)"text"!=s&&(a.style[s]=n[s]);e.push(a)}return e},t.getFormatCoin=function(t){return void 0===t&&(t=0),t=parseFloat(t+""),1e6>t?t+"":(t/1e4).toFixed(1)+"w"},t}();__reflect(StringUtil.prototype,"StringUtil");var TextUtil=function(){function t(){}return t.showEllipsis=function(t,e,i){void 0===i&&(i=7),t.wordWrap=!1;var n=t.width;if(e.length>i){t.width=1e3,t.text=e,t.width=t.textWidth;for(var a=e;t.textWidth>n;)a=a.slice(0,-1),t.text=a+"...";t.width=n}else t.text=e},t}();__reflect(TextUtil.prototype,"TextUtil");var TickerUtil=function(){function t(){}return t.loop=function(e){for(var i=0,n=t.callLoops;i<n.length;i++){var a=n[i],s=a.callback,r=a.context;s&&s.call(r)}return!1},t.addLoop=function(t,e){this.callLoops.push({callback:t,context:e}),egret.stopTick(this.loop,this),egret.startTick(this.loop,this),console.log("call Loops:"+this.callLoops.length)},t.removeLoop=function(t){for(var e=this.callLoops.length,i=0;e>i;i++){var n=this.callLoops[i].callback;if(n==t){this.callLoops.splice(i,1);break}}this.callLoops.length<=0&&egret.stopTick(this.loop,this)},t.callLoops=[],t}();__reflect(TickerUtil.prototype,"TickerUtil");var TimeUtil=function(){function t(){}return t.getHMSTimeStr=function(t){void 0===t&&(t=0);var e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),n=t-3600*e-60*i;return(e>=10?e:"0"+e)+":"+(i>=10?i:"0"+i)+":"+(n>=10?n:"0"+n)},t.getMSTimeStr=function(t){void 0===t&&(t=0);var e=~~(t/60),i=t-60*e;return(e>=10?e:"0"+e)+":"+(i>=10?i:"0"+i)},t.getTimeByTime=function(t){var e=new Date(1e3*t),i=e.getTime(),n=e.getMonth(),a=e.getDate(),s=e.getHours(),r=e.getMinutes(),o=e.getSeconds(),l=e.getDay();return{year:i,month:10>n?"0"+n:n,date:a,hour:10>s?"0"+s:s,minute:10>r?"0"+r:r,second:10>o?"0"+o:o,week:l}},t.getTimeYMDHMSStr=function(){return""},Object.defineProperty(t,"puzzleClose",{get:function(){return!0},enumerable:!0,configurable:!0}),t}();__reflect(TimeUtil.prototype,"TimeUtil");var AchievePopup=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/AchievePopup.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.titleTxt.visible=!1,this.starImgArr=[this.starImg0,this.starImg1,this.starImg2,this.starImg3,this.starImg4],this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){t.target==this.getBtn?(AppCenter.inviteFriend("121"),28==this._type?AppCenter.uploadActivityLog("1010089","click","page","28","1"):32==this._type?AppCenter.uploadActivityLog("1010090","click","page","32","1"):-1==this._type&&this.upActivity("click",this._achieveData.id)):t.target==this.moreBtn?(GameView.instance().showMissionView(),28==this._type?AppCenter.uploadActivityLog("1010089","click","page","28","2"):32==this._type&&AppCenter.uploadActivityLog("1010090","click","page","32","2"),this.close()):t.target==this.closeBtn&&(28==this._type?AppCenter.uploadActivityLog("1010089","close","page","28"):32==this._type?AppCenter.uploadActivityLog("1010090","close","page","32"):-1==this._type&&this.upActivity("close",this._achieveData.id),this.close())},e.prototype.getRandomStarPos=function(){var t=this.bgImg.x+(Math.random()-.5)*this.bgImg.width,e=this.bgImg.y+(Math.random()-.5)*this.bgImg.height;return{x:t,y:e}},e.prototype.open=function(e,i){var n=this;void 0===i&&(i=null),t.prototype.open.call(this),this._type=e,this.currentState=e+"",28==e?(this.titleImg.source="achieve_json.achieve_28",this.descTxt.textFlow=[{text:"恭喜获得“"},{text:"初出茅庐"},{text:"”称号"}],this.coinTxt.text="+100",AppCenter.uploadActivityLog("1010089","show","page","28")):32==e?(this.titleImg.source="achieve_json.achieve_32",this.descTxt.textFlow=[{text:"恭喜获得“"},{text:"初生牛犊"},{text:"”称号"}],this.coinTxt.text="+100",AppCenter.uploadActivityLog("1010090","show","page","32")):-1==e&&i&&(this._achieveData=i,this.titleImg.source="achieve_json.achieve_"+i.id,this.descTxt.textFlow=[{text:"恭喜获得“"},{text:""+i.title},{text:"”称号"}],this.coinTxt.text="+"+i.coin,this.upActivity("show",i.id)),this.starImgArr.forEach(function(t){t.alpha=.05,t.scaleX=t.scaleY=.01}),this.bgAnimIntervalId=egret.setInterval(function(){n.bgImg.rotation+=2,n.starImgArr.forEach(function(t){if(t.alpha<.1){egret.Tween.removeTweens(t);var e=n.getRandomStarPos(),i=e.x,a=e.y;t.x=i,t.y=a;var s=egret.Tween.get(t);s.to({alpha:1,scaleX:1,scaleY:1},450+500*Math.random())}else if(t.alpha>.9){egret.Tween.removeTweens(t);var s=egret.Tween.get(t);s.to({alpha:.05,scaleX:.01,scaleY:.01},450+500*Math.random())}})},this,30)},e.prototype.close=function(){t.prototype.close.call(this),this.starImgArr.forEach(function(t){t.alpha=.05,t.scaleX=t.scaleY=.01}),egret.clearInterval(this.bgAnimIntervalId)},e.prototype.upActivity=function(t,e){28==e?AppCenter.uploadActivityLog("1030073",t,"page",e+""):29==e?AppCenter.uploadActivityLog("1030074",t,"page",e+""):30==e?AppCenter.uploadActivityLog("1030075",t,"page",e+""):31==e?AppCenter.uploadActivityLog("1030076",t,"page",e+""):32==e?AppCenter.uploadActivityLog("1030077",t,"page",e+""):33==e?AppCenter.uploadActivityLog("1030078",t,"page",e+""):34==e?AppCenter.uploadActivityLog("1030079",t,"page",e+""):35==e?AppCenter.uploadActivityLog("1030080",t,"page",e+""):36==e?AppCenter.uploadActivityLog("1030081",t,"page",e+""):37==e?AppCenter.uploadActivityLog("1030082",t,"page",e+""):38==e?AppCenter.uploadActivityLog("1030083",t,"page",e+""):39==e?AppCenter.uploadActivityLog("1030084",t,"page",e+""):40==e?AppCenter.uploadActivityLog("1030085",t,"page",e+""):41==e?AppCenter.uploadActivityLog("1030086",t,"page",e+""):42==e?AppCenter.uploadActivityLog("1030087",t,"page",e+""):43==e?AppCenter.uploadActivityLog("1030088",t,"page",e+""):44==e?AppCenter.uploadActivityLog("1030089",t,"page",e+""):45==e?AppCenter.uploadActivityLog("1030090",t,"page",e+""):46==e?AppCenter.uploadActivityLog("1030091",t,"page",e+""):47==e?AppCenter.uploadActivityLog("1030095",t,"page",e+""):48==e?AppCenter.uploadActivityLog("1030096",t,"page",e+""):49==e?AppCenter.uploadActivityLog("1030097",t,"page",e+""):50==e?AppCenter.uploadActivityLog("1030098",t,"page",e+""):54==e?AppCenter.uploadActivityLog("1030116",t,"page",e+""):55==e?AppCenter.uploadActivityLog("1030117",t,"page",e+""):56==e?AppCenter.uploadActivityLog("1030118",t,"page",e+""):57==e?AppCenter.uploadActivityLog("1030119",t,"page",e+""):58==e?AppCenter.uploadActivityLog("1030120",t,"page",e+""):59==e?AppCenter.uploadActivityLog("1030121",t,"page",e+""):60==e?AppCenter.uploadActivityLog("1030122",t,"page",e+""):61==e?AppCenter.uploadActivityLog("1030123",t,"page",e+""):62==e&&AppCenter.uploadActivityLog("1030124",t,"page",e+"")},e}(BaseEuiView);__reflect(AchievePopup.prototype,"AchievePopup");var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){0!=window.navigator.platform.indexOf("Win32")&&egret.ticker.pause()},egret.lifecycle.onResume=function(){0!=window.navigator.platform.indexOf("Win32")&&egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),EventCenter.instance().addEventListener(GameEvent.RELOAD_GAME_NOW,this.reloadNow,this),Game.instance().setStage(this.stage),AppUtil.addNativeExternalCallback(),this.initGlobalFunc(),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,8,,9]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json?v=1.0","resource/")];case 1:return i.sent(),[4,RES.loadConfig("resource/hotting.res.json","resource/")];case 2:return i.sent(),[4,this.loadTheme()];case 3:return i.sent(),[4,RES.loadGroup("dragonbones")];case 4:return i.sent(),[4,RES.loadGroup("animations")];case 5:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 6:return i.sent(),[4,RES.loadGroup("hotpreload")];case 7:return i.sent(),t.close(),[3,9];case 8:return e=i.sent(),console.error(e),[3,9];case 9:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.reloadNow=function(t){this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return AppCenter.uploadActivityLog("1010095","show","page"),[4,AppCenter.getParameters()];case 1:return t.sent(),window.VConsole&&GameData.baseData.isDebug==ConstUtil.TEST_ENV&&new window.VConsole,[4,GameModel.instance().getUserInfo()];case 2:return t.sent(),[4,PKModel.instance().getOwnPKInfo()];case 3:return t.sent(),[4,this.loadResource()];case 4:return t.sent(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME})),EventCenter.instance().removeEventListener(GameEvent.RELOAD_GAME_NOW,this.reloadNow,this),AppCenter.getSplashStatus().then(function(){GameSound.instance().isCanPlay=!1}),AppCenter.nativeCache(ConstUtil.CACHE_MUSIC,"2").then(function(t){var e=t&&t.value?parseInt(t.value):1;GameSound.instance().isPlayMusic=!!e}),AppCenter.nativeCache(ConstUtil.CACHE_SOUND,"2").then(function(t){var e=t&&t.value?parseInt(t.value):1;GameSound.instance().isPlaySound=!!e}),GameData.isPlaying=!0,GameUtil.checkInvitePK(),[2]}})})},e.prototype.initGlobalFunc=function(){window.updateFKCCYCoin=function(){GameModel.instance().getTotalCoin()},window.viewDidDisAppear=function(){GameSound.instance().isCanPlay=!1,EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.HIDE_STATICS_GAME_EVENT)),EventCenter.instance().dispatchEvent(new GuessEvent(GuessEvent.GUESS_HIDE_STATICS_EVENT))},window.viewDidAppear=function(){GameSound.instance().isCanPlay=!0,GameModel.instance().getTotalCoin(),HttpServer.updateMissionTipsData(),GameModel.instance().getBubbleInfo(),egret.ticker.resume(),GameModel.instance().getAccountInfo(!0).then(function(){EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MENU_INFO))}),GameModel.instance().getUserInfo(!0),GameModel.instance().getExperienceBeast(!0)},window.userSignNow=function(){HttpServer.getSignNow().then(function(t){GameModel.instance().updateCoinNum(t.bonus),HttpServer.getSignMulti().then(function(e){AppCenter.showSignAd(t.bonus,e.multi).then(function(){AppCenter.showVideoAd("rewardvideoch").then(function(){HttpServer.getSignDoubleNow(e.multi).then(function(t){GameModel.instance().updateCoinNum(t.bonus),AppCenter.showAdDialog("3",t.bonus,GameModel.instance().totalCoin,"bigcheckin")})})})})})},window.goBackToLast=function(){Game.instance().gotoLastScene()},window.gotoSceneByType=function(t){if(t&&t.type){var e=t.type;"game"==e?EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_START_EVENT)):"picture"==e&&GuessModel.instance().startGuessGame()}},window.checkVisitorRewardResult=function(){console.log("^#^#^ checkVisitorRewardResult"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.CHECK_NEW_USER_REDPACK_EVENT))},window.onUnbindThirdParty=function(){console.log("^#^#^ onUnbindThirdParty"),GameModel.instance().getAccountInfo(!0).then(function(){EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MENU_INFO))})},window.pkUserIsComming=function(t){GameData.isPlaying&&GameUtil.checkInvitePK()}},e}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var BlackNormalView=function(t){function e(){var e=t.call(this)||this;return e.endGetBool=!1,e.intervaIdx=-1,e.skinName="resource/game_skins/BlackNormalViewSkin.exml",e}return __extends(e,t),e.prototype.init=function(){this.isEnableBg=!1,t.prototype.init.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanlder,this)},e.prototype.touchHanlder=function(t){var e=this,i=null,n=null,a=!0;return t.target==this.videoGrp?"status_getcard"==this.currentState&&(AppCenter.uploadActivityLog("1020045","click","page"),AppCenter.showVideoAd("rewardvideopgzf").then(function(t){JudgeModel.instance().getJudgeResultData(!0).then(function(t){e._data=t,e.cardGrp1.visible=!e.cardGrp1.visible,e.cardGrp2.visible=!e.cardGrp2.visible,e.cardGrp3.visible=!e.cardGrp3.visible,e.playGetCard(),e.endGetBool=!0,AppCenter.uploadActivityLog("1020042","show","page")})}),a=!1):t.target==this.getBtnGrp?"status_getcard"==this.currentState&&(AppCenter.uploadActivityLog("1020042","click","page"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME}))):t.target==this.xbutton?"status_levelup"==this.currentState&&(AppCenter.uploadActivityLog("1010083","click","page"),AppCenter.inviteFriend("114")):t.target==this.selectCard1?(i=this.cardGrp1,n=this.selectCard1,this.cardGrp2.visible=!1,this.cardGrp3.visible=!1):t.target==this.selectCard2?(i=this.cardGrp2,n=this.selectCard2,this.cardGrp1.visible=!1,this.cardGrp3.visible=!1):t.target==this.selectCard3?(i=this.cardGrp3,n=this.selectCard3,this.cardGrp2.visible=!1,this.cardGrp1.visible=!1):t.target==this.closeBtn?"status_getcard"==this.currentState&&("status_getcard"==this.currentState&&AppCenter.uploadActivityLog(this.endGetBool?"1020042":"1020045","close","page"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME}))):a=!1,a?i&&"status_getcard"==this.currentState?void this.playGetCardEff(i,n):void this.close():void 0},e.prototype.playGetCardEff=function(t,e){var i=this;this.cardGrp1.touchEnabled=!1,this.cardGrp2.touchEnabled=!1,this.cardGrp3.touchEnabled=!1,egret.Tween.removeTweens(this.selectCard1),egret.Tween.removeTweens(this.selectCard2),egret.Tween.removeTweens(this.selectCard3);var n=this._data;t.scaleX=1;var a=this.cardGrp2.x;this.successTitle.visible=!1,this.ctitleTxt.text="",this.ctitleTxt.y=40,e.width=199,e.height=265,e.y=0;var s=2;egret.Tween.get(t).to({x:a,scaleX:s,scaleY:s},150).call(function(){i.effectImg.visible=!0,i.effectImg.scaleX=1,i.effectImg.scaleY=1,i.effectImg.alpha=1,egret.Tween.get(i.effectImg).to({scaleX:7,scaleY:7,alpha:0},800,egret.Ease.cubicInOut),i.videoGrp.visible=!i.endGetBool,i.getBtnGrp.visible=i.endGetBool,i.closeBtn.visible=!0,i.ctitleTxt.text="恭喜获得",egret.Tween.get(e).to({scaleX:0},100).to({scaleX:1},100).call(function(){1==n.prize_type?(e.source=RES.getRes("viewpage_json.jcoincard"),i.cardTxt.textColor=11687689,i.cardTxt.textFlow=[{text:"+"+n.gold,style:{fontFamily:"xnumberMedium",bold:!0}},{text:"金币",style:{size:38,bold:!1}}],i.cardTxt.y=520):2==n.prize_type&&(e.source=""+ConstUtil.PATH_CARDS+n.card_type+"_"+n.card.idx+".png",i.cardTxt.text=n.card.name,i.cardTxt.y=590,JudgeModel.instance().checkFirstAchieve())})})},e.prototype.getImageUrl=function(t,e){var i=this,n=ConstUtil.getUrlByTypeId(t,e);n&&GameUtil.getDynamicImage(n).then(function(t){i.avatarImg.source=t,i.avatarImg.anchorOffsetX=i.avatarImg.width/2,i.avatarImg.anchorOffsetY=i.avatarImg.height/2})},e.prototype.open=function(e,i){if(void 0===e&&(e=0),void 0===i&&(i=null),t.prototype.open.call(this),this._data=i,0==e){this.currentState="status_levelup",this.validateNow(),egret.Tween.get(this.effectImg,{loop:!0}).to({rotation:360},5e3),this.getImageUrl(i.type,i.level);var n=i.lvlupGold;n>0?(this.lvlGoldTxt.text="+"+n,this.lvlGoldTxt.visible=!0,this.lvlupCoinImg.visible=!0,this.levelupNameTxt.visible=!1):(this.lvlGoldTxt.visible=!1,this.lvlupCoinImg.visible=!1,i.type==ConstUtil.TYPE_ID_CHARACTER?(this.levelupNameTxt.text=GameModel.instance().userData.character.char_level.label,this.levelupNameTxt.visible=!0):this.levelupNameTxt.visible=!1),AppCenter.uploadActivityLog("1010083","show","page")}else 1==e&&(this.currentState="status_getcard",this.validateNow(),AppCenter.uploadActivityLog("1020045","show","page"),this.playGetCard())},e.prototype.playGetCard=function(){this.endGetBool=!0,this.cardTxt.text="",this.effectImg.visible=!1,this.closeBtn.visible=!1,this.successTitle.visible=!0,this.videoGrp.visible=!1,this.getBtnGrp.visible=!1,this.ctitleTxt.text="请抽取您的奖励",this.ctitleTxt.y=185,GameUtil.playBreathAnim(this.selectCard1,{y:-15},{y:15}),GameUtil.playBreathAnim(this.selectCard2,{y:-15},{y:15}),GameUtil.playBreathAnim(this.selectCard3,{y:-15},{y:15}),this.playWave(this.scaleEffect11,this.scaleEffect12),this.playWave(this.scaleEffect21,this.scaleEffect22),this.playWave(this.scaleEffect31,this.scaleEffect32),egret.Tween.get(this.effect1,{loop:!0}).to({rotation:360},5e3),egret.Tween.get(this.effect2,{loop:!0}).to({rotation:360},5e3),egret.Tween.get(this.effect3,{loop:!0}).to({rotation:360},5e3),this.playStarEff()},e.prototype.playWave=function(t,e){egret.Tween.get(t,{loop:!0}).to({scaleX:1.1,scaleY:1.1,alpha:0},1500),egret.setTimeout(function(){var t=egret.Tween.get(e,{loop:!0});t.to({scaleX:1.1,scaleY:1.1,alpha:0},1500)},this,800)},e.prototype.playStarEff=function(){var t=this;egret.clearInterval(this.intervaIdx),this.intervaIdx=egret.setInterval(function(){t.createStarEff(t.cardGrp1),t.createStarEff(t.cardGrp2),t.createStarEff(t.cardGrp3)},this,100)},e.prototype.createStarEff=function(t){var e=0,i=0,n=e+300,a=i,s=this.getPools(),r=2*Math.PI*Math.random(),o=(n-e)*Math.cos(r)-(a-i)*Math.sin(r)+e,l=(a-i)*Math.cos(r)+(n-e)*Math.sin(r)+i,h=.5+Math.random();t.addChildAt(s,4),s.alpha=.01,egret.Tween.get(s).to({scaleX:h,scaleY:h,alpha:1},300).to({x:o,y:l,scaleX:.01,scaleY:.01,alpha:0},1e3).call(function(){egret.Tween.removeTweens(s),s.parent&&s.parent.removeChild(s),s.alpha=1})},e.prototype.getPools=function(){if(this.starPools||(this.starPools=[]),this.starPools.length>0)for(var t=0,e=this.starPools;t<e.length;t++){var i=e[t];if(!i.parent)return i.x=0,i.y=0,i}var n=new eui.Image;return n.source="redeff_json.xstar",n.anchorOffsetX=20,n.anchorOffsetY=20,n.x=0,n.y=0,this.starPools.push(n),n},e.prototype.close=function(){t.prototype.close.call(this),this.effectImg&&egret.Tween.removeTweens(this.avatarImg),this.viewGrp&&this.viewGrp.removeChildren(),this.videoGrp&&this.videoGrp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanlder,this),"status_levelup"==this.currentState&&AppCenter.uploadActivityLog("1010083","close","page"),this.effect1&&egret.Tween.removeTweens(this.effect1),this.effect2&&egret.Tween.removeTweens(this.effect2),this.effect3&&egret.Tween.removeTweens(this.effect3),this.scaleEffect11&&egret.Tween.removeTweens(this.scaleEffect11),this.scaleEffect12&&egret.Tween.removeTweens(this.scaleEffect12),this.scaleEffect21&&egret.Tween.removeTweens(this.scaleEffect21),this.scaleEffect22&&egret.Tween.removeTweens(this.scaleEffect22),this.scaleEffect31&&egret.Tween.removeTweens(this.scaleEffect32),egret.clearInterval(this.intervaIdx),this.effectImg=null,this.viewGrp=null,this.avatarImg=null,this.videoGrp=null,this._data=null,this.destroy()},e}(BaseEuiView);__reflect(BlackNormalView.prototype,"BlackNormalView");var CardView=function(t){function e(){var e=t.call(this)||this;return e.isNeedBg=!1,e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=this,e=SpriteUtil.createRect(SpriteUtil.stageWidth,SpriteUtil.stageHeight,0,0,16316405);this.addChild(e),e.touchEnabled=!0;var i=new egret.Sprite,n=SpriteUtil.createImage("guessgame_json#backbtn",!1);n.x=10,n.name="homebtn",n.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSound.instance().playSound("btn"),t.close()},this),i.addChild(n);var a=SpriteUtil.createText("我的卡片",40,3355443,"center",!0);a.width=SpriteUtil.stageWidth,a.y=37,i.addChild(a),this.addChild(i),i.y=GameData.ipxHgt,this.initItems()},e.getMoreTxt=function(){return this.moreTxt||(this.moreTxt=new eui.Label,this.moreTxt.textColor=13421772,this.moreTxt.size=26,this.moreTxt.text="更多卡片奖励即将上线",this.moreTxt.anchorOffsetX=this.moreTxt.width/2,this.moreTxt.x=362),this.moreTxt},e.prototype.initItems=function(){var t=this,e=new eui.List;e.itemRenderer=CardTypeItem,this.cardList=e,this.scroller=new eui.Scroller,this.scroller.height=SpriteUtil.stageHeight-150-GameData.ipxHgt,this.scroller.width=730,this.scroller.scrollPolicyH="off",this.scroller.scrollPolicyV="auto",this.scroller.viewport=this.cardList;var i=function(){t.scroller.verticalScrollBar.visible=!1,t.scroller.verticalScrollBar.autoVisibility=!1,t.scroller.removeEventListener(eui.UIEvent.CREATION_COMPLETE,i,t),i=null};this.scroller.addEventListener(eui.UIEvent.CREATION_COMPLETE,i,this),this.addChild(this.scroller),this.scroller.x=SpriteUtil.stageCenterX-365,this.scroller.y=100+GameData.ipxHgt},e.prototype.refresh=function(){for(var t=JudgeModel.instance().cardData,e=[],i=[],n=[],a=0,s=t;a<s.length;a++){var r=s[a];r.finish?r.is_received?n.push(r):e.push(r):i.push(r)}var o=e.concat(i,n);this.cardList.dataProvider=new eui.ArrayCollection(o),this.cardList.validateNow(),this.scroller.viewport.scrollV=0},e.prototype.open=function(){t.prototype.open.call(this),this.refresh(),AppCenter.changeStatusBarTextColor(),AppCenter.uploadActivityLog("1020037","show","page")},e.prototype.close=function(){t.prototype.close.call(this),AppCenter.changeStatusBarTextColor(0),AppCenter.uploadActivityLog("1020037","close","page")},e}(BaseView);__reflect(CardView.prototype,"CardView");var CommonView=function(t){function e(){var e=t.call(this)||this;return e.intervalIdx=-1,e.skinName="resource/game_skins/CommonViewSkin.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.openType=1,this.btnLabel.fontFamily="xnumberBold",this.numTxt.fontFamily="xnumberBold",this.descTxt.fontFamily="xnumberBold",this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.confirmBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.cacheAsBitmap=!0},e.prototype.touchHandler=function(t){GameSound.instance().playSound("btn"),t.target==this.closeBtn?this.close():t.target==this.confirmBtn&&this.handleClk()},e.prototype.handleClk=function(){var t=this._data.type;0==t?(AppCenter.uploadActivityLog("1020017","click","page"),AppCenter.showVideoAd("rewardvideotl").then(function(){GameModel.instance().getAddLifeInfo(1).then(function(){EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_HEAD_INFO_EVENT))})})):1==t?(AppCenter.uploadActivityLog("1020007","click","page"),AppCenter.showVideoAd("rewardvideots").then(function(){HttpServer.getUseTipTimesData(1),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.TIP_GAME_INFO_EVENT))})):2==t?AppCenter.uploadActivityLog("1020015","click","page"):3==t&&(GameModel.instance().getAddLifeInfo(2).then(function(){EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_HEAD_INFO_EVENT))}),AppCenter.uploadActivityLog("1020018","click","page")),this.close(),this.showEffect(!1)},e.prototype.showEffect=function(t){var e=this;if(void 0===t&&(t=!0),egret.clearInterval(this.intervalIdx),t)this.intervalIdx=egret.setInterval(function(){var t=e.getPools();egret.Tween.removeTweens(t),egret.Tween.get(t).to({y:140,alpha:0},1e3).call(function(){egret.Tween.removeTweens(t),t.parent&&t.parent.removeChild(t)})},this,500);else{if(!this.arrowPools||0==this.arrowPools.length)return;for(var i=0,n=this.arrowPools;i<n.length;i++){var a=n[i];egret.Tween.removeTweens(a),a.parent&&a.parent.removeChild(a)}}},e.prototype.getPools=function(){this.arrowPools||(this.arrowPools=[]);for(var t=0,e=this.arrowPools;t<e.length;t++){var i=e[t];if(!i.parent)return i.alpha=1,i.x=66+~~(320*Math.random()),i.y=400,this.addChild(i),i}var n=new eui.Image("viewpage_json.arrow");return n.x=66+~~(320*Math.random()),n.y=400,this.addChild(n),this.arrowPools.push(n),n},e.prototype.refresh=function(){if(this._data){var t=this._data.type;if(this.midImage.scaleX=.6,this.midImage.scaleY=.6,this.midImage.x=264,0==t)this.secondImg.visible=!0,this.titleTxt.text="体力用完了",this.midImage.source="viewpage_json.biglife",this.numTxt.text="+3",this.numTxt.textColor=3918570,this.confirmBtn.source="viewpage_json.btnvideo",this.descTxt.text="",this.btnLabel.text="免费得体力",this.btnLabel.x=this.confirmBtn.x+56,AppCenter.uploadActivityLog("1020017","show","page");else if(1==t)this.secondImg.visible=!0,this.titleTxt.text="提示次数用完了",this.midImage.source="viewpage_json.lamb",this.numTxt.text="",this.confirmBtn.source="viewpage_json.btnvideo",this.descTxt.text="",this.btnLabel.text="免费提示",this.btnLabel.x=this.confirmBtn.x+62,AppCenter.uploadActivityLog("1020007","show","page");else if(2==t){this.midImage.scaleX=1,this.midImage.scaleY=1,this.midImage.x=320,this.secondImg.visible=!1,this.titleTxt.text="恭喜升级！";var e=this._data;e&&this.getImageUrl(e.reward_type,e.reward_level),this.numTxt.text="",this.descTxt.text="返回首页可以升级哦~",this.confirmBtn.source="viewpage_json.commonbtn",this.btnLabel.text="继续",this.btnLabel.x=this.confirmBtn.x+133,this.showEffect(),AppCenter.uploadActivityLog("1020015","show","page")}else 3==t&&(this.secondImg.visible=!0,this.titleTxt.text="体力用完了",this.midImage.source="viewpage_json.biglife",this.numTxt.text="+3",this.numTxt.textColor=3918570,this.confirmBtn.source="viewpage_json.commonbtn",this.descTxt.text="",this.btnLabel.text="免费体力X3",this.btnLabel.x=this.confirmBtn.x+56,AppCenter.uploadActivityLog("1020018","show","page"));this.midImage.anchorOffsetX=this.midImage.width/2,this.midImage.anchorOffsetY=this.midImage.height/2}},e.prototype.getImageUrl=function(t,e){var i=this,n=ConstUtil.getUrlByTypeId(t,e),a=!1;t==ConstUtil.TYPE_ID_RED_GIFT?(this.midImage.source=RES.getRes("redeff_json.redbag"),this.midImage.anchorOffsetX=this.midImage.width/2,this.midImage.anchorOffsetY=this.midImage.height/2,a=!0):t==ConstUtil.TYPE_ID_BEAST_GIFT&&(this.midImage.source=RES.getRes("redeff_json.redbag"),this.midImage.anchorOffsetX=this.midImage.width/2,this.midImage.anchorOffsetY=this.midImage.height/2,a=!0),a||GameUtil.getDynamicImage(n).then(function(t){i.midImage.source=t,i.midImage.anchorOffsetX=i.midImage.width/2,i.midImage.anchorOffsetY=i.midImage.height/2;
var e=450/i.midImage.width,n=226/i.midImage.height,a=n>e?e:n;i.midImage.scaleX=a,i.midImage.scaleY=a})},e.prototype.open=function(e){t.prototype.open.call(this),this._data=e,AppCenter.hidePassGameView(),this.isCreated&&this.refresh()},e.prototype.close=function(){t.prototype.close.call(this),0==this._data.type?AppCenter.uploadActivityLog("1020017","close","page"):1==this._data.type?AppCenter.uploadActivityLog("1020007","close","page"):2==this._data.type?AppCenter.uploadActivityLog("1020015","close","page"):3==this._data.type&&AppCenter.uploadActivityLog("1020018","close","page"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.SHOW_BIG_AD_VIEW_EVENT))},e}(BaseEuiView);__reflect(CommonView.prototype,"CommonView");var ConfirmView=function(t){function e(){var e=t.call(this)||this;return e._type=0,e.skinName="resource/game_skins/ConfirmView.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.touchHandler=function(t){t.target==this.confirmBtn?(this._callBack&&this._callBack(1),this.close(),0==this._type?AppCenter.uploadActivityLog("1020066","click","page"):1==this._type&&AppCenter.uploadActivityLog("1020070","click","page","","1")):t.target==this.cancelBtn&&(this._callBack&&this._callBack(0),1==this._type&&AppCenter.uploadActivityLog("1020070","click","page","","2"),this.close())},e.prototype.open=function(e,i){void 0===e&&(e=null),void 0===i&&(i=0),t.prototype.open.call(this),this._type=i,this._callBack=e,this.validateNow(),0==i?(this.descTxt.text="小主，认输将无法获得本局的金币奖励哦~",AppCenter.uploadActivityLog("1020066","show","page")):1==i?(this.descTxt.text="此时退出将直接认输且无法获得金币奖励",AppCenter.uploadActivityLog("1020070","show","page")):2==i?this.descTxt.text="屏幕是否变小，如果变小点击确定适配，方案1":3==i&&(this.descTxt.text="屏幕是否依然变小，如果变小点击确定适配，方案2")},e.prototype.close=function(){t.prototype.close.call(this),this.destroy(),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this._callBack=null,AppCenter.uploadActivityLog("1020066","close","page")},e}(BaseEuiView);__reflect(ConfirmView.prototype,"ConfirmView");var EqualView=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/EqualView.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){(t.target==this.confirmBtn||t.target==this.closeBtn)&&(AppCenter.uploadActivityLog("1010096","click","page"),this.close())},e.prototype.open=function(){t.prototype.open.call(this),AppCenter.uploadActivityLog("1010096","show","page")},e.prototype.close=function(){t.prototype.close.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.confirmBtn=null,this.closeBtn=null,this.destroy(),AppCenter.uploadActivityLog("1010096","close","page")},e}(BaseEuiView);__reflect(EqualView.prototype,"EqualView");var ErrorView=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/ErrorView.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=SpriteUtil.createRect();this.addChild(e),e.alpha=.7,this.cacheAsBitmap=!0,this.touchEnabled=!0,this.touchChildren=!1,this.groupView.x=SpriteUtil.stageCenterX-270,this.groupView.y=SpriteUtil.stageCenterY-172,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){this.parent&&this.parent.removeChild(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.RELOAD_GAME_NOW))},e}(eui.Component);__reflect(ErrorView.prototype,"ErrorView",["eui.UIComponent","egret.DisplayObject"]);var ExplainView=function(t){function e(){var e=t.call(this)||this;return e.isFirstShowAdd=!1,e.isClickAdd=!1,e.from="",e.skinName="resource/game_skins/ExplainViewSkin.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.openType=1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.refresh()},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.feedbackLbl.textFlow=[{text:"有错误？点我反馈",style:{underline:!0}}],this.xscroller.verticalScrollBar.visible=!1,this.xscroller.verticalScrollBar.autoVisibility=!1,GameModel.instance().userData.level_id>0||AppCenter.nativeCache(ConstUtil.CACHE_FIRST_ADD_NEW_BOOK,"2").then(function(t){var i=t&&t.value?parseInt(t.value):0;isNaN(i)&&(i=0),0==i&&egret.setTimeout(function(){if(AppCenter.nativeCache(ConstUtil.CACHE_FIRST_ADD_NEW_BOOK,"1","1"),e.isOpened&&!e.isClickAdd){var t=e.addToBtn.parent.localToGlobal(e.addToBtn.x,e.addToBtn.y),i=new egret.Rectangle(t.x,t.y,e.addToBtn.width,e.addToBtn.height);GuideTip.instance().playGuide(i),e.isFirstShowAdd=!0}},e,500)})},e.prototype.refresh=function(){var t=this._data;if(t){var e=t.idiom;this.titleTxt.text=e;var i="\n";t.idiom_explain&&String(t.idiom_explain).trim().length&&(i+="成语解释："+t.idiom_explain+"\n"),t.idiom_from&&String(t.idiom_from).trim().length&&(i+="成语出处："+t.idiom_from+"\n"),t.idiom_eg&&String(t.idiom_eg).trim().length&&(i+="成语例句："+t.idiom_eg+"\n"),t.idiom_story&&String(t.idiom_story).trim().length&&(i+="成语故事："+t.idiom_story+"\n"),t.idiom_similar&&String(t.idiom_similar).trim().length&&(i+="近义词："+t.idiom_similar+"\n"),t.idiom_opposite&&String(t.idiom_opposite).trim().length&&(i+="反义词："+t.idiom_opposite+"\n"),this.descTxt.text=i,this.pinyinLbl.text=""+(t.idiom_py||""),this._data.is_add?this.btnNameLbl.text="学会了,移除生词本":this.btnNameLbl.text="加入生词本"}},e.prototype.touchHandler=function(t){var e=this;t.target==this.btnConfirm?(GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1020016","click","page"),this.close()):t.target==this.addToBtn?(GameSound.instance().playSound("btn"),this._data.is_add?(AppCenter.uploadActivityLog("1010100","click","","","hardBook_remove",this.from),HttpServer.removeNewIdiomBook(this._data.idiom).then(function(){e.close()})):(AppCenter.uploadActivityLog("1010100","click","","","hardBook_add",this.from),this.isClickAdd=!0,HttpServer.addNewIdiomBook(this._data.idiom).then(function(){if(e.close(),e.isFirstShowAdd){e.isFirstShowAdd=!1;var t=new FirstAddNewView;t.open()}}),GuideTip.instance().close())):t.target==this.feedbackLbl&&(GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1010100","click","","","idiom_post_error",this.from),HttpServer.errorCYReport(this._data.idiom),this.close())},e.prototype.open=function(e,i){return void 0===i&&(i=""),this._data=e,this.from=i,e?(t.prototype.open.call(this),AppCenter.hidePassGameView(),AppCenter.uploadActivityLog("1020016","show","page"),AppCenter.uploadActivityLog("1010100","show","","","",this.from),void(this.isCreated&&this.refresh())):void this.close()},e.prototype.close=function(){t.prototype.close.call(this),AppCenter.uploadActivityLog("1010100","close","","","",this.from),AppCenter.uploadActivityLog("1020016","close","page"),this.removeEventListener(egret.Event.COMPLETE,this.init,this),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.SHOW_BIG_AD_VIEW_EVENT)),GuideTip.instance().close(),this._data=null,this.titleTxt=null,this.descTxt=null,this.pinyinLbl=null},e}(BaseEuiView);__reflect(ExplainView.prototype,"ExplainView");var FirstAddNewView=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/FirstAddNewViewSkin.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.cacheAsBitmap=!0,this.confirmBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1040026","close","page"),this.close()},e.prototype.open=function(){t.prototype.open.call(this),AppCenter.hidePassGameView(),AppCenter.uploadActivityLog("1040026","show","page")},e.prototype.close=function(){t.prototype.close.call(this),this.confirmBtn&&this.confirmBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),EventCenter.instance().dispatchEvent(new GuessEvent(GuessEvent.SHOW_GUESS_BIG_AD_EVENT)),this.confirmBtn=null,this.destroy()},e}(BaseEuiView);__reflect(FirstAddNewView.prototype,"FirstAddNewView");var GetCardView=function(t){function e(){var e=t.call(this)||this;return e.intervaIdx=0,e._type=0,e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=SpriteUtil.createImage("redeff_json#lightbox");t.x=SpriteUtil.stageCenterX,t.y=SpriteUtil.stageCenterY-100,this.addChild(t),this.effectImg=t,egret.Tween.get(t,{loop:!0}).to({rotation:360},4e3);var e=SpriteUtil.createText("恭喜获得福鼠一只",42,16772298,"center",!0);e.x=SpriteUtil.stageCenterX-e.width/2,e.y=344,this.addChild(e);var i=SpriteUtil.createImage("viewpage_json#cardbg");i.x=SpriteUtil.stageCenterX,i.y=SpriteUtil.stageCenterY-100,this.addChild(i);var n=SpriteUtil.createImage("viewpage_json#cardbtn");n.x=SpriteUtil.stageCenterX,n.y=i.y+i.height/2+77+n.height/2,this.addChild(n),n.name="getcardbtn";var a=SpriteUtil.createText("领取瓜分100亿",36,16774885,"center",!0);a.x=n.x-n.width/2,a.y=n.y-15,a.width=n.width,this.addChild(a);var s=SpriteUtil.createText("放弃领取",28,16774885,"center",!0);s.x=n.x-n.width/2,s.y=n.y+n.height/2+56,s.width=n.width,this.addChild(s),s.touchEnabled=!0,s.name="giveupbtn",this.cacheAsBitmap=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){var e=t.target.name;"getcardbtn"==e?(0==this._type?(AppCenter.uploadActivityLog("1080011","click","page"),AppCenter.openPage("h5",GameData.H5_URL_HOST+"mousecard.html?tianzi_15=tianzi_15",!1,!1,!1)):(AppCenter.uploadActivityLog("1080012","click","page"),AppCenter.openPage("h5",GameData.H5_URL_HOST+"mousecard.html?caichengyu_10=caichengyu_10",!1,!1,!1)),this.close()):"giveupbtn"==e&&this.close()},e.prototype.playStarEff=function(){var t=this,e=this.effectImg.x,i=this.effectImg.y,n=this.effectImg.width/1.5-e,a=this.effectImg.y+this.effectImg.width/1.5;egret.clearInterval(this.intervaIdx),this.intervaIdx=egret.setInterval(function(){var s=t.getPools(),r=2*Math.PI*Math.random(),o=(n-e)*Math.cos(r)-(a-i)*Math.sin(r)+e,l=(a-i)*Math.cos(r)+(n-e)*Math.sin(r)+i;egret.Tween.get(s).to({x:o,y:l,alpha:0},1e3).call(function(){egret.Tween.removeTweens(s),s.parent&&s.parent.removeChild(s),s.alpha=1})},this,100)},e.prototype.getPools=function(){if(this.starPools||(this.starPools=[]),this.starPools.length>0)for(var t=0,e=this.starPools;t<e.length;t++){var i=e[t];if(!i.parent)return i.x=this.effectImg.x,i.y=this.effectImg.y,this.addChildAt(i,1),i}var n=new eui.Image("guessgame_json.star");return n.x=this.effectImg.x,n.y=this.effectImg.y,this.addChildAt(n,1),this.starPools.push(n),n},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this),this._type=e,0==e?AppCenter.uploadActivityLog("1080011","show","page"):AppCenter.uploadActivityLog("1080012","show","page"),this.effectImg.rotation=0,egret.Tween.get(this.effectImg,{loop:!0}).to({rotation:360},4e3),this.playStarEff()},e.prototype.close=function(){t.prototype.close.call(this),this.effectImg&&egret.Tween.removeTweens(this.effectImg),egret.clearInterval(this.intervaIdx),0==this._type?AppCenter.uploadActivityLog("1080011","close","page"):AppCenter.uploadActivityLog("1080012","close","page")},e}(BaseView);__reflect(GetCardView.prototype,"GetCardView");var GetedPuzzle=function(t){function e(){var e=t.call(this)||this;return e.isFirst=!1,e.skinName="getedPuzzle",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.isEnableBg=!1},e.prototype.childrenCreated=function(){this.receiveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},e.prototype.open=function(){var e=this;t.prototype.open.call(this),this.unownSp&&(this.unownSp.visible=!1),this.ownSp&&(this.ownSp.visible=!1),this.tips.text="",this.isFirst=!1,this.firstCoinImg.visible=!1,HttpServer.getPuzzlePiece().then(function(t){var i=t.first_pintu_status;console.log("是否是首张拼图:",i),e.isFirst=i,e.btnNameLbl.text="收下",t.bonus?(e.firstCoinImg.visible=!1,e.currentState="getOwned",e.ownSp.visible=!0,e.coin2Txt.text=t.bonus+"金币",e.puzzle2Img.source="puzzle_json.puzzle_"+t.pintu_id,e.puzzle2Txt.text="拼图"+t.pintu_id,GameModel.instance().updateCoinNum(t.bonus),AppCenter.uploadActivityLog("1080071","show","page","","repeat_puzzle")):(e.currentState="getUnown",e.unownSp.visible=!0,e.puzzleImg.source="puzzle_json.puzzle_"+t.pintu_id,e.puzzleTxt.text="拼图"+t.pintu_id,AppCenter.uploadActivityLog("1080071","show","page","","random_puzzle"),t.left_chance<=0?e.tips.text="今日拼图已达上限":t.level_x&&(e.tips.textFlow=StringUtil.getTextFlow([{text:"再玩"},{text:t.level_x+"关",textColor:15220537,bold:!0},{text:"可得一张新拼图"}])),e.firstCoinImg.visible=!0,i?(e.btnNameLbl.text="去兑换",e.tips.textFlow=[{text:"首张",style:{textColor:15220537}},{text:"拼图可直接兑换金币"}]):(e.tips.textFlow=[{text:"集"},{text:"4",style:{textColor:15220537}},{text:"张拼图也可兑换金币"}],e.btnNameLbl.text="收下")),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.RESET_PUZZLE_ITEM))},function(i){t.prototype.close.call(e),e.receiveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.close,e)})},e.prototype.close=function(){if(t.prototype.close.call(this),this.receiveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.isFirst)return AppCenter.openPage("h5",GameData.H5_URL_HOST+"sendphone.html",!1,!1,!1),void AppCenter.uploadActivityLog("1080071","click","page","","first_puzzle");if(AppCenter.uploadActivityLog("1080071","click","page","","get_puzzle"),"getUnown"==this.currentState){var e=this.puzzleImg.parent.localToGlobal(this.puzzleImg.x,this.puzzleImg.y);EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.FLY_PUZZLE,{url:this.puzzleImg.source,point:e})),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.ADD_PUZZLE)),AppCenter.uploadActivityLog("1080071","close","page","","random_puzzle"),AppCenter.uploadActivityLog("1080071","click","page","","random_puzzle")}else AppCenter.uploadActivityLog("1080071","close","page","","repeat_puzzle"),AppCenter.uploadActivityLog("1080071","click","page","","repeat_puzzle")},e}(BaseEuiView);__reflect(GetedPuzzle.prototype,"GetedPuzzle");var GodBeastView=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/BeastViewSkin.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.goldTxt.fontFamily="xnumberBold",this.treeCoinTxt.fontFamily="xnumberBold",this.giveTxt.fontFamily="xnumberMedium",this.doubleTxt.fontFamily="xnumberMedium",this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.commonBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){GameSound.instance().playSound("btn"),"status_get"==this.currentState?(HttpServer.getGodBeastInfo().then(function(){var t=GameModel.instance().godBeastData;if(t&&t.my_spirit&&t.my_spirit.spirit_num){var e=parseInt(t.my_spirit.spirit_num);e+=1,t.my_spirit.spirit_num=e}}),AppCenter.uploadActivityLog("1080025","click","page")):"status_try"==this.currentState?(HttpServer.getGodBeastInfo(1).then(function(t){GameModel.instance().godBeastData.tmp_info=t.tmp_info}),AppCenter.uploadActivityLog("1080026","click","page")):"status_result"==this.currentState?(AppCenter.openPage("h5",GameData.H5_URL_HOST+"fenhong.html",!1,!1,!1),AppCenter.uploadActivityLog("1080027","click","page")):"status_share"==this.currentState?(GameModel.instance().getAccountInfo().then(function(t){0==t.mIntCurPlatform?AppCenter.openPage("bindPhone",""):AppCenter.inviteFriend("108")}),AppCenter.uploadActivityLog("1020044","click","page"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.SHOW_BIG_AD_VIEW_EVENT))):"status_tree"==this.currentState?(AppCenter.uploadActivityLog("1010058","click","page"),AppCenter.inviteFriend("110")):"status_pay"==this.currentState&&(AppCenter.uploadActivityLog("1010060","click","page"),AppCenter.openPage("h5",GameData.H5_URL_HOST+"invitefenhong.html?f=112&qid=ccyyaoqing1",!1,!1,!1)),this.close()},e.prototype.refresh=function(t){var e=this,i=this._data;if(0==t)this.currentState="status_get",this.validateNow(),egret.Tween.get(this.effImage,{loop:!0}).to({rotation:360},5e3),this.titleTxt.textFlow=[{text:"恭喜获得"},{text:"分红神兽",style:{textColor:16736312}}],AppCenter.uploadActivityLog("1080025","show","page");else if(1==t)this.currentState="status_try",this.validateNow(),egret.Tween.get(this.effImage,{loop:!0}).to({rotation:360},5e3),this.titleTxt.textFlow=[{text:"恭喜获得"},{text:"分红神兽",style:{textColor:16736312}},{text:"限时体验\n期间产生的收益真实到账"}],AppCenter.uploadActivityLog("1080026","show","page");else if(2==t)this.currentState="status_result",this.validateNow(),this.y=SpriteUtil.stageCenterY-200,this.goldTxt.textFlow=[{text:(i.gold/1e4).toFixed(2)},{text:"元",style:{size:36}}],this.showCoinEff(!0),AppCenter.uploadActivityLog("1080027","show","page");else if(3==t)this.currentState="status_share",this.validateNow(),this.shareTxt.textFlow=[{text:"恭喜获得"},{text:i.gold+"金币",style:{textColor:16736312}}],this.distanceTxt.text="",HttpServer.getGodBeastProgressInfo().then(function(t){e.distanceTxt.textFlow=[{text:"您距离合成分红神兽还差"},{text:100-parseFloat(t.collect.progress)+"%",style:{textColor:5354281}}]}),AppCenter.uploadActivityLog("1020044","show","page");else if(4==t)this.currentState="status_tree",this.validateNow(),this.doubleTxt.textFlow=[{text:"恭喜获得"},{text:i.times+"倍",style:{textColor:16736312}},{text:"奖励"}],this.treeCoinTxt.text="+"+i.gold,this.giveTxt.textFlow=[{text:"本次额外"},{text:"向师傅进贡",style:{textColor:4242192}},{text:"了200金币"}],AppCenter.uploadActivityLog("1010058","show","page");else if(5==t){this.currentState="status_pay",this.validateNow(),this.treeCoinTxt.text="+"+i.gold,this.giveTxt.textFlow=[{text:"邀请过来的好友，每天都可以给\n你进贡10次，也就是"},{text:"2000金币！",style:{textColor:16736312}}],egret.Tween.get(this.effImage,{loop:!0}).to({rotation:360},5e3);var n=this.thousandImg0.y;this.playEffect(this.thousandImg0,n),this.showCoinEff(),AppCenter.uploadActivityLog("1010060","show","page")}},e.prototype.open=function(e,i){void 0===e&&(e=0),void 0===i&&(i=null),t.prototype.open.call(this),this.effImage&&(egret.Tween.removeTweens(this.effImage),this.effImage.rotation=0),this._data=i,this.refresh(e)},e.prototype.showCoinEff=function(t){void 0===t&&(t=!1);var e=GameUtil.getBackEffect();e.x=SpriteUtil.stageCenterX,e.y=t?SpriteUtil.stageCenterY-this.height/3:SpriteUtil.stageCenterY-this.height/2-60,this.addChildAt(e,0);var i=GameUtil.getFrontEffect();i.x=SpriteUtil.stageCenterX,i.y=SpriteUtil.stageCenterY-this.height/2-60,this.addChild(i)},e.prototype.playEffect=function(t,e){var i=this;t&&(t=t==this.thousandImg0?this.thousandImg1:this.thousandImg0,t.y=e,t.alpha=0,egret.Tween.get(t).to({alpha:1,y:e-60},800).call(function(){egret.Tween.get(t).to({alpha:0,y:e-120},800),i.playEffect(t,e)}))},e.prototype.close=function(){t.prototype.close.call(this),GameUtil.removeCoinBFEffect(),this.effImage&&egret.Tween.removeTweens(this.effImage),this.commonBtn&&this.commonBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.destroy(),"status_result"==this.currentState?AppCenter.uploadActivityLog("1080027","close","page"):"status_share"==this.currentState?(AppCenter.uploadActivityLog("1020044","close","page"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.SHOW_BIG_AD_VIEW_EVENT))):"status_tree"==this.currentState?(AppCenter.uploadActivityLog("1010058","close","page"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.SHOW_BIG_AD_VIEW_EVENT))):"status_pay"==this.currentState&&(AppCenter.uploadActivityLog("1010060","close","page"),this.thousandImg0&&(egret.Tween.removeTweens(this.thousandImg0),this.thousandImg0=null),this.thousandImg1&&(egret.Tween.removeTweens(this.thousandImg1),this.thousandImg1=null))},e}(BaseEuiView);__reflect(GodBeastView.prototype,"GodBeastView");var GuessRewardView=function(t){function e(){var e=t.call(this)||this;return e.intervaIdx=-1,e.isget=!1,e.skinName="resource/game_skins/GuessRewardViewSkin.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.titleImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.getDbBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.getLowBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.effectImg.rotation=0,this.finCoinTxt.fontFamily="xnumberBold",this.videoTxt.fontFamily="xnumberBold",this.coinTxt.fontFamily="xnumberBold",egret.Tween.get(this.effectImg,{loop:!0}).to({rotation:360},4e3),this.refreshTxt(),this.playStarEff()},e.prototype.touchHandler=function(t){var e=this;if(GameSound.instance().playSound("btn"),!this.isget){this.isget=!0;var i=GuessModel.instance().completeData,n=i.gold;t.target==this.getDbBtn||t.target==this.titleImg?(AppCenter.uploadActivityLog("1020030","click","page"),AppCenter.showVideoAd("rewardvideoktjl").then(function(){e.finCoinTxt.text="+"+n.gold_video,GuessModel.instance().getGuessRewardData(1).then(function(){e.close()})})["catch"](function(){e.isget=!1})):t.target==this.getLowBtn&&(this.finCoinTxt.text="+"+n.gold,GuessModel.instance().getGuessRewardData().then(function(){e.close()})["catch"](function(){e.isget=!1}),AppCenter.uploadActivityLog("1020030","close","page"))}},e.prototype.playStarEff=function(){var t=this;if(this.isCreated){var e=this.effectImg.x,i=this.effectImg.y,n=e+this.effectImg.width,a=i;egret.clearInterval(this.intervaIdx),this.intervaIdx=egret.setInterval(function(){var s=t.getPools(),r=2*Math.PI*Math.random(),o=(n-e)*Math.cos(r)-(a-i)*Math.sin(r)+e,l=(a-i)*Math.cos(r)+(n-e)*Math.sin(r)+i,h=.5+10*Math.random();s.alpha=.01,egret.Tween.get(s).to({scaleX:h,scaleY:h,alpha:1},300).to({x:o,y:l,scaleX:.01,scaleY:.01,alpha:0},1e3).call(function(){egret.Tween.removeTweens(s),s.parent&&s.parent.removeChild(s),s.alpha=1})},this,50),egret.Tween.removeTweens(this.titleImg),this.titleImg.scaleX=.01,this.titleImg.scaleY=.01,egret.Tween.get(this.titleImg).to({scaleX:1,scaleY:1},300).call(function(){egret.Tween.removeTweens(t.titleImg)})}},e.prototype.getPools=function(){if(this.starPools||(this.starPools=[]),this.starPools.length>0)for(var t=0,e=this.starPools;t<e.length;t++){var i=e[t];if(!i.parent)return i.x=this.effectImg.x,i.y=this.effectImg.y,this.viewGrp.addChildAt(i,1),i}var n=new eui.Image("guessgame_json.star");return n.anchorOffsetX=20,n.anchorOffsetY=20,n.x=this.effectImg.x,n.y=this.effectImg.y,this.viewGrp.addChildAt(n,1),this.starPools.push(n),n},e.prototype.refreshTxt=function(){if(this.isCreated){var t=GuessModel.instance().completeData,e=t.gold;this.videoTxt.text="领取"+e.gold_video+"金币奖励",this.coinTxt.text="领取"+e.gold+"金币",this.finCoinTxt.text=""}},e.prototype.open=function(){t.prototype.open.call(this),this.isget=!1,AppCenter.uploadActivityLog("1020030","show","page"),this.isCreated&&(this.refreshTxt(),this.effectImg.rotation=0,egret.Tween.get(this.effectImg,{loop:!0}).to({rotation:360},4e3),this.playStarEff())},e.prototype.close=function(){t.prototype.close.call(this),this.effectImg&&egret.Tween.removeTweens(this.effectImg),egret.clearInterval(this.intervaIdx),this.isget=!1,EventCenter.instance().dispatchEvent(new GuessEvent(GuessEvent.SHOW_GUESS_BIG_AD_EVENT))},e}(BaseEuiView);__reflect(GuessRewardView.prototype,"GuessRewardView");var GuessSingleRewardView=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/GuessSingleRewardViewSkin.exml",e}return __extends(e,t),e.prototype.init=function(){this.x=SpriteUtil.stageCenterX-this.width/2,this.y=SpriteUtil.stageCenterY-this.height/2-100,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this);var t=GuessModel.instance().completeData,e=t.gold;this.coinTxt.text=e.gold,this.coinTxt.fontFamily="xnumberBold",this.cacheAsBitmap=!0,egret.Tween.get(this.effImg,{loop:!0}).to({rotation:360},3e3),this.showCoinEff()},e.prototype.showCoinEff=function(){var t=GameUtil.getBackEffect();t.x=SpriteUtil.stageCenterX,t.y=SpriteUtil.stageCenterY-this.height/2-60,this.addChildAt(t,0);var e=GameUtil.getFrontEffect();e.x=SpriteUtil.stageCenterX,e.y=SpriteUtil.stageCenterY-this.height/2-60,this.addChild(e)},e.prototype.touchHandler=function(t){var e=this;t.target==this.getBtn&&GuessModel.instance().getGuessRewardData().then(function(){e.close()})},e.prototype.open=function(){t.prototype.open.call(this),AppCenter.hidePassGameView()},e.prototype.close=function(){t.prototype.close.call(this),GameUtil.removeCoinBFEffect(),this.effImg&&egret.Tween.removeTweens(this.effImg),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),EventCenter.instance().dispatchEvent(new GuessEvent(GuessEvent.SHOW_GUESS_BIG_AD_EVENT)),this.destroy(),this.coinTxt=null,this.getBtn=null},e}(BaseEuiView);__reflect(GuessSingleRewardView.prototype,"GuessSingleRewardView");var InvitePromotionView=function(t){function e(){var e=t.call(this)||this;return e.activityid="1010084",e.isDone=!1,e.state_no_coins="no_coins",e.state_has_coins="has_coins",e.skinName="resource/game_skins/InvitePromotionSkin.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.currentState="system_msg_status"},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.coinNumLabel.fontFamily="xnumberMedium",this.coinNumLabel.text="+25000",this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){t.target==this.btnImg?(GameSound.instance().playSound("btn"),this.currentState==this.state_has_coins?(AppCenter.openPage("h5",GameData.H5_URL_HOST+"withdraw.html",!0,!1,!0),AppCenter.nativeCache(ConstUtil.CACHE_INVITE_PROMOTION_DONE,"1","true"),this.isDone=!0,AppCenter.uploadActivityLog(this.activityid,"click","page","","2")):(AppCenter.inviteFriend("115"),AppCenter.uploadActivityLog(this.activityid,"click","page","","1")),this.close()):t.target==this.closeBtn&&(GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog(this.activityid,"close","page","",this.currentState==this.state_has_coins?"2":"1"),this.close())},e.prototype.open=function(e){t.prototype.open.call(this),this.currentState=e.tixian_tanchuang>0?this.state_has_coins:this.state_no_coins,AppCenter.uploadActivityLog(this.activityid,"show","page","",this.currentState==this.state_has_coins?"2":"1")},e.prototype.close=function(){var t=this;this.blackBg&&this.blackBg.parent&&this.blackBg.parent.removeChild(this.blackBg);var e=egret.Tween.get(this);e.wait(100),e.to({x:5,y:200,scaleX:.01,scaleY:.01},450,egret.Ease.backInOut).call(function(){egret.Tween.removeTweens(t),t._isOpened=!1,t.parent&&(t.parent.removeChild(t),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHandler,t),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.SHOW_HUNDRED,{visible:!0,isDone:!1})))}).play()},e}(BaseEuiView);__reflect(InvitePromotionView.prototype,"InvitePromotionView");var JudgeDialogView=function(t){function e(){var e=t.call(this)||this;return e.isTwice=!1,e.type=0,e.isEnableBg=!1,e.skinName="resource/game_skins/JudgeDialogSkin.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.cacheAsBitmap=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){var i=this;if(t.target==this.btnContinue)AppCenter.uploadActivityLog("1020039","click","page"),GameSound.instance().playSound("btn"),AppCenter.showVideoAd("rewardvideoxpg").then(function(){i.close(),EventCenter.instance().dispatchEvent(new JudgeEvent(JudgeEvent.CONTINUE_JUDGE_GAME))});else if(t.target==this.notExitBtn)AppCenter.uploadActivityLog("1020040","click","page"),GameSound.instance().playSound("btn"),this.close(),this.isTwice||EventCenter.instance().dispatchEvent(new JudgeEvent(JudgeEvent.BACK_TO_JUDGE_GAME));else if(t.target==this.exitBtn)AppCenter.uploadActivityLog("1020040","click","page"),GameSound.instance().playSound("btn"),this.close(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME})),GameView.instance().showJudgeStartView();else if(t.target==this.btnGetCard)AppCenter.uploadActivityLog("1020042","click","page"),GameSound.instance().playSound("btn"),this.close(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME}));else if(t.target==this.btnGetCoin)AppCenter.uploadActivityLog("1020041","click","page"),GameSound.instance().playSound("btn"),this.close(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME})),GameView.instance().showJudgeStartView();else if(t.target==this.closeBtn){if(GameSound.instance().playSound("btn"),"status_fail"==this.currentState){var n=new e;return n.open(!0),void n.setInfo(1)}this.close(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_HOME}))}},e.prototype.setInfo=function(t,e){if(void 0===e&&(e=null),this.type=t,this.data=e,this.isCreated)if(this.effImg&&egret.Tween.removeTweens(this.effImg),this.coinEffImg&&egret.Tween.removeTweens(this.coinEffImg),0==this.type){this.currentState="status_fail",this.validateNow();var i=JudgeModel.instance().getCurrentIdiom();this.idxTxt1.text=i.idiom.charAt(0),this.idxTxt2.text=i.idiom.charAt(1),this.idxTxt3.text=i.idiom.charAt(2),this.idxTxt4.text=i.idiom.charAt(3),this.explainTxt.text=i.idiom_explain,AppCenter.uploadActivityLog("1020039","show","page")}else 1==this.type?(this.currentState="status_confirm",this.validateNow(),AppCenter.uploadActivityLog("1020040","show","page")):2==this.type?(this.currentState="status_card",this.validateNow(),this.titleTxt.text="恭喜获得“"+e.card.name+"”卡",this.cardNameTxt.text=""+e.card.name,AppCenter.uploadActivityLog("1020042","show","page"),this.cardImg.source="judgegame_json.notget",this.cardImg.source=""+ConstUtil.PATH_CARDS+e.card_type+"_"+e.card.idx+".png",egret.Tween.get(this.effImg,{loop:!0}).to({rotation:360},5e3)):3==this.type&&(this.currentState="status_coin",this.validateNow(),this.jcoinTxt.text="恭喜获得"+e.gold+"金币",egret.Tween.get(this.coinEffImg,{loop:!0}).to({rotation:360},5e3),AppCenter.uploadActivityLog("1020041","show","page"))},e.prototype.close=function(){t.prototype.close.call(this),0==this.type?AppCenter.uploadActivityLog("1020039","close","page"):1==this.type?AppCenter.uploadActivityLog("1020040","close","page"):2==this.type?AppCenter.uploadActivityLog("1020042","close","page"):3==this.type&&AppCenter.uploadActivityLog("1020041","close","page"),this.isTwice&&(this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.data=null,this.destroy())},e.prototype.open=function(e){void 0===e&&(e=!1),this.isTwice=e,t.prototype.open.call(this)},e}(BaseEuiView);__reflect(JudgeDialogView.prototype,"JudgeDialogView");var JudgeStartView=function(t){function e(){var e=t.call(this)||this;return e.isStart=!1,e.skinName="resource/game_skins/JudgeStartViewSkin.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.cacheAsBitmap=!0,this.refresh(),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this)},e.prototype.touchHandler=function(t){var e=this,i=!1;if(!this.isStart){if(t.target==this.startBtn){var n=GameModel.instance().userData.challenge.judge_left_chance;if(AppCenter.uploadActivityLog("1020035","click","page"),0>=n)return void AppCenter.showToast("当日挑战机会已用完，明日再战~");this.isStart=!0,JudgeModel.instance().getJudgeData().then(function(){e.isStart=!1,EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.GOTO_SCENE_EVENT,{type:ConstUtil.SCENE_JUDGE_IDIOM}))
})["catch"](function(){e.isStart=!1}),i=!0}else t.target==this.myCardImg?(GameSound.instance().playSound("btn"),AppCenter.uploadActivityLog("1020036","click","page"),JudgeModel.instance().getCardConfData().then(function(){GameView.instance().showCardView()}),i=!1):t.target==this.closeBtn&&(i=!0);i&&(GameSound.instance().playSound("btn"),this.close())}},e.prototype.refresh=function(){if(this.isCreated){var t=GameModel.instance().userData,e=t.challenge.judge_left_chance;this.startLabel.textFlow=[{text:"今日还有"},{text:e+"次",style:{textColor:15414550}},{text:"挑战机会"}],0>=e?this.startBtn.filters=GameUtil.getGrayFilter():this.startBtn.filters=null}},e.prototype.open=function(){t.prototype.open.call(this),this.refresh(),AppCenter.uploadActivityLog("1020035","show","page")},e.prototype.close=function(){t.prototype.close.call(this),AppCenter.uploadActivityLog("1020035","close","page")},e}(BaseEuiView);__reflect(JudgeStartView.prototype,"JudgeStartView");var LifeExplainView=function(t){function e(){var e=t.call(this)||this;return e.type=0,e.skinName="resource/game_skins/LifeExplainView.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.cacheAsBitmap=!0,this.btnConfirm.touchEnabled=!0,this.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmHandler,this)},e.prototype.confirmHandler=function(){GameSound.instance().playSound("btn"),0==this.type?AppCenter.uploadActivityLog("1010024","click","page"):1==this.type&&AppCenter.uploadActivityLog("1010053","click","page"),this.close()},e.prototype.open=function(e){void 0===e&&(e=0),t.prototype.open.call(this),this.type=e,0==e?(this.currentState="life_status",AppCenter.uploadActivityLog("1010024","show","page")):1==e&&(this.currentState="exp_status",AppCenter.uploadActivityLog("1010053","show","page")),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.SHOW_BIG_AD_VIEW_EVENT))},e.prototype.close=function(){t.prototype.close.call(this),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.SHOW_BIG_AD_VIEW_EVENT))},e}(BaseEuiView);__reflect(LifeExplainView.prototype,"LifeExplainView");var MailView=function(t){function e(){var e=t.call(this)||this;return e.curTabIndex=0,e.curNGTabIndex=0,e.sysMsgActivityid="1010062",e.selfMsgActivityid="1010063",e.subSysMsgActivityid="1010064",e.noticeMsgItemActivityid="1010077",e.noticeMsgDetailActivityid="1010078",e.activityMsgItemActivityid="1010079",e.activityMsgDetailActivityid="1010080",e.updateMsgItemActivityid="1010081",e.updateMsgDetailActivityid="1010082",e.skinName="resource/game_skins/MailViewSkin.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.currentState="system_msg_status",this.mainGrp.cacheAsBitmap=!0,this.mainGrp.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.sysMsgTabs=[this.noticeGrp,this.activityGrp,this.updateGrp],this.detailGrp.visible=!1,this.detailScroller.verticalScrollBar.visible=!1,this.detailScroller.verticalScrollBar.autoVisibility=!1,this.unreadRect1.visible=this.unreadRect2.visible=!1,this.unreadLabel1.text=this.unreadLabel2.text="",this.noticeRedpointImg.visible=this.activityRedpointImg.visible=this.updateRedpointImg.visible=!1,this.createPopupBG(),this.createItems(),this.tabSelect(1),this.tabGNSelect(1),this.addListeners()},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.scroller.verticalScrollBar.visible=!1,this.scroller.verticalScrollBar.autoVisibility=!1,this.refreshList()},e.prototype.createPopupBG=function(){this.detailBg=SpriteUtil.createRect(),this.detailBg.alpha=.7,this.detailBg.anchorOffsetX=SpriteUtil.stageCenterX,this.detailBg.anchorOffsetY=SpriteUtil.stageCenterY,this.detailBg.touchEnabled=!0,this.isEnableBg&&this.detailBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeDetail,this)},e.prototype.createItems=function(){this.mailList=new eui.List,this.mailList.itemRenderer=MailItemRenderer,this.scroller.viewport=this.mailList},e.prototype.touchHandler=function(t){if(t.target==this.tabRect1)GameSound.instance().playSound("btn"),this.tabSelect(1),AppCenter.uploadActivityLog(this.sysMsgActivityid,"show","page");else if(t.target==this.tabRect2)GameSound.instance().playSound("btn"),this.tabSelect(2),AppCenter.uploadActivityLog(this.selfMsgActivityid,"show","page");else if(t.target==this.noticeGrp)GameSound.instance().playSound("btn"),this.tabGNSelect(1),AppCenter.uploadActivityLog(this.subSysMsgActivityid,"click","page","","1");else if(t.target==this.activityGrp)GameSound.instance().playSound("btn"),this.tabGNSelect(2),AppCenter.uploadActivityLog(this.subSysMsgActivityid,"click","page","","2");else if(t.target==this.updateGrp)GameSound.instance().playSound("btn"),this.tabGNSelect(3),AppCenter.uploadActivityLog(this.subSysMsgActivityid,"click","page","","3");else if(t.target==this.readGrp)GameSound.instance().playSound("btn"),this.markAsRead(null,!0),AppCenter.uploadActivityLog(1==this.curTabIndex?this.sysMsgActivityid:this.selfMsgActivityid,"click","page","","1");else if(t.target==this.selectAllGrp)GameSound.instance().playSound("btn"),this.selectAll(),AppCenter.uploadActivityLog(1==this.curTabIndex?this.sysMsgActivityid:this.selfMsgActivityid,"click","page","","2");else if(t.target==this.deleteGrp)GameSound.instance().playSound("btn"),this.deleteMails(),AppCenter.uploadActivityLog(1==this.curTabIndex?this.sysMsgActivityid:this.selfMsgActivityid,"click","page","","3");else if(t.target==this.closeBtn)GameSound.instance().playSound("btn"),this.close();else if(t.target==this.confirmGrp||t.target==this.closeDetailBtn){GameSound.instance().playSound("btn"),this.closeDetail(),t.target==this.confirmGrp&&2==this.toGoUrl&&AppCenter.openPage("h5",this.detailUrl,!1,!1,!1);var e=t.target==this.confirmGrp?"click":"close",i="";switch(this.curDetailType){case"2":i=this.noticeMsgDetailActivityid;break;case"3":i=this.activityMsgDetailActivityid;break;case"4":i=this.updateMsgDetailActivityid}""!=i&&AppCenter.uploadActivityLog(i,e,"page","",this.curDetailId+"")}},e.prototype.tabSelect=function(t){void 0===t&&(t=1),this.curTabIndex=t,this.currentState=1==this.curTabIndex?"system_msg_status":"private_msg_status",this.tabRect1.fillColor=1==t?15705935:16767363,this.tabRect2.fillColor=2==t?15705935:16767363,this.tabRect1.strokeColor=1==t?15705935:14722640,this.tabRect2.strokeColor=2==t?15705935:14722640,this.tabLabel1.textColor=1==t?16710115:9392135,this.tabLabel2.textColor=2==t?16710115:9392135,this.refreshList(!0),this.mailItemSelected(null)},e.prototype.tabGNSelect=function(t){if(void 0===t&&(t=1),this.curNGTabIndex!=t){this.curNGTabIndex=t;var e=this.sysMsgTabs[this.curNGTabIndex-1];this.curTabBGImg.x=e.x,this.curTabBGImg.y=e.y,this.refreshList(!0),this.mailItemSelected(null)}},e.prototype.addListeners=function(){EventCenter.instance().addEventListener(GameEvent.READ_MAIL_DETAIL_EVENT,this.readMailDetail,this),EventCenter.instance().addEventListener(GameEvent.SELECT_MAIL_ITEM_EVENT,this.mailItemSelected,this)},e.prototype.selectAll=function(){for(var t=this.mailList.dataProvider.length,e=!1,i=0;t>i;i++)if(!this.mailList.dataProvider.getItemAt(i).selected){e=!0;break}for(var i=0;t>i;i++)this.mailList.dataProvider.getItemAt(i).selected=e;this.refreshItemRenderers(),this.mailItemSelected(null)},e.prototype.refreshItemRenderers=function(){for(var t=this.mailList.numElements,e=0;t>e;e++){var i=this.mailList.getElementAt(e);i&&i.refresh()}},e.prototype.getSelectedMailIds=function(){for(var t=this.mailList.dataProvider.length,e=[],i=0;t>i;i++){var n=this.mailList.dataProvider.getItemAt(i);1==n.selected&&e.push(n.id)}return e},e.prototype.markAsRead=function(t,e){var i=this;t||(t=this.getSelectedMailIds()),HttpServer.markMailsRead(t).then(function(n){i.doMarkAsRead(t,e),i.refreshList(),i.mailItemSelected(null),i.checkReadStatus()})},e.prototype.doMarkAsRead=function(t,e){if(0!=t.length){for(var i=[this._data[1],this._data[2],this._data[3],this._data[4]],n=i.length,a=0;n>a;a++){var s=i[a];if(s)for(var r=s.length,o=0;r>o;o++){var l=s[o],h=t.indexOf(l.id);if(h>-1&&(l.sta=!0,t.splice(h,1),0==t.length))return void(e&&AppCenter.showToast("已标记"))}}e&&AppCenter.showToast("已标记")}},e.prototype.deleteMails=function(){var t=this,e=this.getSelectedMailIds();HttpServer.deleteMails(e.concat()).then(function(i){t.doDeleteMails(e),t.refreshList(),t.mailItemSelected(null),t.checkReadStatus()})},e.prototype.doDeleteMails=function(t){if(0!=t.length){for(var e=[this._data[1],this._data[2],this._data[3],this._data[4]],i=e.length,n=0;i>n;n++){var a=e[n];if(a)for(var s=a?a.length:0,r=s-1;r>=0;r--){var o=a[r],l=t.indexOf(o.id);if(l>-1&&(a.splice(r,1),t.splice(l,1),0==t.length))return void AppCenter.showToast("已删除")}}AppCenter.showToast("已删除")}},e.prototype.readMailDetail=function(t){var e=t.data;this.markAsRead([e.id],!1),this.popupDetail(e);var i="",n="";switch(e.types){case"2":i=this.noticeMsgItemActivityid,n=this.noticeMsgDetailActivityid;break;case"3":i=this.activityMsgItemActivityid,n=this.activityMsgDetailActivityid;break;case"4":i=this.updateMsgItemActivityid,n=this.updateMsgDetailActivityid}""!=i&&(AppCenter.uploadActivityLog(i,"click","page","",e.id),AppCenter.uploadActivityLog(n,"show","page","",e.id))},e.prototype.mailItemSelected=function(t){var e=!1;if(this.mailList&&this.mailList.dataProvider)for(var i=this.mailList.dataProvider.length,n=0;i>n;n++)if(this.mailList.dataProvider.getItemAt(n).selected){e=!0;break}this.readGrp.touchEnabled=e,this.readGrp.filters=e?null:GameUtil.getGrayFilter(),this.deleteGrp.touchEnabled=e,this.deleteGrp.filters=e?null:GameUtil.getGrayFilter()},e.prototype.refreshList=function(t){if(void 0===t&&(t=!1),this._data){var e,i="";if(1==this.curTabIndex){e=this._data[this.curNGTabIndex+1+""];var n=1==this.curNGTabIndex?this.noticeMsgItemActivityid:2==this.curNGTabIndex?this.activityMsgItemActivityid:this.updateMsgItemActivityid;t&&e&&e.forEach(function(t){AppCenter.uploadActivityLog(n,"show","page","",t.id)}),i="system_msg_status"}else e=this._data[1],i="private_msg_status";var a=e;this.scroller.viewport.scrollV=0,this.mailList.dataProvider=new eui.ArrayCollection(a),this.readGrp.visible=this.selectAllGrp.visible=this.deleteGrp.visible=a&&a.length>0,this.emptyLabel.visible=this.emptyGrp.visible=!this.readGrp.visible}},e.prototype.popupDetail=function(t){var e=this;this.detailBg.x=this.width/2,this.detailBg.y=this.height/2,this.addChildAt(this.detailBg,this.getChildIndex(this.detailGrp)),this.detailGrp.visible=!0,this.titleLabel.text=t.title,this.detailLabel.text=t.content,t.imgs&&t.imgs.length>0?(GameUtil.getBase64ImageByUrl(t.imgs[0]).then(function(t){e.detailImg.texture&&e.detailImg.texture.dispose(),e.detailImg.texture=t})["catch"](function(t){console.log(t)}),this.detailImg.height=300,this.detailScroller.height=490,this.senderLabel.y=750,this.dateLabel.y=800,this.detailGrp.y=-55,this.confirmGrp.y=880,this.detailRect.height=875):(this.detailImg.source="",this.detailImg.height=0,this.detailScroller.height=270,this.senderLabel.y=538,this.dateLabel.y=584,this.detailGrp.y=37,this.confirmGrp.y=650,this.detailRect.height=640),this.detailImg.y=this.detailLabel.y+this.detailLabel.height+20,this.detailImg.validateSize(),this.detailScroller.viewport.scrollV=0,this.senderLabel.text=t.author,this.dateLabel.text=t.crt,t.sta=!0,this.toGoUrl=t.gowhere,this.detailUrl=t.url,this.comfirmLabel.text="1"==t.gowhere?"确定":"跳转",this.curDetailId=t.id,this.curDetailType=t.types,this.refreshItemRenderers()},e.prototype.closeDetail=function(){this.detailBg.parent&&this.detailBg.parent.removeChild(this.detailBg),this.detailGrp.visible=!1},e.prototype.checkReadStatus=function(){for(var t=0,e=0,i=0,n=0,a=0,s=[this._data[1],this._data[2],this._data[3],this._data[4]],r=s.length,o=0;r>o;o++){var l=s[o];if(l)for(var h=l.length,c=0;h>c;c++){var d=l[c];if(!d.sta)switch(d.types){case"1":e++;break;case"2":i++;break;case"3":n++;break;case"4":a++}}}t=i+n+a,this.unreadRect1.visible=this.unreadLabel1.visible=t>0,this.unreadLabel1.text=t>99?"99+":t+"",this.unreadRect2.visible=this.unreadLabel2.visible=e>0,this.unreadLabel2.text=e>99?"99+":e+"",this.noticeRedpointImg.visible=i>0,this.activityRedpointImg.visible=n>0,this.updateRedpointImg.visible=a>0},e.prototype.open=function(){var e=this;t.prototype.open.call(this),this._data=null,HttpServer.getMailData().then(function(t){e._data=t,e.refreshList(!0),e.mailItemSelected(null),e.checkReadStatus()})},e.prototype.close=function(){t.prototype.close.call(this),this.closeDetail(),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MAIL_STATUS_EVENT))},e}(BaseEuiView);__reflect(MailView.prototype,"MailView");var MissionView=function(t){function e(){var e=t.call(this)||this;return e.tabIndex=1,e.skinName="resource/game_skins/MissionViewSkin.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.anchorOffsetY=0,this.x=SpriteUtil.stageCenterX,this.y=SpriteUtil.stageHeight-this.height+40,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.btnTab1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.btnTab2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.readyExpandBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.gotExpandBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.tryExpandBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.createSign(),this.createMission(),this.refresh(),EventCenter.instance().addEventListener(GameEvent.UPDATE_MISSION_LIST_EVENT,this.refreshMission,this),EventCenter.instance().addEventListener(GameEvent.UPDATE_SIGN_VIDEO_EVENT,this.dbSuccess,this),this.openType=2},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.scroller.verticalScrollBar.autoVisibility=!1,this.scroller.verticalScrollBar.visible=!1},e.prototype.createSign=function(){for(var t=[],e=0;7>e;e++){var i=new SignItem;i.x=104*e,this.signGrp.addChild(i),t.push(i)}this.signItems=t,this.signGrp.cacheAsBitmap=!0},e.prototype.createMission=function(){for(var t=[],e=new eui.Group,i=0;10>i;i++){var n=new MissionItem;n.y=160*i,e.addChild(n),t.push(n)}this.missionItems=t,this.container=e,this.scroller.viewport=e,this.oaMissionItem=new MissionItem,this.oaMissionItem.currentState="special",this.overallMissionGrp.addChild(this.oaMissionItem),this.achieveItems=[],this.achieveItemsInUse=[];for(var i=0;20>i;i++){var n=new AchieveItem;this.achieveItems.push(n),this.achieveItemsInUse.push(!1)}},e.prototype.touchHandler=function(t){GameSound.instance().playSound("btn"),t.target==this.btnTab1?(this.tabIndex=1,this.refresh()):t.target==this.btnTab2?(this.tabIndex=2,this.refresh()):t.target==this.gotExpandBtn?"viewpage_json.up_arrow"==this.gotExpandBtn.source?(this.gotExpandBtn.source="viewpage_json.down_arrow",this.gotRect.height=88,this.gotContentGrp.parent.removeChild(this.gotContentGrp)):(this.gotExpandBtn.source="viewpage_json.up_arrow",this.gotRect.height=100+this.gotContentGrp.height,this.gotGrp.addChild(this.gotContentGrp)):t.target==this.tryExpandBtn?"viewpage_json.up_arrow"==this.tryExpandBtn.source?(this.tryExpandBtn.source="viewpage_json.down_arrow",this.tryRect.height=88,this.tryContentGrp.parent.removeChild(this.tryContentGrp)):(this.tryExpandBtn.source="viewpage_json.up_arrow",this.tryRect.height=100+this.tryContentGrp.height,this.tryGrp.addChild(this.tryContentGrp)):t.target==this.readyExpandBtn?"viewpage_json.up_arrow"==this.readyExpandBtn.source?(this.readyExpandBtn.source="viewpage_json.down_arrow",this.readyRect.height=88,this.readyContentGrp.parent.removeChild(this.readyContentGrp)):(this.readyExpandBtn.source="viewpage_json.up_arrow",this.readyRect.height=100+this.readyContentGrp.height,this.readyGrp.addChild(this.readyContentGrp)):t.target==this.closeBtn&&this.close()},e.prototype.dbSuccess=function(t){this._signData&&(this._signData.isGetDouble=!0,this.refreshSign())},e.prototype.refresh=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return 1==this.tabIndex?(this.btnSel1.visible=!0,this.btnSel2.visible=!1,this.btnTab1.visible=!1,this.btnTab2.visible=!0,this.tabLabel1.textColor=16777215,this.tabLabel1.bold=!0,this.tabLabel1.size=40,this.tabLabel2.textColor=11962193,this.tabLabel2.bold=!0,this.tabLabel2.size=36,this.tabLabel1.y=72,this.tabLabel2.y=84,this.currentState="missions"):2==this.tabIndex&&(this.btnSel1.visible=!1,this.btnSel2.visible=!0,this.btnTab1.visible=!0,this.btnTab2.visible=!1,this.tabLabel1.textColor=11962193,this.tabLabel1.bold=!0,this.tabLabel1.size=36,this.tabLabel2.textColor=16777215,this.tabLabel2.bold=!0,this.tabLabel2.size=40,this.tabLabel1.y=84,this.tabLabel2.y=72,this.currentState="achieves"),this.freeAllAchieveItems(),this.refreshSign(),this.refreshMission(),[2]})})},e.prototype.updateRefreshTime=function(){var t=new Date,e=23-t.getHours(),i=59-t.getMinutes(),n=59-t.getSeconds();this.cdTxt.text="距离任务刷新还剩"+(e>9?e:"0"+e)+":"+(i>9?i:"0"+i)+":"+(n>9?n:"0"+n)},e.prototype.updateRefreshIcon=function(){this.refImg.rotation-=3},e.prototype.refreshSign=function(){var t=this;if(this._signData){for(var e=this._signData.config,i=this.signItems.length,n=!1,a=0,s=0;i>s;s++)e[s].index=s+1,e[s].isDb=!0,1==e[s].is_sign?(n=!0,e[s].is_sign=2):2==e[s].is_sign&&(a=s),this.signItems[s].setData(e[s]);e[a].isDb=this._signData.isGetDouble,this.signItems[a].setData(e[a]),n&&HttpServer.getSignNow().then(function(e){GameModel.instance().updateCoinNum(e.bonus),HttpServer.getSignData().then(function(e){t._signData=e,t.refreshSign()}),HttpServer.getSignMulti().then(function(i){AppCenter.showSignAd(e.bonus,i.multi).then(function(){EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MENU_INFO)),AppCenter.showVideoAd("rewardvideoch").then(function(){HttpServer.getSignDoubleNow(i.multi).then(function(e){GameModel.instance().updateCoinNum(e.bonus),AppCenter.showAdDialog("3",e.bonus,GameModel.instance().totalCoin,"bigcheckin"),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.UPDATE_MENU_INFO)),t._signData.isGetDouble=!0,t.refreshSign()})})})})})}},e.prototype.refreshMission=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n,a,s,r,o,l,h,c,d,p,u,g,l,v,m,l,v,p,l,v,_,f,f;return __generator(this,function(E){switch(E.label){case 0:if(!this._missionData)return[2];for(this.container.removeChildren(),t=1==this.tabIndex?this._missionData.dailyTask:this._missionData.gameTask,e=t.length,i=[],n=[],a={},this.noticeRedpointImg.visible=!1,s=0,r=this._missionData.gameTask;s<r.length;s++)if(o=r[s],1==o.status){this.noticeRedpointImg.visible=!0;break}l=e-1,E.label=1;case 1:return l>=0?(h=t[l],1==h.type?(2==h.status||3==h.status)&&(console.log(t[l]),t.splice(l,1)):3==h.type&&(2==h.status||3==h.status?i.unshift(h):1==h.status?n.unshift(h):(c=a[h.pid],c||(c=a[h.pid]=[]),c.unshift(h))),23!=h.id||1==h.status?[3,3]:[4,this.getNotificationMissionStatus(h)]):[3,4];case 2:d=E.sent(),d||t.splice(l,1),E.label=3;case 3:return l--,[3,1];case 4:if(1==this.tabIndex){for(t=this.sortData(t),p=t.length,u=this.missionItems.length,g=0,l=0;p>l;l++)v=void 0,27!=t[l].id?(u>g?v=this.missionItems[g++]:(v=new MissionItem,v.y=160*g++,this.missionItems.push(v)),v.visible=!0,v.setData(t[l]),this.container.addChild(v)):(v=this.oaMissionItem,v.setData(t[l]));this.scroller.viewport.scrollV=0}else{for(this.readyContentGrp.removeChildren(),m=n.length,l=0;m>l;l++)v=this.allocAchieveItem(),v.visible=!0,v.setData(n[l]),this.readyContentGrp.addChild(v);for(this.gotContentGrp.removeChildren(),p=i.length,l=0;p>l;l++)v=this.allocAchieveItem(),v.visible=!0,v.setData(i[l]),this.gotContentGrp.addChild(v);this.tryContentGrp.removeChildren();for(_ in a)this.showAchieveGroup(a[_]);this.aScroller.viewport.scrollV=0,"viewpage_json.down_arrow"==this.readyExpandBtn.source?this.readyRect.height=88:this.readyRect.height=100+this.readyContentGrp.height,"viewpage_json.down_arrow"==this.gotExpandBtn.source?this.gotRect.height=88:this.gotRect.height=100+this.gotContentGrp.height,"viewpage_json.down_arrow"==this.tryExpandBtn.source?this.tryRect.height=88:this.tryRect.height=100+this.tryContentGrp.height,"viewpage_json.up_arrow"==this.readyExpandBtn.source&&0==n.length?(f=new egret.TouchEvent(egret.TouchEvent.TOUCH_TAP),f.$setTarget(this.readyExpandBtn),this.touchHandler(f)):"viewpage_json.down_arrow"==this.readyExpandBtn.source&&n.length>0&&(f=new egret.TouchEvent(egret.TouchEvent.TOUCH_TAP),f.$setTarget(this.readyExpandBtn),this.touchHandler(f))}return[2]}})})},e.prototype.sortData=function(t){for(var e=[],i=[],n=[],a=0,s=t;a<s.length;a++){var r=s[a];1==r.status?e.push(r):0==r.status?i.push(r):n.push(r)}return e.concat(i,n)},e.prototype.showAchieveGroup=function(t){t=this.sortData(t);var e=t.length,i=new eui.Label("   "+this.getAchieveTypeName(t[0].pid));i.size=28,i.textColor=16747576,i.bold=!0,this.tryContentGrp.addChild(i);var n=new eui.Group;n.width=750,this.tryContentGrp.addChild(n);var a=new eui.TileLayout;a.horizontalGap=0,a.verticalGap=20,n.layout=a;for(var s=0;e>s;s++){var r=this.allocAchieveItem();r.visible=!0,r.setData(t[s]),n.addChild(r)}var o=new eui.Label("   ");o.size=28,this.tryContentGrp.addChild(o)},e.prototype.getAchieveTypeName=function(t){switch(t){case 1:return"成语接龙模式";case 2:return"使用提示";case 3:return"看图猜成语模式";case 4:return"成语小判官-卡牌收集成就";case 5:return"成语小判官-挑战次数成就";case 6:return"成语小判官-每日登录连续挑战成就";case 7:return"成语小判官-限时2秒内答题成就";case 8:return"大转盘抽奖成就";case 9:return"摇钱树骰子翻倍成就";case 10:return"匹配对战-参与游戏";case 11:return"匹配对战-使用道具";case 12:return"匹配对战-金币";default:return""}},e.prototype.allocAchieveItem=function(){for(var t=this.achieveItemsInUse.length,e=0;t>e;e++){var i=this.achieveItemsInUse[e];if(!i)return this.achieveItemsInUse[e]=!0,this.achieveItems[e]}var n=new AchieveItem;return this.achieveItems.push(n),this.achieveItemsInUse.push(!0),n},e.prototype.freeAllAchieveItems=function(){for(var t=this.achieveItemsInUse.length,e=0;t>e;e++)this.achieveItemsInUse[e]=!1},e.prototype.freeAchieveItem=function(t){var e=this.achieveItems.indexOf(t);e>-1&&(this.achieveItemsInUse[e]=!1)},e.prototype.getNotificationMissionStatus=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n;return __generator(this,function(a){switch(a.label){case 0:return[4,AppCenter.nativeCache(ConstUtil.NOTIFICATIONS_OPEN_STATUS_CACHE,"2")];case 1:return e=a.sent(),"has_get_status"==e.value?[2,status]:[4,AppCenter.getIsNotificationEnabled()];case 2:return i=a.sent(),n=!1,i.notificationEnable?[3,3]:(AppCenter.nativeCache(ConstUtil.NOTIFICATIONS_OPEN_STATUS_CACHE,"1","show_status"),n=!0,[3,5]);case 3:return"show_status"!=e.value?[3,5]:[4,HttpServer.setMissionNotificationStatus()];case 4:a.sent(),AppCenter.nativeCache(ConstUtil.NOTIFICATIONS_OPEN_STATUS_CACHE,"1","has_get_status"),t.status=1,n=!0,a.label=5;case 5:return[2,n]}})})},e.prototype.open=function(){return __awaiter(this,void 0,void 0,function(){var e,i;return __generator(this,function(n){switch(n.label){case 0:return t.prototype.open.call(this),AppCenter.hidePassGameView(),this.container&&this.container.removeChildren(),this.signGrp&&(this.signGrp.visible=!1),this._signData?[3,2]:(e=this,[4,HttpServer.getSignData()]);case 1:e._signData=n.sent(),n.label=2;case 2:return i=this,[4,HttpServer.getMissionData()];case 3:return i._missionData=n.sent(),this.refresh(),this.signGrp.visible=!0,AppCenter.uploadActivityLog("1010014","show","page"),this.updateRefreshTime(),this.cdIntervalID=egret.setInterval(this.updateRefreshTime,this,1e3),TickerUtil.addLoop(this.updateRefreshIcon,this),[2]}})})},e.prototype.close=function(){AppCenter.uploadActivityLog("1010014","close","page"),t.prototype.close.call(this),egret.clearInterval(this.cdIntervalID),TickerUtil.removeLoop(this.updateRefreshIcon),EventCenter.instance().dispatchEvent(new GameEvent(GameEvent.SHOW_BIG_AD_VIEW_EVENT))},e}(BaseEuiView);__reflect(MissionView.prototype,"MissionView");var PictureView=function(t){function e(){var e=t.call(this)||this;return e.isChange=!1,e.type=0,e.skinName="resource/game_skins/PictureViewSkin.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.group=new eui.Group,this.pScroller.viewport=this.group,this.group.touchEnabled=!0,this.group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.pScroller.verticalScrollBar.autoVisibility=!1,this.pScroller.verticalScrollBar.visible=!1,this.createList(),this.refresh(),this.beastGrp.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSound.instance().playSound("btn"),AppCenter.openPage("h5",GameData.H5_URL_HOST+"fenhong.html",!1,!1,!1),AppCenter.uploadActivityLog("1080028","click","page")},this)},e.prototype.createList=function(){for(var t=[],e=41,i=0;e>i;i++){var n=new PictureItem;n.x=23+188*(i%3),n.y=278*~~(i/3),t.push(n)}this.itemsList=t},e.prototype.touchHandler=function(t){if(this.type!=ConstUtil.TYPE_ID_TREE&&t.target instanceof PictureItem){var e=t.target;if(!e.isHaveOwned())return void AppCenter.showToast("等级尚未解锁，大人请继续努力");if(this.curSelectItem!=e){this.curSelectItem&&(this.curSelectItem.currentState="status_normal");var i=e.data,n=new GameEvent(GameEvent.EXCHANGE_HOME_ITEM_EVENT,{type:this.type,level:i.level});EventCenter.instance().dispatchEvent(n),e.currentState="status_selected",this.curSelectItem=e,this.isChange=!0,this.type==ConstUtil.TYPE_ID_HOUSE?AppCenter.uploadActivityLog("1010033","click","page"):this.type==ConstUtil.TYPE_ID_CAR?AppCenter.uploadActivityLog("1010032","click","page"):this.type==ConstUtil.TYPE_ID_PET?AppCenter.uploadActivityLog("1010031","click","page"):this.type==ConstUtil.TYPE_ID_CHARACTER&&AppCenter.uploadActivityLog("1010049","click","page")}}},e.prototype.resetSelected=function(){for(var t=this.itemsList.length,e=0;t>e;e++){var i=this.itemsList[e];i.currentState="status_normal"}},e.prototype.refresh=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n,a,s,r,o,l,h,c,d,p,u,g,v,m,_,f;return __generator(this,function(E){switch(E.label){case 0:return this.group&&this.group.removeChildren(),this.isCreated?(this.currentState="normal_status",this.resetSelected(),[4,GameModel.instance().getPictureConfig()]):[2];case 1:for(t=E.sent(),e=[],i="",n=0,a=0,s=GameModel.instance().userData.home,r=GameModel.instance().userData.home_unlock,o=GameModel.instance().userData.character,this.type==ConstUtil.TYPE_ID_HOUSE?(i=ConstUtil.PATH_HOUSES+"house_",e=t.house,n=r.house,a=s.house,this.titleImage.source="viewpage_json.titlehouse"):this.type==ConstUtil.TYPE_ID_CAR?(i=ConstUtil.PATH_CARS+"car_",e=t.car,n=r.car,a=s.car,this.titleImage.source="viewpage_json.titlecar"):this.type==ConstUtil.TYPE_ID_PET?(i=ConstUtil.PATH_PETS+"dog_",e=t.pet,n=r.pet,a=s.pet,this.titleImage.source="viewpage_json.titlepet",this.currentState="pets_status",AppCenter.uploadActivityLog("1080028","show","page")):this.type==ConstUtil.TYPE_ID_TREE?(i=ConstUtil.PATH_TREES+"tree_",e=t.tree,n=r.tree,a=s.tree,this.titleImage.source="viewpage_json.titletree"):this.type==ConstUtil.TYPE_ID_CHARACTER&&(i=ConstUtil.PATH_CHARACTERS+"character_",e=t.character,n=o.unlock_level.level,a=o.char_level.level,this.titleImage.source="viewpage_json.titlecharacter"),l=e.length,h=this.itemsList.length,c=0,d=0;l>d;d++)p=void 0,h>d?p=this.itemsList[d]:(p=new PictureItem,p.x=23+188*(d%3),p.y=278*~~(d/3),this.itemsList.push(p)),u=e[d],g=u.unlock_level,v=""+i+g+".png",p.setData({level:g,locklvl:u.level_id,exp:u.exp,gamelvl:n,label:u.label,path:v}),g==a?(this.curSelectItem=p,c=d,p.currentState="status_selected"):p.currentState="status_normal",this.group.addChild(p);return this.curSelectItem?(m=~~(c/3),_=~~(l/3),f=0,f=3>m?0:m>_-3?278*(_-3)+220:278*m,this.pScroller.viewport.scrollV=f):this.pScroller.viewport.scrollV=0,[2]}})})},e.prototype.onClose=function(){GameSound.instance().playSound("btn"),this.close()},e.prototype.open=function(e){t.prototype.open.call(this),this.refresh(),this.type=e,this.isChange=!1,e==ConstUtil.TYPE_ID_HOUSE?AppCenter.uploadActivityLog("1010033","show","page"):e==ConstUtil.TYPE_ID_CAR?AppCenter.uploadActivityLog("1010032","show","page"):e==ConstUtil.TYPE_ID_PET?AppCenter.uploadActivityLog("1010031","show","page"):e==ConstUtil.TYPE_ID_TREE||e==ConstUtil.TYPE_ID_CHARACTER&&AppCenter.uploadActivityLog("1010049","show","page")},e.prototype.close=function(){t.prototype.close.call(this);var e={},i=this.curSelectItem?this.curSelectItem.data:null;if(this.type==ConstUtil.TYPE_ID_HOUSE)i&&(e.house=i.level),AppCenter.uploadActivityLog("1010033","close","page");else if(this.type==ConstUtil.TYPE_ID_CAR)i&&(e.car=i.level),AppCenter.uploadActivityLog("1010032","close","page");else if(this.type==ConstUtil.TYPE_ID_PET)i&&(e.pet=i.level),AppCenter.uploadActivityLog("1010031","close","page");else if(this.type==ConstUtil.TYPE_ID_CHARACTER)return void(i&&this.isChange&&(GameModel.instance().setSelectCharacterNow(i.level),AppCenter.uploadActivityLog("1010049","close","page")));i&&this.isChange&&GameModel.instance().setSelectItemNow(e)},e}(BaseEuiView);__reflect(PictureView.prototype,"PictureView");var RankView=function(t){function e(){var e=t.call(this)||this;return e.curTabIndex=0,e.curNGTabIndex=0,e.skinName="resource/game_skins/RankViewSkin.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.currentState="level_status",this.ownRankItem=new RankItemRenderer,this.ownRankItem.setOwnMode(1),this.ownRankItem.x=this.scroller.x,this.ownRankItem.y=776,this.addChild(this.ownRankItem),this.mainGrp.cacheAsBitmap=!0,this.mainGrp.touchEnabled=!0,this.mainGrp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.createItems(),this.tabSelect(1),this.tabGNSelect(1)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.scroller.verticalScrollBar.visible=!1,this.scroller.verticalScrollBar.autoVisibility=!1},e.prototype.createItems=function(){this.rankList=new eui.List,this.rankList.itemRenderer=RankItemRenderer,this.scroller.viewport=this.rankList},e.prototype.touchHandler=function(t){t.target==this.tabBtn1?(GameSound.instance().playSound("btn"),this.tabSelect(1),AppCenter.uploadActivityLog("1010039","click","page")):t.target==this.tabBtn2?(GameSound.instance().playSound("btn"),this.tabSelect(2),AppCenter.uploadActivityLog("1010040","click","page")):t.target==this.guessGrp?(GameSound.instance().playSound("btn"),this.tabGNSelect(2),AppCenter.uploadActivityLog("1010039","click","page","","2")):t.target==this.normalGrp?(GameSound.instance().playSound("btn"),this.tabGNSelect(1),AppCenter.uploadActivityLog("1010039","click","page","","1")):t.target==this.closeBtn&&(GameSound.instance().playSound("btn"),this.close())},e.prototype.tabSelect=function(t){void 0===t&&(t=1),this.curTabIndex!=t&&(this.curTabIndex=t,this.currentState=1==this.curTabIndex?"level_status":"money_status",this.tabBtn1.source=RES.getRes(1==t?"viewpage_json.rselected":"viewpage_json.rnotselected"),this.tabBtn2.source=RES.getRes(2==t?"viewpage_json.rselected":"viewpage_json.rnotselected"),this.refreshList(),AppCenter.uploadActivityLog(1==this.curTabIndex?"1010039":"1010040","show","page"))},e.prototype.tabGNSelect=function(t){void 0===t&&(t=1),this.curNGTabIndex!=t&&(this.curNGTabIndex=t,this.normalGrp.getChildAt(0).visible=1==this.curNGTabIndex,this.guessGrp.getChildAt(0).visible=2==this.curNGTabIndex,this.refreshList(),AppCenter.uploadActivityLog("1010039","show","page","",t+""))},e.prototype.refreshList=function(){if(this._data){var t,e="";1==this.curTabIndex?(t=1==this.curNGTabIndex?this._data.level_rank:this._data.picture_rank,e="level_status"):(t=this._data.gold_rank,e="coin_status");for(var i=t.list,n=i.length,a=0;n>a;a++)i[a].rank=a+1,i[a].status=e;this.scroller.viewport.scrollV=0,this.rankList.dataProvider=new eui.ArrayCollection(t.list),this.refreshMyInfo(t.my,e)}},e.prototype.refreshMyInfo=function(t,e){var i=this;GameModel.instance().getAccountInfo().then(function(n){var a=n.mAccountMap,s=a&&a[n.mIntCurPlatform];
t.nickname=s.nickname,t.figureurl=GameUtil.getFigureUrl(a),t.status=e,i.ownRankItem.data=t,i.ownRankItem.refresh(),i.ownRankItem.validateNow()})},e.prototype.open=function(){var e=this;t.prototype.open.call(this),HttpServer.getRankData().then(function(t){e._data=t,e.refreshList()})},e.prototype.close=function(){t.prototype.close.call(this),AppCenter.uploadActivityLog(1==this.curTabIndex?"1010039":"1010040","close","page")},e}(BaseEuiView);__reflect(RankView.prototype,"RankView");var RedBagView=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/RedBagViewSkin.exml",e.isEnableBg=!1,e}return __extends(e,t),e.prototype.open=function(i){var n=this;t.prototype.open.call(this,i),e.hundredData&&(this.moneyLbl.text=e.hundredData.user_have_money),this.currentState="open";var a="kaibtn";RES.createGroup(a,["kaibtn_png","kaibtn_json"]),RES.loadGroup(a).then(function(){var t=SpriteUtil.createMovieClip(a,"mc",!0);t.touchEnabled=!0,t.name="openBtn",n.addChild(t),t.x=240,t.y=255,t.play(-1)})},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.onClick=function(t){var i=t.target.name;switch(i){case"openBtn":AppCenter.nativeCache(ConstUtil.CACHE_HUNDRED,"1","1");var n=t.target;n.parent.removeChild(n),this.flip();break;case"closeBtn":AppCenter.nativeCache(ConstUtil.CACHE_HUNDRED,"1","1"),this.close();break;case"acceptBtn":e.canPop=!1,this.fly()}},e.prototype.disappear=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.flip()];case 1:return t.sent(),[4,this.fly()];case 2:return t.sent(),[2]}})})},e.prototype.flip=function(){var t=this,e=egret.Tween.get(this);e.to({scaleX:.1},200).set({currentState:"opened"},this).to({scaleX:1},200).call(function(){t.playLightEff()})},e.prototype.playLightEff=function(){var t=this,e=egret.Tween.get(this.lightImg1);e.to({scaleX:4,scaleY:4},1500).call(function(){t.lightImg1.visible=!1});var i=egret.Tween.get(this.lightImg2);i.wait(500).to({scaleX:4,scaleY:4},1500).call(function(){t.lightImg2.visible=!1})},e.prototype.fly=function(){var t=this,e={x:80,y:200+GameData.ipxHgt},i=egret.Tween.get(this);i.to({x:e.x,y:e.y,scaleX:.2,scaleY:.2},300,egret.Ease.backInOut).call(function(){t.close()})},e.show=function(t){this.instance||(this.instance=new e),this.instance.open(t)},e.hide=function(){this.instance.close()},e.canPop=!0,e}(BaseEuiView);__reflect(RedBagView.prototype,"RedBagView");var ShowImageView=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.image=new egret.Bitmap,this.image.x=SpriteUtil.stageCenterX,this.image.y=SpriteUtil.stageCenterY,this.addChild(this.image),this.txt=SpriteUtil.createText("龙",80,13313568,"center"),this.txt.width=SpriteUtil.stageWidth,this.addChild(this.txt),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},e.prototype.open=function(e,i){var n=this;void 0===e&&(e=""),void 0===i&&(i=""),t.prototype.open.call(this),this.image.visible=!1,this.txt.text=i,GameUtil.getDynamicImage(e).then(function(t){n.image.texture=t,n.image.anchorOffsetX=n.image.width/2,n.image.anchorOffsetY=n.image.height/2;var e=492/n.image.width;n.image.scaleX=e,n.image.scaleY=e,n.image.visible=!0,n.txt.y=n.image.y+220})},e.prototype.close=function(){t.prototype.close.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.destroy(),this.image=null},e}(BaseView);__reflect(ShowImageView.prototype,"ShowImageView");var UpperLimit=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/game_skins/UpperLimit.exml",e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.cacheAsBitmap=!0,this.btnConfirm.touchEnabled=!0,this.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmHandler,this),this.descTxt.text="歇一歇吧，今天已经玩了"+GuessModel.instance().userData.level.limit+"关了，明天再来吧~"},e.prototype.confirmHandler=function(){GameSound.instance().playSound("btn"),this.close()},e.prototype.open=function(){t.prototype.open.call(this),EventCenter.instance().dispatchEvent(new GuessEvent(GuessEvent.SHOW_GUESS_BIG_AD_EVENT)),AppCenter.uploadActivityLog("1020034","show","page")},e.prototype.close=function(){t.prototype.close.call(this),EventCenter.instance().dispatchEvent(new GuessEvent(GuessEvent.SHOW_GUESS_BIG_AD_EVENT)),AppCenter.uploadActivityLog("1020034","click","page")},e}(BaseEuiView);__reflect(UpperLimit.prototype,"UpperLimit");var FriendApplyItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.headImg.mask=this.maskRect},e.prototype.dataChanged=function(){var t=this,e=this.data,i=e.nickname,n=e.invitecode,a=e.figureurl;this.nameLbl.text=i,this.codeLbl.text="邀请码:"+n,GameUtil.getHeadIconByUrl(a).then(function(e){t.headImg.texture&&t.headImg.texture.dispose(),t.headImg.texture=e})},e.prototype.onTouchTap=function(t){var e=t.target.name;"agreeBtn"==e&&this.dispatchEventWith("agreeFriend",!0,this.data),"refuseBtn"==e&&this.dispatchEventWith("refuseFriend",!0,this.data)},e.prototype.$onAddToStage=function(e,i){t.prototype.$onAddToStage.call(this,e,i),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e}(eui.ItemRenderer);__reflect(FriendApplyItem.prototype,"FriendApplyItem");var FriendBattleDetailView=function(t){function e(){var e=t.call(this)||this;return e.skinName=FriendBattleDetailViewSkin,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.headImg.mask=this.maskRect},e.prototype.onTouchTap=function(t){var e=t.target.name;switch(e){case"closeBtn":this.close()}},e.prototype.open=function(e){var i=this;t.prototype.open.call(this,e);var n=e||{},a=n.nickname,s=n.invitecode,r=n.figureurl;this.nameLbl.text=a,this.codeLbl.text="邀请码:"+s,GameUtil.getHeadIconByUrl(r).then(function(t){i.headImg.texture&&i.headImg.texture.dispose(),i.headImg.texture=t}),this.victoryLbl.text=e.win||0,this.failLbl.text=e.lose||0,this.ratioLbl.text=e.win_rate?+e.win_rate+"%":"0%",this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.close=function(){t.prototype.close.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.addToStage=function(){t.prototype.addToStage.call(this),AppCenter.uploadActivityLog("1020084","show","page")},e.prototype.removeFromStage=function(){t.prototype.removeFromStage.call(this),AppCenter.uploadActivityLog("1020084","close","page")},e.show=function(t){this.instance||(this.instance=new e),this.instance.open(t)},e.hide=function(t){void 0===t&&(t=!1),this.instance&&t&&(this.instance.close(),this.instance.destroy())},e}(BaseEuiView);__reflect(FriendBattleDetailView.prototype,"FriendBattleDetailView");var FriendDeleteAlert=function(t){function e(){var e=t.call(this)||this;return e.skinName=FriendDeleteAlertSkin,e}return __extends(e,t),e.prototype.onTouchTap=function(t){var e=t.target.name;switch(e){case"closeBtn":this.close();break;case"confirmBtn":AppCenter.uploadActivityLog("1020085","click","page"),this.dispatchEventWith("confirmdelete",!1,this.data),this.close(!0)}},e.prototype.open=function(e){t.prototype.open.call(this,e),this.data=e,AppCenter.uploadActivityLog("1020085","show","page"),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.close=function(e){void 0===e&&(e=!1),t.prototype.close.call(this),this.data=null,e||AppCenter.uploadActivityLog("1020085","close","page"),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.show=function(t){return this.instance||(this.instance=new e),this.instance.open(t),this.instance},e.hide=function(t){void 0===t&&(t=!1),this.instance&&t&&(this.instance.close(),this.instance.destroy())},e}(BaseEuiView);__reflect(FriendDeleteAlert.prototype,"FriendDeleteAlert");var FriendDeleteItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.headImg.mask=this.maskRect},e.prototype.dataChanged=function(){var t=this,e=this.data,i=e.nickname,n=e.invitecode,a=e.figureurl;this.nameLbl.text=i,this.codeLbl.text="邀请码:"+n,GameUtil.getHeadIconByUrl(a).then(function(e){t.headImg.texture&&t.headImg.texture.dispose(),t.headImg.texture=e})},e.prototype.onTouchTap=function(t){var e=t.target.name;switch(e){case"deleteBtn":this.dispatchEventWith("friendDelete",!0,this.data)}},e.prototype.$onAddToStage=function(e,i){t.prototype.$onAddToStage.call(this,e,i),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e}(eui.ItemRenderer);__reflect(FriendDeleteItem.prototype,"FriendDeleteItem");var FriendDetailItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.headImg.mask=this.maskRect},e.prototype.dataChanged=function(){var t=this,e=this.data,i=e.nickname,n=e.invitecode,a=e.figureurl;this.nameLbl.text=i,this.codeLbl.text="邀请码:"+n,GameUtil.getHeadIconByUrl(a).then(function(e){t.headImg.texture&&t.headImg.texture.dispose(),t.headImg.texture=e})},e.prototype.onTouchTap=function(t){t.target.name;this.dispatchEventWith("friendDetail",!0,this.data)},e.prototype.$onAddToStage=function(e,i){t.prototype.$onAddToStage.call(this,e,i),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e}(eui.ItemRenderer);__reflect(FriendDetailItem.prototype,"FriendDetailItem");var FriendListItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.headImg.mask=this.maskRect},e.prototype.dataChanged=function(){var t=this,e=this.data,i=e.nickname,n=e.invitecode,a=e.figureurl;this.nameLbl.text=i,this.codeLbl.text="邀请码:"+n,GameUtil.getHeadIconByUrl(a).then(function(e){t.headImg.texture&&t.headImg.texture.dispose(),t.headImg.texture=e})},e.prototype.onTouchTap=function(t){var e=t.target.name;"invitePkBtn"==e&&this.dispatchEventWith("invitePk",!0,this.data)},e.prototype.$onAddToStage=function(e,i){t.prototype.$onAddToStage.call(this,e,i),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e}(eui.ItemRenderer);__reflect(FriendListItem.prototype,"FriendListItem");var FriendOnlineView=function(t){function e(){var e=t.call(this)||this;return e.skinName=FriendOnlineViewSkin,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this);var e=AppUtil.isAndroidOrIos();e>1?this.currentState="ios":this.currentState="normal"},e.prototype.onTouchTap=function(t){var e=t.target.name;switch(e){case"closeBtn":this.close();break;case"inviteBtn":AppCenter.uploadActivityLog("1020080","click","page"),PKModel.instance().inviteFriendPK()}},e.prototype.onInvitePk=function(t){var i=t.data;PKModel.instance().sendInviteFriendInfo(i.accid),e.instance.close()},e.prototype.showFriendList=function(t){var e=t?t.online_friend_list:[];if(this.dataProvider.replaceAll(e),this.listEmptyLbl.visible=!e.length,this.listEmptyLbl.visible){if(!this.arrowImg.tween_count){var i=egret.Tween.get(this.arrowImg,{loop:!0});i.to({y:200},500,egret.Ease.quadOut).to({y:180},500,egret.Ease.quadOut)}}else egret.Tween.removeTweens(this.arrowImg)},e.prototype.open=function(e){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return t.prototype.open.call(this,e),this.addEventListener("invitePk",this.onInvitePk,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.showFriendList(null),[4,HttpServer.getOnlineFriends()];case 1:return i=n.sent(),this.showFriendList(i),[2]}})})},e.prototype.close=function(){t.prototype.close.call(this),this.removeEventListener("invitePk",this.onInvitePk,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.addToStage=function(){AppCenter.uploadActivityLog("1020080","show","page")},e.prototype.removeFromStage=function(){AppCenter.uploadActivityLog("1020080","close","page")},e.show=function(t){this.instance||(this.instance=new e),this.instance.open(t)},e.hide=function(t){void 0===t&&(t=!1),this.instance&&(this.instance.close(),t&&this.instance.destroy())},e}(BaseEuiView);__reflect(FriendOnlineView.prototype,"FriendOnlineView");var FriendSearchView=function(t){function e(){var e=t.call(this)||this;return e.playinfo=null,e.skinName=FriendSearchViewSkin,e.isEnableBg=!1,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.headImg.mask=this.maskRect},e.prototype.onTouchTap=function(t){var e=this,i=t.target.name;switch(i){case"searchBtn":AppCenter.uploadActivityLog("1020083","click","page");var n=this.inputLbl.text;n&&n.trim()&&9==n.trim().length?HttpServer.getSearchedInfo(n).then(function(t){e.playinfo=t,e.showSearchFriend(t)}):AppCenter.showToast("邀请码为9位数字");break;case"addFriendBtn":HttpServer.applyFriend(this.playinfo.accid).then(function(){AppCenter.showToast("已申请~"),e.showSearchFriend(null)},function(){e.showSearchFriend(null)});break;case"closeBtn":this.close()}},e.prototype.showSearchFriend=function(t){var e=this;if(!t)return this.playinfo=null,this.inputLbl.text="",void(this.friendGroup.visible=!1);this.friendGroup.visible=!0;var i=t.nickname,n=t.invitecode,a=t.figureurl;this.nameLbl.text=i,this.codeLbl.text=n,GameUtil.getHeadIconByUrl(a).then(function(t){e.headImg.texture&&e.headImg.texture.dispose(),e.headImg.texture=t})},e.prototype.open=function(e){t.prototype.open.call(this,e),this.showSearchFriend(null),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.close=function(){t.prototype.close.call(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.addToStage=function(){AppCenter.uploadActivityLog("1020083","show","page")},e.prototype.removeFromStage=function(){AppCenter.uploadActivityLog("1020083","close","page")},e.show=function(t){this.instance||(this.instance=new e),this.instance.open(t)},e.hide=function(t){void 0===t&&(t=!1),this.instance&&(this.instance.close(),t&&this.instance.destroy())},e}(BaseEuiView);__reflect(FriendSearchView.prototype,"FriendSearchView");var FriendView=function(t){function e(){var e=t.call(this)||this;return e.curTabIndex=0,e.friendDataList=[],e.applyDataList=[],e.oldRendererType=0,e.skinName=FriendViewSkin,e}return __extends(e,t),e.prototype.init=function(){var e=this;t.prototype.init.call(this),HttpServer.friendApplyList().then(function(t){var i=t?t.apply_list:[];e.applyGroup.visible=i.length>0,e.applyCountLbl.text=i.length+""});var i=GameModel.instance().accountInfo||{},n=i.mInviteCode||i.invite_code||"";this.codeLbl.text="您的邀请码: "+n,this.copyLbl.x=this.codeLbl.x+this.codeLbl.textWidth+6,this.tabSelect(1)},e.prototype.onTouchTap=function(t){var e=t.target.name;switch(e){case"closeBtn":this.close();break;case"tabBtn1":GameSound.instance().playSound("btn"),this.tabSelect(1);break;case"tabBtn2":GameSound.instance().playSound("btn"),this.tabSelect(2);break;case"searchBtn":AppCenter.uploadActivityLog("1020082","click","page","","3"),FriendSearchView.show();break;case"revokeBtn":AppCenter.uploadActivityLog("1020082","click","page","","4"),this.showDeleteBtn(1),this.changeItemRenderer(1);break;case"deleteBtn":AppCenter.uploadActivityLog("1020082","click","page","","2"),this.showDeleteBtn(2),this.changeItemRenderer(3);break;case"copyBtn":1==this.curTabIndex?AppCenter.uploadActivityLog("1020082","click","page","","1"):AppCenter.uploadActivityLog("1020086","click","page"),AppUtil.sendNativeMethod("copytoClipboard",{content:GameData.baseData.accid})}},e.prototype.changeItemRenderer=function(t){this.oldRendererType!=t&&(1==t&&(this.list.itemRenderer=FriendDetailItem,this.list.itemRendererSkinName=FriendDetailItemSkin),2==t&&(AppCenter.uploadActivityLog("1020086","show","page"),this.list.itemRenderer=FriendApplyItem,this.list.itemRendererSkinName=FriendApplyItemSkin),3==t&&(this.list.itemRenderer=FriendDeleteItem,this.list.itemRendererSkinName=FriendDeleteItemSkin),this.list.validateNow(),1==this.oldRendererType,2==this.oldRendererType&&AppCenter.uploadActivityLog("1020086","close","page"),3==this.oldRendererType,this.oldRendererType=t)},e.prototype.onAgreeFriend=function(t){var e=this,i=t.data;HttpServer.agreeApply(i.accid).then(function(){ArrayUtil.removeEleByProp(e.applyDataList,"accid",i.accid),EventCenter.instance().dispatchEventWith(GameEvent.FRIEND_APPLY_CHANGE,!1,e.applyDataList.length),e.refreshView()})},e.prototype.onRefuseFriend=function(t){var e=this,i=t.data;HttpServer.refuseApply(i.accid).then(function(){ArrayUtil.removeEleByProp(e.applyDataList,"accid",i.accid),EventCenter.instance().dispatchEventWith(GameEvent.FRIEND_APPLY_CHANGE,!1,e.applyDataList.length),e.refreshView()})},e.prototype.onFriendDetail=function(t){var e=t.data;FriendBattleDetailView.show(e)},e.prototype.onFriendDelete=function(t){var e=t.data,i=FriendDeleteAlert.show(e);i.removeEventListener("confirmdelete",this.confirmDeleteFriend,this),i.addEventListener("confirmdelete",this.confirmDeleteFriend,this)},e.prototype.confirmDeleteFriend=function(t){var e=this;t.target.removeEventListener("confirmdelete",this.confirmDeleteFriend,this);var i=t.data;HttpServer.deleteFriend(i.accid).then(function(){ArrayUtil.removeEleByProp(e.friendDataList,"accid",i.accid),e.refreshView(),e.showDeleteBtn()})},e.prototype.tabSelect=function(t){return __awaiter(this,void 0,void 0,function(){var e,e;return __generator(this,function(i){switch(i.label){case 0:return this.curTabIndex==t?[3,5]:(this.currentState=1==t?"friendstate":"applystate",this.curTabIndex=t,this.friendDataList=[],this.applyDataList=[],this.refreshView(),1!=t?[3,2]:(this.scrollerbg.height=600,this.scroller.height=580,this.friendGroup.visible=!0,[4,HttpServer.getFriends()]));case 1:return e=i.sent(),this.friendDataList=e?e.friend_list:[],this.showDeleteBtn(),[3,4];case 2:return 2!=t?[3,4]:(this.scrollerbg.height=700,this.scroller.height=680,this.friendGroup.visible=!1,[4,HttpServer.friendApplyList()]);case 3:e=i.sent(),this.applyDataList=e?e.apply_list:[],i.label=4;case 4:1==this.curTabIndex?AppCenter.uploadActivityLog("1020082","show","page"):AppCenter.uploadActivityLog("1020086","show","page"),this.refreshView(),i.label=5;case 5:return[2]}})})},e.prototype.showDeleteBtn=function(t){if(void 0===t&&(t=1),1==t){this.revokeBtn.visible=!1,this.deleteBtn.visible=!0;var e=this.friendDataList.length?1:.35;this.deleteBtn.alpha=e,this.deleteBtn.touchEnabled=this.friendDataList.length>0}else{this.revokeBtn.visible=!0,this.deleteBtn.visible=!1;var e=this.friendDataList.length?1:.35;this.revokeBtn.alpha=e}},e.prototype.refreshView=function(){1==this.curTabIndex?(this.changeItemRenderer(1),this.friendCountLbl.textFlow=[{text:this.friendDataList.length+"",style:{textColor:9036411}},{text:"/200"}],this.dataProvider.replaceAll(this.friendDataList),this.noFriendImg.visible=!this.friendDataList.length,this.listEmptyLbl.visible=!1,this.showDeleteBtn(1)):2==this.curTabIndex&&(this.noFriendImg.visible=!1,this.listEmptyLbl.visible=!this.applyDataList.length,this.changeItemRenderer(2),this.dataProvider.replaceAll(this.applyDataList),this.applyGroup.visible=this.applyDataList.length>0,this.applyCountLbl.text=this.applyDataList.length+""),this.dataProvider.refresh()},e.prototype.open=function(e){t.prototype.open.call(this,e),this.addEventListener("agreeFriend",this.onAgreeFriend,this),this.addEventListener("refuseFriend",this.onRefuseFriend,this),this.addEventListener("friendDetail",this.onFriendDetail,this),this.addEventListener("friendDelete",this.onFriendDelete,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.showDeleteBtn(1),this.refreshView()},e.prototype.close=function(){t.prototype.close.call(this),this.removeEventListener("agreeFriend",this.onAgreeFriend,this),this.removeEventListener("refuseFriend",this.onRefuseFriend,this),this.removeEventListener("friendDetail",this.onFriendDetail,this),this.removeEventListener("friendDelete",this.onFriendDelete,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.addToStage=function(){t.prototype.addToStage.call(this)},e.prototype.removeFromStage=function(){t.prototype.removeFromStage.call(this),1==this.curTabIndex?AppCenter.uploadActivityLog("1020082","close","page"):AppCenter.uploadActivityLog("1020086","close","page")},e.show=function(t){this.instance||(this.instance=new e),this.instance.open(t)},e.hide=function(t){void 0===t&&(t=!1),this.instance&&(this.instance.close(),t&&this.instance.destroy())},e}(BaseEuiView);__reflect(FriendView.prototype,"FriendView");var IconBtnTip=function(t){function e(){var e=t.call(this)||this;return e.data="",e.skinName="IconBtnTipSkin",e}return __extends(e,t),e.prototype.showTip=function(t,e){void 0===e&&(e=0),this.data=t,e>0&&egret.setTimeout(this.destory,this,e),this.update()},e.prototype.update=function(){this.tipTxt.text=this.data},e.prototype.destory=function(){this.parent&&this.parent.removeChild(this)},e}(eui.Component);__reflect(IconBtnTip.prototype,"IconBtnTip");